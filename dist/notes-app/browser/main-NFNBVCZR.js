var QO=Object.defineProperty,YO=Object.defineProperties;var ZO=Object.getOwnPropertyDescriptors;var yd=Object.getOwnPropertySymbols,JO=Object.getPrototypeOf,ST=Object.prototype.hasOwnProperty,AT=Object.prototype.propertyIsEnumerable,XO=Reflect.get;var bT=(n,e,t)=>e in n?QO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||={})ST.call(e,t)&&bT(n,t,e[t]);if(yd)for(var t of yd(e))AT.call(e,t)&&bT(n,t,e[t]);return n},K=(n,e)=>YO(n,ZO(e));var RT=n=>typeof n=="symbol"?n:n+"",NT=(n,e)=>{var t={};for(var r in n)ST.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&yd)for(var r of yd(n))e.indexOf(r)<0&&AT.call(n,r)&&(t[r]=n[r]);return t};var pr=(n,e,t)=>XO(JO(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(l){i(l)}},s=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});var Rm;function Nm(){return Rm}function gr(n){let e=Rm;return Rm=n,e}var e1=Symbol("NotFound"),vd=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function ys(n){return n===e1||n?.name==="\u0275NotFound"}function Dd(n,e){return Object.is(n,e)}var Xe=null,_d=!1,Mm=1,t1=null,wt=Symbol("SIGNAL");function te(n){let e=Xe;return Xe=n,e}function Cd(){return Xe}var Qr={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function vs(n){if(_d)throw new Error("");if(Xe===null)return;Xe.consumerOnSignalRead(n);let e=Xe.nextProducerIndex++;if(Sd(Xe),e<Xe.producerNode.length&&Xe.producerNode[e]!==n&&Ac(Xe)){let t=Xe.producerNode[e];bd(t,Xe.producerIndexOfThis[e])}Xe.producerNode[e]!==n&&(Xe.producerNode[e]=n,Xe.producerIndexOfThis[e]=Ac(Xe)?PT(n,Xe,e):0),Xe.producerLastReadVersion[e]=n.version}function MT(){Mm++}function Td(n){if(!(Ac(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Mm)){if(!n.producerMustRecompute(n)&&!_s(n)){wd(n);return}n.producerRecomputeValue(n),wd(n)}}function Pm(n){if(n.liveConsumerNode===void 0)return;let e=_d;_d=!0;try{for(let t of n.liveConsumerNode)t.dirty||n1(t)}finally{_d=e}}function xm(){return Xe?.consumerAllowSignalWrites!==!1}function n1(n){n.dirty=!0,Pm(n),n.consumerMarkedDirty?.(n)}function wd(n){n.dirty=!1,n.lastCleanEpoch=Mm}function Yr(n){return n&&(n.nextProducerIndex=0),te(n)}function Ki(n,e){if(te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ac(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)bd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function _s(n){Sd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Td(t),r!==t.version))return!0}return!1}function Es(n){if(Sd(n),Ac(n))for(let e=0;e<n.producerNode.length;e++)bd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function PT(n,e,t){if(xT(n),n.liveConsumerNode.length===0&&kT(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=PT(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function bd(n,e){if(xT(n),n.liveConsumerNode.length===1&&kT(n))for(let r=0;r<n.producerNode.length;r++)bd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Sd(i),i.producerIndexOfThis[r]=e}}function Ac(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Sd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function xT(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function kT(n){return n.producerNode!==void 0}function Ad(n){t1?.(n)}function Rd(n,e){let t=Object.create(r1);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Td(t),vs(t),t.value===Sc)throw t.error;return t.value};return r[wt]=t,Ad(t),r}var Ed=Symbol("UNSET"),Id=Symbol("COMPUTING"),Sc=Symbol("ERRORED"),r1=K(O({},Qr),{value:Ed,dirty:!0,error:null,equal:Dd,kind:"computed",producerMustRecompute(n){return n.value===Ed||n.value===Id},producerRecomputeValue(n){if(n.value===Id)throw new Error("");let e=n.value;n.value=Id;let t=Yr(n),r,i=!1;try{r=n.computation(),te(null),i=e!==Ed&&e!==Sc&&r!==Sc&&n.equal(e,r)}catch(o){r=Sc,n.error=o}finally{Ki(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function i1(){throw new Error}var OT=i1;function FT(n){OT(n)}function km(n){OT=n}var o1=null;function Om(n,e){let t=Object.create(Nd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>LT(t);return r[wt]=t,Ad(t),[r,s=>Is(t,s),s=>Fm(t,s)]}function LT(n){return vs(n),n.value}function Is(n,e){xm()||FT(n),n.equal(n.value,e)||(n.value=e,s1(n))}function Fm(n,e){xm()||FT(n),Is(n,e(n.value))}var Nd=K(O({},Qr),{equal:Dd,value:void 0,kind:"signal"});function s1(n){n.version++,MT(),Pm(n),o1?.(n)}function ne(n){return typeof n=="function"}function ws(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Md=ws(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Qi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof Md?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{VT(o)}catch(s){e=e??[],s instanceof Md?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Md(e)}}add(e){var t;if(e&&e!==this)if(this.closed)VT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Qi(t,e)}remove(e){let{_finalizers:t}=this;t&&Qi(t,e),e instanceof n&&e._removeParent(this)}};je.EMPTY=(()=>{let n=new je;return n.closed=!0,n})();var Lm=je.EMPTY;function Pd(n){return n instanceof je||n&&"closed"in n&&ne(n.remove)&&ne(n.add)&&ne(n.unsubscribe)}function VT(n){ne(n)?n():n.unsubscribe()}var bn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ds={setTimeout(n,e,...t){let{delegate:r}=Ds;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ds;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function xd(n){Ds.setTimeout(()=>{let{onUnhandledError:e}=bn;if(e)e(n);else throw n})}function Rc(){}var jT=Vm("C",void 0,void 0);function UT(n){return Vm("E",void 0,n)}function BT(n){return Vm("N",n,void 0)}function Vm(n,e,t){return{kind:n,value:e,error:t}}var Yi=null;function Cs(n){if(bn.useDeprecatedSynchronousErrorHandling){let e=!Yi;if(e&&(Yi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Yi;if(Yi=null,t)throw r}}else n()}function $T(n){bn.useDeprecatedSynchronousErrorHandling&&Yi&&(Yi.errorThrown=!0,Yi.error=n)}var Zi=class extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Pd(e)&&e.add(this)):this.destination=u1}static create(e,t,r){return new Ts(e,t,r)}next(e){this.isStopped?Um(BT(e),this):this._next(e)}error(e){this.isStopped?Um(UT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Um(jT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},a1=Function.prototype.bind;function jm(n,e){return a1.call(n,e)}var Bm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){kd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){kd(r)}else kd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){kd(t)}}},Ts=class extends Zi{constructor(e,t,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&bn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&jm(e.next,o),error:e.error&&jm(e.error,o),complete:e.complete&&jm(e.complete,o)}):i=e}this.destination=new Bm(i)}};function kd(n){bn.useDeprecatedSynchronousErrorHandling?$T(n):xd(n)}function c1(n){throw n}function Um(n,e){let{onStoppedNotification:t}=bn;t&&Ds.setTimeout(()=>t(n,e))}var u1={closed:!0,next:Rc,error:c1,complete:Rc};var bs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qt(n){return n}function $m(...n){return Hm(n)}function Hm(n){return n.length===0?Qt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var se=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=d1(t)?t:new Ts(t,r,i);return Cs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=HT(r),new r((i,o)=>{let s=new Ts({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[bs](){return this}pipe(...t){return Hm(t)(this)}toPromise(t){return t=HT(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function HT(n){var e;return(e=n??bn.Promise)!==null&&e!==void 0?e:Promise}function l1(n){return n&&ne(n.next)&&ne(n.error)&&ne(n.complete)}function d1(n){return n&&n instanceof Zi||l1(n)&&Pd(n)}function zm(n){return ne(n?.lift)}function ye(n){return e=>{if(zm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new qm(n,e,t,r,i)}var qm=class extends Zi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ss(){return ye((n,e)=>{let t=null;n._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var As=class extends se{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,zm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new je;let t=this.getSubject();e.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=je.EMPTY)}return e}refCount(){return Ss()(this)}};var zT=ws(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class n extends se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Od(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new zT}next(t){Cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Lm:(this.currentObservers=null,o.push(t),new je(()=>{this.currentObservers=null,Qi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new se;return t.source=this,t}}return n.create=(e,t)=>new Od(e,t),n})(),Od=class extends et{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Lm}};var lt=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Gm={now(){return(Gm.delegate||Date).now()},delegate:void 0};var Fd=class extends je{constructor(e,t){super()}schedule(e,t=0){return this}};var Nc={setInterval(n,e,...t){let{delegate:r}=Nc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Nc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Rs=class extends Fd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Nc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Nc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Qi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ns=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ns.now=Gm.now;var Ms=class extends Ns{constructor(e,t=Ns.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Wm=new Ms(Rs);var Ld=class extends Rs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Vd=class extends Ms{};var Km=new Vd(Ld);var Vt=new se(n=>n.complete());function qT(n){return n&&ne(n.schedule)}function GT(n){return n[n.length-1]}function jd(n){return ne(GT(n))?n.pop():void 0}function Zr(n){return qT(GT(n))?n.pop():void 0}function Qm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function KT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function c(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function WT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ji(n){return this instanceof Ji?(this.v=n,this):new Ji(n)}function QT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(M){return new Promise(function(N,F){o.push([y,M,N,F])>1||c(y,M)})},C&&(i[y]=C(i[y])))}function c(y,C){try{l(r[y](C))}catch(M){g(o[0][3],M)}}function l(y){y.value instanceof Ji?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){c("next",y)}function p(y){c("throw",y)}function g(y,C){y(C),o.shift(),o.length&&c(o[0][0],o[0][1])}}function YT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof WT=="function"?WT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Ud=n=>n&&typeof n.length=="number"&&typeof n!="function";function Bd(n){return ne(n?.then)}function $d(n){return ne(n[bs])}function Hd(n){return Symbol.asyncIterator&&ne(n?.[Symbol.asyncIterator])}function zd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function h1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qd=h1();function Gd(n){return ne(n?.[qd])}function Wd(n){return QT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ji(t.read());if(i)return yield Ji(void 0);yield yield Ji(r)}}finally{t.releaseLock()}})}function Kd(n){return ne(n?.getReader)}function Ke(n){if(n instanceof se)return n;if(n!=null){if($d(n))return f1(n);if(Ud(n))return p1(n);if(Bd(n))return g1(n);if(Hd(n))return ZT(n);if(Gd(n))return m1(n);if(Kd(n))return y1(n)}throw zd(n)}function f1(n){return new se(e=>{let t=n[bs]();if(ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function p1(n){return new se(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function g1(n){return new se(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,xd)})}function m1(n){return new se(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ZT(n){return new se(e=>{v1(n,e).catch(t=>e.error(t))})}function y1(n){return ZT(Wd(n))}function v1(n,e){var t,r,i,o;return KT(this,void 0,void 0,function*(){try{for(t=YT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function jt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Jr(n,e=0){return ye((t,r)=>{t.subscribe(he(r,i=>jt(r,n,()=>r.next(i),e),()=>jt(r,n,()=>r.complete(),e),i=>jt(r,n,()=>r.error(i),e)))})}function Xr(n,e=0){return ye((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function JT(n,e){return Ke(n).pipe(Xr(e),Jr(e))}function XT(n,e){return Ke(n).pipe(Xr(e),Jr(e))}function eb(n,e){return new se(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function tb(n,e){return new se(t=>{let r;return jt(t,e,()=>{r=n[qd](),jt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function Qd(n,e){if(!n)throw new Error("Iterable cannot be null");return new se(t=>{jt(t,e,()=>{let r=n[Symbol.asyncIterator]();jt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function nb(n,e){return Qd(Wd(n),e)}function rb(n,e){if(n!=null){if($d(n))return JT(n,e);if(Ud(n))return eb(n,e);if(Bd(n))return XT(n,e);if(Hd(n))return Qd(n,e);if(Gd(n))return tb(n,e);if(Kd(n))return nb(n,e)}throw zd(n)}function Ue(n,e){return e?rb(n,e):Ke(n)}function ee(...n){let e=Zr(n);return Ue(n,e)}function Ps(n,e){let t=ne(n)?n:()=>n,r=i=>i.error(t());return new se(e?i=>e.schedule(r,0,i):r)}function Ym(n){return!!n&&(n instanceof se||ne(n.lift)&&ne(n.subscribe))}var mr=ws(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function fe(n,e){return ye((t,r)=>{let i=0;t.subscribe(he(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:_1}=Array;function E1(n,e){return _1(e)?n(...e):n(e)}function Yd(n){return fe(e=>E1(n,e))}var{isArray:I1}=Array,{getPrototypeOf:w1,prototype:D1,keys:C1}=Object;function Zd(n){if(n.length===1){let e=n[0];if(I1(e))return{args:e,keys:null};if(T1(e)){let t=C1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function T1(n){return n&&typeof n=="object"&&w1(n)===D1}function Jd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Xd(...n){let e=Zr(n),t=jd(n),{args:r,keys:i}=Zd(n);if(r.length===0)return Ue([],e);let o=new se(b1(r,e,i?s=>Jd(i,s):Qt));return t?o.pipe(Yd(t)):o}function b1(n,e,t=Qt){return r=>{ib(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)ib(e,()=>{let l=Ue(n[c],e),h=!1;l.subscribe(he(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ib(n,e,t){n?jt(t,n,e):e()}function ob(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,g=()=>{p&&!c.length&&!l&&e.complete()},y=M=>l<r?C(M):c.push(M),C=M=>{o&&e.next(M),l++;let N=!1;Ke(t(M,h++)).subscribe(he(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let F=c.shift();s?jt(e,s,()=>C(F)):C(F)}g()}catch(F){e.error(F)}}))};return n.subscribe(he(e,y,()=>{p=!0,g()})),()=>{a?.()}}function tt(n,e,t=1/0){return ne(e)?tt((r,i)=>fe((o,s)=>e(r,o,i,s))(Ke(n(r,i))),t):(typeof e=="number"&&(t=e),ye((r,i)=>ob(r,i,n,t)))}function sb(n=1/0){return tt(Qt,n)}function ab(){return sb(1)}function xs(...n){return ab()(Ue(n,Zr(n)))}function Mc(n){return new se(e=>{Ke(n()).subscribe(e)})}function Zm(...n){let e=jd(n),{args:t,keys:r}=Zd(n),i=new se(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let h=0;h<s;h++){let p=!1;Ke(t[h]).subscribe(he(o,g=>{p||(p=!0,l--),a[h]=g},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?Jd(r,a):a),o.complete())}))}});return e?i.pipe(Yd(e)):i}function ln(n,e){return ye((t,r)=>{let i=0;t.subscribe(he(r,o=>n.call(e,o,i++)&&r.next(o)))})}function ei(n){return ye((e,t)=>{let r=null,i=!1,o;r=e.subscribe(he(t,void 0,void 0,s=>{o=Ke(n(s,ei(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function cb(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(he(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ks(n,e){return ne(e)?tt(n,e,1):tt(n,1)}function ti(n){return ye((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function yr(n){return n<=0?()=>Vt:ye((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function eh(n=S1){return ye((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function S1(){return new mr}function Pc(n){return ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function vr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ln((i,o)=>n(i,o,r)):Qt,yr(1),t?ti(e):eh(()=>new mr))}function Os(n){return n<=0?()=>Vt:ye((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Jm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ln((i,o)=>n(i,o,r)):Qt,Os(1),t?ti(e):eh(()=>new mr))}function Xm(n,e){return ye(cb(n,e,arguments.length>=2,!0))}function ey(...n){let e=Zr(n);return ye((t,r)=>{(e?xs(n,t,e):xs(n,t)).subscribe(r)})}function dn(n,e){return ye((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(he(r,c=>{i?.unsubscribe();let l=0,h=o++;Ke(n(c,h)).subscribe(i=he(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function th(n){return ye((e,t)=>{Ke(n).subscribe(he(t,()=>t.complete(),Rc)),!t.closed&&e.subscribe(t)})}function at(n,e,t){let r=ne(n)||e||t?{next:n,error:e,complete:t}:n;return r?ye((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Qt}function ub(n){let e=te(null);try{return n()}finally{te(e)}}var hy="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,t){super(Lc(e,t)),this.code=e}};function A1(n){return`NG0${Math.abs(n)}`}function Lc(n,e){return`${A1(n)}${e?": "+e:""}`}var ro=globalThis;function ke(n){for(let e in n)if(n[e]===ke)return e;throw Error("")}function fb(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ut(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ut).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function fy(n,e){return n?e?`${n} ${e}`:n:e||""}var R1=ke({__forward_ref__:ke});function Er(n){return n.__forward_ref__=Er,n.toString=function(){return Ut(this())},n}function dt(n){return py(n)?n():n}function py(n){return typeof n=="function"&&n.hasOwnProperty(R1)&&n.__forward_ref__===Er}function pb(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ir(n){return{providers:n.providers||[],imports:n.imports||[]}}function Vc(n){return N1(n,sh)}function gy(n){return Vc(n)!==null}function N1(n,e){return n.hasOwnProperty(e)&&n[e]||null}function M1(n){let e=n?.[sh]??null;return e||null}function ny(n){return n&&n.hasOwnProperty(rh)?n[rh]:null}var sh=ke({\u0275prov:ke}),rh=ke({\u0275inj:ke}),H=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function my(n){return n&&!!n.\u0275providers}var yy=ke({\u0275cmp:ke}),vy=ke({\u0275dir:ke}),_y=ke({\u0275pipe:ke}),Ey=ke({\u0275mod:ke}),kc=ke({\u0275fac:ke}),io=ke({__NG_ELEMENT_ID__:ke}),lb=ke({__NG_ENV_ID__:ke});function ah(n){return typeof n=="string"?n:n==null?"":String(n)}function gb(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ah(n)}function Iy(n,e){throw new j(-200,n)}function ch(n,e){throw new j(-201,!1)}var ry;function mb(){return ry}function Pt(n){let e=ry;return ry=n,e}function wy(n,e,t){let r=Vc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;ch(n,"Injector")}var P1={},Xi=P1,iy="__NG_DI_FLAG__",oy=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=eo(t)||0;try{return this.injector.get(e,r&8?null:Xi,r)}catch(i){if(ys(i))return i;throw i}}},ih="ngTempTokenPath",x1="ngTokenPath",k1=/\n/gm,O1="\u0275",db="__source";function F1(n,e=0){let t=Nm();if(t===void 0)throw new j(-203,!1);if(t===null)return wy(n,void 0,e);{let r=L1(e),i=t.retrieve(n,r);if(ys(i)){if(r.optional)return null;throw i}return i}}function re(n,e=0){return(mb()||F1)(dt(n),e)}function P(n,e){return re(n,eo(e))}function eo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function L1(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function sy(n){let e=[];for(let t=0;t<n.length;t++){let r=dt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=V1(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(re(i,o))}else e.push(re(r))}return e}function Dy(n,e){return n[iy]=e,n.prototype[iy]=e,n}function V1(n){return n[iy]}function j1(n,e,t,r){let i=n[ih];throw e[db]&&i.unshift(e[db]),n.message=U1(`
`+n.message,i,t,r),n[x1]=i,n[ih]=null,n}function U1(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==O1?n.slice(2):n;let i=Ut(e);if(Array.isArray(e))i=e.map(Ut).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ut(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(k1,`
  `)}`}function ni(n,e){let t=n.hasOwnProperty(kc);return t?n[kc]:null}function uh(n,e){n.forEach(t=>Array.isArray(t)?uh(t,e):e(t))}function Cy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function jc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function yb(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function vb(n,e,t){let r=Ls(n,e);return r>=0?n[r|1]=t:(r=~r,yb(n,r,e,t)),r}function lh(n,e){let t=Ls(n,e);if(t>=0)return n[t|1]}function Ls(n,e){return B1(n,e,1)}function B1(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ii={},Yt=[],wr=new H(""),Ty=new H("",-1),by=new H(""),Oc=class{get(e,t=Xi){if(t===Xi)throw new vd(`NullInjectorError: No provider for ${Ut(e)}!`);return t}};function Sy(n){return n[Ey]||null}function oi(n){return n[yy]||null}function Ay(n){return n[vy]||null}function _b(n){return n[_y]||null}function Zt(n){return{\u0275providers:n}}function Eb(n){return Zt([{provide:wr,multi:!0,useValue:n}])}function Ib(...n){return{\u0275providers:Ry(!0,n),\u0275fromNgModule:!0}}function Ry(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return uh(e,s=>{let a=s;oh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&wb(i,o),t}function wb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Ny(i,o=>{e(o,r)})}}function oh(n,e,t,r){if(n=dt(n),!n)return!1;let i=null,o=ny(n),s=!o&&oi(n);if(!o&&!s){let c=n.ngModule;if(o=ny(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)oh(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{uh(o.imports,h=>{oh(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&wb(l,e)}if(!a){let l=ni(i)||(()=>new i);e({provide:i,useFactory:l,deps:Yt},i),e({provide:by,useValue:i,multi:!0},i),e({provide:wr,useValue:()=>re(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Ny(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Ny(n,e){for(let t of n)my(t)&&(t=t.\u0275providers),Array.isArray(t)?Ny(t,e):e(t)}var $1=ke({provide:String,useValue:ke});function Db(n){return n!==null&&typeof n=="object"&&$1 in n}function H1(n){return!!(n&&n.useExisting)}function z1(n){return!!(n&&n.useFactory)}function to(n){return typeof n=="function"}function Cb(n){return!!n.useClass}var Uc=new H(""),nh={},hb={},ty;function Bc(){return ty===void 0&&(ty=new Oc),ty}var nt=class{},no=class extends nt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,cy(e,s=>this.processProvider(s)),this.records.set(Ty,Fs(void 0,this)),i.has("environment")&&this.records.set(nt,Fs(void 0,this));let o=this.records.get(Uc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(by,Yt,{self:!0}))}retrieve(e,t){let r=eo(t)||0;try{return this.get(e,Xi,r)}catch(i){if(ys(i))return i;throw i}}destroy(){xc(this),this._destroyed=!0;let e=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return xc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){xc(this);let t=gr(this),r=Pt(void 0),i;try{return e()}finally{gr(t),Pt(r)}}get(e,t=Xi,r){if(xc(this),e.hasOwnProperty(lb))return e[lb](this);let i=eo(r),o,s=gr(this),a=Pt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=Q1(e)&&Vc(e);h&&this.injectableDefInScope(h)?l=Fs(ay(e),nh):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let c=i&2?Bc():this.parent;return t=i&8&&t===Xi?null:t,c.get(e,t)}catch(c){if(ys(c)){if((c[ih]=c[ih]||[]).unshift(Ut(e)),s)throw c;return j1(c,e,"R3InjectorError",this.source)}else throw c}finally{Pt(a),gr(s)}}resolveInjectorInitializers(){let e=te(null),t=gr(this),r=Pt(void 0),i;try{let o=this.get(wr,Yt,{self:!0});for(let s of o)s()}finally{gr(t),Pt(r),te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ut(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=dt(e);let t=to(e)?e:dt(e&&e.provide),r=G1(e);if(!to(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Fs(void 0,nh,!0),i.factory=()=>sy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=te(null);try{return t.value===hb?Iy(Ut(e)):t.value===nh&&(t.value=hb,t.value=t.factory()),typeof t.value=="object"&&t.value&&K1(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=dt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function ay(n){let e=Vc(n),t=e!==null?e.factory:ni(n);if(t!==null)return t;if(n instanceof H)throw new j(204,!1);if(n instanceof Function)return q1(n);throw new j(204,!1)}function q1(n){if(n.length>0)throw new j(204,!1);let t=M1(n);return t!==null?()=>t.factory(n):()=>new n}function G1(n){if(Db(n))return Fs(void 0,n.useValue);{let e=My(n);return Fs(e,nh)}}function My(n,e,t){let r;if(to(n)){let i=dt(n);return ni(i)||ay(i)}else if(Db(n))r=()=>dt(n.useValue);else if(z1(n))r=()=>n.useFactory(...sy(n.deps||[]));else if(H1(n))r=()=>re(dt(n.useExisting));else{let i=dt(n&&(n.useClass||n.provide));if(W1(n))r=()=>new i(...sy(n.deps));else return ni(i)||ay(i)}return r}function xc(n){if(n.destroyed)throw new j(205,!1)}function Fs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function W1(n){return!!n.deps}function K1(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Q1(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function cy(n,e){for(let t of n)Array.isArray(t)?cy(t,e):t&&my(t)?cy(t.\u0275providers,e):e(t)}function ft(n,e){let t;n instanceof no?(xc(n),t=n):t=new oy(n);let r,i=gr(t),o=Pt(void 0);try{return e()}finally{gr(i),Pt(o)}}function Tb(){return mb()!==void 0||Nm()!=null}var An=0,ue=1,J=2,ht=3,hn=4,fn=5,$c=6,Vs=7,Dt=8,oo=9,Dr=10,He=11,js=12,Py=13,so=14,pn=15,ao=16,co=17,uo=18,Hc=19,xy=20,_r=21,dh=22,Cr=23,Jt=24,hh=25,Bt=26,bb=1;var si=7,zc=8,qc=9,$t=10;function qn(n){return Array.isArray(n)&&typeof n[bb]=="object"}function Rn(n){return Array.isArray(n)&&n[bb]===!0}function ky(n){return(n.flags&4)!==0}function ai(n){return n.componentOffset>-1}function fh(n){return(n.flags&1)===1}function Gn(n){return!!n.template}function Us(n){return(n[J]&512)!==0}function lo(n){return(n[J]&256)===256}var Sb="svg",Ab="math";function gn(n){for(;Array.isArray(n);)n=n[An];return n}function Oy(n,e){return gn(e[n])}function Nn(n,e){return gn(e[n.index])}function ph(n,e){return n.data[e]}function Fy(n,e){return n[e]}function Ly(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function mn(n,e){let t=e[n];return qn(t)?t:t[An]}function gh(n){return(n[J]&128)===128}function Rb(n){return Rn(n[ht])}function Gc(n,e){return e==null?null:n[e]}function Vy(n){n[co]=0}function jy(n){n[J]&1024||(n[J]|=1024,gh(n)&&ho(n))}function Nb(n,e){for(;n>0;)e=e[so],n--;return e}function Wc(n){return!!(n[J]&9216||n[Jt]?.dirty)}function mh(n){n[Dr].changeDetectionScheduler?.notify(8),n[J]&64&&(n[J]|=1024),Wc(n)&&ho(n)}function ho(n){n[Dr].changeDetectionScheduler?.notify(0);let e=ri(n);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!gh(e)));)e=ri(e)}function Uy(n,e){if(lo(n))throw new j(911,!1);n[_r]===null&&(n[_r]=[]),n[_r].push(e)}function Mb(n,e){if(n[_r]===null)return;let t=n[_r].indexOf(e);t!==-1&&n[_r].splice(t,1)}function ri(n){let e=n[ht];return Rn(e)?e[ht]:e}function Pb(n){return n[Vs]??=[]}function xb(n){return n.cleanup??=[]}var ce={lFrame:Zb(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Kc=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(Kc||{}),Y1=0,uy=!1;function kb(){return ce.lFrame.elementDepthCount}function Ob(){ce.lFrame.elementDepthCount++}function Fb(){ce.lFrame.elementDepthCount--}function By(){return ce.bindingsEnabled}function Lb(){return ce.skipHydrationRootTNode!==null}function Vb(n){return ce.skipHydrationRootTNode===n}function jb(){ce.skipHydrationRootTNode=null}function Ce(){return ce.lFrame.lView}function xt(){return ce.lFrame.tView}function Wn(n){return ce.lFrame.contextLView=n,n[Dt]}function Kn(n){return ce.lFrame.contextLView=null,n}function kt(){let n=$y();for(;n!==null&&n.type===64;)n=n.parent;return n}function $y(){return ce.lFrame.currentTNode}function Ub(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Bs(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function Hy(){return ce.lFrame.isParent}function Bb(){ce.lFrame.isParent=!1}function $b(){return ce.lFrame.contextLView}function zy(n){pb("Must never be called in production mode"),Y1=n}function qy(){return uy}function $s(n){let e=uy;return uy=n,e}function Hb(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function zb(n){return ce.lFrame.bindingIndex=n}function Qc(){return ce.lFrame.bindingIndex++}function qb(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Gb(){return ce.lFrame.inI18n}function Wb(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,yh(e)}function Kb(){return ce.lFrame.currentDirectiveIndex}function yh(n){ce.lFrame.currentDirectiveIndex=n}function Qb(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Gy(n){ce.lFrame.currentQueryIndex=n}function Z1(n){let e=n[ue];return e.type===2?e.declTNode:e.type===1?n[fn]:null}function Wy(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Z1(o),i===null||(o=o[so],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ce.lFrame=Yb();return r.currentTNode=e,r.lView=n,!0}function vh(n){let e=Yb(),t=n[ue];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Yb(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?Zb(n):e}function Zb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Jb(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Ky=Jb;function _h(){let n=Jb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Xb(n){return(ce.lFrame.contextLView=Nb(n,ce.lFrame.contextLView))[Dt]}function fo(){return ce.lFrame.selectedIndex}function ci(n){ce.lFrame.selectedIndex=n}function Eh(){let n=ce.lFrame;return ph(n.tView,n.selectedIndex)}function eS(){return ce.lFrame.currentNamespace}var tS=!0;function Ih(){return tS}function wh(n){tS=n}function ly(n,e=null,t=null,r){let i=Qy(n,e,t,r);return i.resolveInjectorInitializers(),i}function Qy(n,e=null,t=null,r,i=new Set){let o=[t||Yt,Ib(n)];return r=r||(typeof n=="object"?void 0:Ut(n)),new no(o,e||Bc(),r||null,i)}var $e=class n{static THROW_IF_NOT_FOUND=Xi;static NULL=new Oc;static create(e,t){if(Array.isArray(e))return ly({name:""},t,e,"");{let r=e.name??"";return ly({name:r},e.parent,e.providers,r)}}static \u0275prov=q({token:n,providedIn:"any",factory:()=>re(Ty)});static __NG_ELEMENT_ID__=-1},ct=new H(""),Qn=(()=>{class n{static __NG_ELEMENT_ID__=J1;static __NG_ENV_ID__=t=>t}return n})(),Fc=class extends Qn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return lo(this._lView)}onDestroy(e){let t=this._lView;return Uy(t,e),()=>Mb(t,e)}};function J1(){return new Fc(Ce())}var Sn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ht=new H("",{providedIn:"root",factory:()=>{let n=P(nt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Sn),e.handleError(t))}}}),nS={provide:wr,useValue:()=>void P(Sn),multi:!0},X1=new H("",{providedIn:"root",factory:()=>{let n=P(ct).defaultView;if(!n)return;let e=P(Ht),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),P(Qn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function Yy(){return Zt([Eb(()=>void P(X1))])}function Zy(n){return typeof n=="function"&&n[wt]!==void 0}function Qe(n,e){let[t,r,i]=Om(n,e?.equal),o=t,s=o[wt];return o.set=r,o.update=i,o.asReadonly=Jy.bind(o),o}function Jy(){let n=this[wt];if(n.readonlyFn===void 0){let e=()=>this();e[wt]=n,n.readonlyFn=e}return n.readonlyFn}function Xy(n){return Zy(n)&&typeof n.set=="function"}var zn=class{},Yc=new H("",{providedIn:"root",factory:()=>!1});var ev=new H(""),tv=new H("");var Zc=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=eF}return n})();function eF(){return new Zc(Ce(),kt())}var Tr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new lt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new se(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),po=(()=>{class n{internalPendingTasks=P(Tr);scheduler=P(zn);errorHandler=P(Ht);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})();function go(...n){}var Jc=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new dy})}return n})(),dy=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Ws(n){return{toString:n}.toString()}var Dh="__parameters__";function cF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function xS(n,e,t){return Ws(()=>{let r=cF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(Dh)?c[Dh]:Object.defineProperty(c,Dh,{value:[]})[Dh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var zt=Dy(xS("Optional"),8);var kS=Dy(xS("SkipSelf"),4);function uF(n){return typeof n=="function"}var Ah=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function OS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Do=(()=>{let n=()=>FS;return n.ngInherit=!0,n})();function FS(n){return n.type.prototype.ngOnChanges&&(n.setInput=dF),lF}function lF(){let n=VS(this),e=n?.current;if(e){let t=n.previous;if(t===ii)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function dF(n,e,t,r,i){let o=this.declaredInputs[r],s=VS(n)||hF(n,{previous:ii,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Ah(l&&l.currentValue,t,c===ii),OS(n,e,i,t)}var LS="__ngSimpleChanges__";function VS(n){return n[LS]||null}function hF(n,e){return n[LS]=e}var rS=[];var Re=function(n,e=null,t){for(let r=0;r<rS.length;r++){let i=rS[r];i(n,e,t)}};function fF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=FS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function jS(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Th(n,e,t){US(n,e,3,t)}function bh(n,e,t,r){(n[J]&3)===t&&US(n,e,t,r)}function nv(n,e){let t=n[J];(t&3)===e&&(t&=16383,t+=1,n[J]=t)}function US(n,e,t,r){let i=r!==void 0?n[co]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[co]+=65536),(a<o||o==-1)&&(pF(n,t,e,c),n[co]=(n[co]&4294901760)+c+2),c++}function iS(n,e){Re(4,n,e);let t=te(null);try{e.call(n)}finally{te(t),Re(5,n,e)}}function pF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[J]>>14<n[co]>>16&&(n[J]&3)===e&&(n[J]+=16384,iS(a,o)):iS(a,o)}var zs=-1,vo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function gF(n){return(n.flags&8)!==0}function mF(n){return(n.flags&16)!==0}function yF(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];_F(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function vF(n){return n===3||n===4||n===6}function _F(n){return n.charCodeAt(0)===64}function tu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?oS(n,t,i,null,e[++r]):oS(n,t,i,null,null))}}return n}function oS(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function BS(n){return n!==zs}function Rh(n){return n&32767}function EF(n){return n>>16}function Nh(n,e){let t=EF(n),r=e;for(;t>0;)r=r[so],t--;return r}var fv=!0;function Mh(n){let e=fv;return fv=n,e}var IF=256,$S=IF-1,HS=5,wF=0,Yn={};function DF(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(io)&&(r=t[io]),r==null&&(r=t[io]=wF++);let i=r&$S,o=1<<i;e.data[n+(i>>HS)]|=o}function Ph(n,e){let t=zS(n,e);if(t!==-1)return t;let r=e[ue];r.firstCreatePass&&(n.injectorIndex=e.length,rv(r.data,n),rv(e,null),rv(r.blueprint,null));let i=xv(n,e),o=n.injectorIndex;if(BS(i)){let s=Rh(i),a=Nh(i,e),c=a[ue].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function rv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function zS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function xv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=QS(i),r===null)return zs;if(t++,i=i[so],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return zs}function pv(n,e,t){DF(n,e,t)}function qS(n,e,t){if(t&8||n!==void 0)return n;ch(e,"NodeInjector")}function GS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[oo],o=Pt(void 0);try{return i?i.get(e,r,t&8):wy(e,r,t&8)}finally{Pt(o)}}return qS(r,e,t)}function WS(n,e,t,r=0,i){if(n!==null){if(e[J]&2048&&!(r&2)){let s=AF(n,e,t,r,Yn);if(s!==Yn)return s}let o=KS(n,e,t,r,Yn);if(o!==Yn)return o}return GS(e,t,r,i)}function KS(n,e,t,r,i){let o=bF(t);if(typeof o=="function"){if(!Wy(e,n,r))return r&1?qS(i,t,r):GS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))ch(t);else return s}finally{Ky()}}else if(typeof o=="number"){let s=null,a=zS(n,e),c=zs,l=r&1?e[pn][fn]:null;for((a===-1||r&4)&&(c=a===-1?xv(n,e):e[a+8],c===zs||!aS(r,!1)?a=-1:(s=e[ue],a=Rh(c),e=Nh(c,e)));a!==-1;){let h=e[ue];if(sS(o,a,h.data)){let p=CF(a,e,t,s,r,l);if(p!==Yn)return p}c=e[a+8],c!==zs&&aS(r,e[ue].data[a+8]===l)&&sS(o,a,e)?(s=h,a=Rh(c),e=Nh(c,e)):a=-1}}return i}function CF(n,e,t,r,i,o){let s=e[ue],a=s.data[n+8],c=r==null?ai(a)&&fv:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=TF(a,s,t,c,l);return h!==null?xh(e,s,h,a):Yn}function TF(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let C=s[y];if(y<c&&t===C||y>=c&&C.type===t)return y}if(i){let y=s[c];if(y&&Gn(y)&&y.type===t)return c}return null}function xh(n,e,t,r){let i=n[t],o=e.data;if(i instanceof vo){let s=i;s.resolving&&Iy(gb(o[t]));let a=Mh(s.canSeeViewProviders);s.resolving=!0;let c=o[t].type||o[t],l,h=s.injectImpl?Pt(s.injectImpl):null,p=Wy(n,r,0);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&fF(t,o[t],e)}finally{h!==null&&Pt(h),Mh(a),s.resolving=!1,Ky()}}return i}function bF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(io)?n[io]:void 0;return typeof e=="number"?e>=0?e&$S:SF:e}function sS(n,e,t){let r=1<<n;return!!(t[e+(n>>HS)]&r)}function aS(n,e){return!(n&2)&&!(n&1&&e)}var yo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return WS(this._tNode,this._lView,e,eo(r),t)}};function SF(){return new yo(kt(),Ce())}function Co(n){return Ws(()=>{let e=n.prototype.constructor,t=e[kc]||gv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[kc]||gv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function gv(n){return py(n)?()=>{let e=gv(dt(n));return e&&e()}:ni(n)}function AF(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!Us(s);){let a=KS(o,s,t,r|2,Yn);if(a!==Yn)return a;let c=o.parent;if(!c){let l=s[xy];if(l){let h=l.get(t,Yn,r);if(h!==Yn)return h}c=QS(s),s=s[so]}o=c}return i}function QS(n){let e=n[ue],t=e.type;return t===2?e.declTNode:t===1?n[fn]:null}function RF(){return Hh(kt(),Ce())}function Hh(n,e){return new Ks(Nn(n,e))}var Ks=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=RF}return n})();function YS(n){return(n.flags&128)===128}var kv=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(kv||{}),ZS=new Map,NF=0;function MF(){return NF++}function PF(n){ZS.set(n[Hc],n)}function mv(n){ZS.delete(n[Hc])}var cS="__ngContext__";function ou(n,e){qn(e)?(n[cS]=e[Hc],PF(e)):n[cS]=e}function JS(n){return e0(n[js])}function XS(n){return e0(n[hn])}function e0(n){for(;n!==null&&!Rn(n);)n=n[hn];return n}var yv;function Ov(n){yv=n}function t0(){if(yv!==void 0)return yv;if(typeof document<"u")return document;throw new j(210,!1)}var zh=new H("",{providedIn:"root",factory:()=>xF}),xF="ng",qh=new H(""),li=new H("",{providedIn:"platform",factory:()=>"unknown"});var Gh=new H("",{providedIn:"root",factory:()=>t0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var kF="h",OF="b";var n0=!1,r0=new H("",{providedIn:"root",factory:()=>n0});var FF=(n,e,t,r)=>{};function LF(n,e,t,r){FF(n,e,t,r)}var VF=()=>null;function i0(n,e,t=!1){return VF(n,e,t)}function o0(n,e){let t=n.contentQueries;if(t!==null){let r=te(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Gy(o),a.contentQueries(2,e[s],s)}}}finally{te(r)}}}function vv(n,e,t){Gy(0);let r=te(null);try{e(n,t)}finally{te(r)}}function s0(n,e,t){if(ky(e)){let r=te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{te(r)}}}var br=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(br||{});var _v=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hy})`}};function a0(n){return n instanceof _v?n.changingThisBreaksApplicationSecurity:n}function c0(n){return n instanceof Function?n():n}function jF(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var u0="ng-template";function UF(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&jF(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Fv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Fv(n){return n.type===4&&n.value!==u0}function BF(n,e,t){let r=n.type===4&&!t?u0:n.value;return e===r}function $F(n,e,t){let r=4,i=n.attrs,o=i!==null?qF(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Mn(r)&&!Mn(c))return!1;if(s&&Mn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!BF(n,c,t)||c===""&&e.length===1){if(Mn(r))return!1;s=!0}}else if(r&8){if(i===null||!UF(n,i,c,t)){if(Mn(r))return!1;s=!0}}else{let l=e[++a],h=HF(c,i,Fv(n),t);if(h===-1){if(Mn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Mn(r))return!1;s=!0}}}}return Mn(r)||s}function Mn(n){return(n&1)===0}function HF(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return GF(e,n)}function zF(n,e,t=!1){for(let r=0;r<e.length;r++)if($F(n,e[r],t))return!0;return!1}function qF(n){for(let e=0;e<n.length;e++){let t=n[e];if(vF(t))return e}return n.length}function GF(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function uS(n,e){return n?":not("+e.trim()+")":e}function WF(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Mn(s)&&(e+=uS(o,i),i=""),r=s,o=o||!Mn(r);t++}return i!==""&&(e+=uS(o,i)),e}function KF(n){return n.map(WF).join(",")}function QF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Mn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Sr={};function YF(n,e){return n.createText(e)}function ZF(n,e,t){n.setValue(e,t)}function l0(n,e,t){return n.createElement(e,t)}function kh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function d0(n,e,t){n.appendChild(e,t)}function lS(n,e,t,r,i){r!==null?kh(n,e,t,r,i):d0(n,e,t)}function JF(n,e,t){n.removeChild(null,e,t)}function XF(n,e,t){n.setAttribute(e,"style",t)}function eL(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function h0(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&yF(n,e,r),i!==null&&eL(n,e,i),o!==null&&XF(n,e,o)}function Lv(n,e,t,r,i,o,s,a,c,l,h){let p=Bt+r,g=p+i,y=tL(p,g),C=typeof l=="function"?l():l;return y[ue]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:C,incompleteFirstPass:!1,ssrId:h}}function tL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Sr);return t}function nL(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Lv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Vv(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[An]=i,p[J]=r|4|128|8|64|1024,(l!==null||n&&n[J]&2048)&&(p[J]|=2048),Vy(p),p[ht]=p[so]=n,p[Dt]=t,p[Dr]=s||n&&n[Dr],p[He]=a||n&&n[He],p[oo]=c||n&&n[oo]||null,p[fn]=o,p[Hc]=MF(),p[$c]=h,p[xy]=l,p[pn]=e.type==2?n[pn]:p,p}function rL(n,e,t){let r=Nn(e,n),i=nL(t),o=n[Dr].rendererFactory,s=jv(n,Vv(n,i,null,f0(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function f0(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function p0(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function jv(n,e){return n[js]?n[Py][hn]=e:n[js]=e,n[Py]=e,e}function ze(n=1){g0(xt(),Ce(),fo()+n,!1)}function g0(n,e,t,r){if(!r)if((e[J]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Th(e,o,t)}else{let o=n.preOrderHooks;o!==null&&bh(e,o,0,t)}ci(t)}var Wh=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Wh||{});function Ev(n,e,t,r){let i=te(null);try{let[o,s,a]=n.inputs[t],c=null;(s&Wh.SignalBased)!==0&&(c=e[o][wt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):OS(e,c,o,r)}finally{te(i)}}function m0(n,e,t,r,i){let o=fo(),s=r&2;try{ci(-1),s&&e.length>Bt&&g0(n,e,Bt,!1),Re(s?2:0,i,t),t(r,i)}finally{ci(o),Re(s?3:1,i,t)}}function Uv(n,e,t){lL(n,e,t),(t.flags&64)===64&&dL(n,e,t)}function y0(n,e,t=Nn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function iL(n,e,t,r){let o=r.get(r0,n0)||t===br.ShadowDom,s=n.selectRootElement(e,o);return oL(s),s}function oL(n){sL(n)}var sL=()=>null;function aL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function v0(n,e,t,r,i,o){let s=e[ue];if(Bv(n,s,e,t,r)){ai(n)&&uL(e,n.index);return}cL(n,e,t,r,i,o)}function cL(n,e,t,r,i,o){if(n.type&3){let s=Nn(n,e);t=aL(t),r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function uL(n,e){let t=mn(e,n);t[J]&16||(t[J]|=64)}function lL(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ai(t)&&rL(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ph(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=xh(e,n,s,t);if(ou(c,e),o!==null&&gL(e,s-r,c,a,t,o),Gn(a)){let l=mn(t.index,e);l[Dt]=xh(e,n,s,t)}}}function dL(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Kb();try{ci(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];yh(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&hL(c,l)}}finally{ci(-1),yh(s)}}function hL(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function _0(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];zF(e,o.selectors,!1)&&(r??=[],Gn(o)?r.unshift(o):r.push(o))}return r}function fL(n,e,t,r,i,o){let s=Nn(n,e);pL(e[He],s,o,n.value,t,r,i)}function pL(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?ah(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function gL(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Ev(r,t,c,l)}}function mL(n,e){let t=n[oo];if(!t)return;t.get(Ht,null)?.(e)}function Bv(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],h=s[c+1],p=e.data[l];Ev(p,t[l],h,i),a=!0}if(o)for(let c of o){let l=t[c],h=e.data[c];Ev(h,l,r,i),a=!0}return a}function yL(n,e){let t=mn(e,n),r=t[ue];vL(r,t);let i=t[An];i!==null&&t[$c]===null&&(t[$c]=i0(i,t[oo])),Re(18),$v(r,t,t[Dt]),Re(19,t[Dt])}function vL(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function $v(n,e,t){vh(e);try{let r=n.viewQuery;r!==null&&vv(1,r,t);let i=n.template;i!==null&&m0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[uo]?.finishViewCreation(n),n.staticContentQueries&&o0(n,e),n.staticViewQueries&&vv(2,n.viewQuery,t);let o=n.components;o!==null&&_L(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[J]&=-5,_h()}}function _L(n,e){for(let t=0;t<e.length;t++)yL(n,e[t])}function EL(n,e,t,r){let i=te(null);try{let o=e.tView,a=n[J]&4096?4096:16,c=Vv(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[ao]=l;let h=n[uo];return h!==null&&(c[uo]=h.createEmbeddedView(o)),$v(o,c,t),c}finally{te(i)}}function dS(n,e){return!e||e.firstChild===null||YS(n)}var hS=!1,IL=new H(""),wL;function Hv(n,e){return wL(n,e)}var Zn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Zn||{});function zv(n){return(n.flags&32)===32}function Hs(n,e,t,r,i){if(r!=null){let o,s=!1;Rn(r)?o=r:qn(r)&&(s=!0,r=r[An]);let a=gn(r);n===0&&t!==null?i==null?d0(e,t,a):kh(e,t,a,i||null,!0):n===1&&t!==null?kh(e,t,a,i||null,!0):n===2?JF(e,a,s):n===3&&e.destroyNode(a),o!=null&&kL(e,n,o,t,i)}}function DL(n,e){E0(n,e),e[An]=null,e[fn]=null}function CL(n,e,t,r,i,o){r[An]=i,r[fn]=e,Kh(n,r,t,1,i,o)}function E0(n,e){e[Dr].changeDetectionScheduler?.notify(9),Kh(n,e,e[He],2,null,null)}function TL(n){let e=n[js];if(!e)return iv(n[ue],n);for(;e;){let t=null;if(qn(e))t=e[js];else{let r=e[$t];r&&(t=r)}if(!t){for(;e&&!e[hn]&&e!==n;)qn(e)&&iv(e[ue],e),e=e[ht];e===null&&(e=n),qn(e)&&iv(e[ue],e),t=e&&e[hn]}e=t}}function qv(n,e){let t=n[qc],r=t.indexOf(e);t.splice(r,1)}function I0(n,e){if(lo(e))return;let t=e[He];t.destroyNode&&Kh(n,e,t,3,null,null),TL(e)}function iv(n,e){if(lo(e))return;let t=te(null);try{e[J]&=-129,e[J]|=256,e[Jt]&&Es(e[Jt]),SL(n,e),bL(n,e),e[ue].type===1&&e[He].destroy();let r=e[ao];if(r!==null&&Rn(e[ht])){r!==e[ht]&&qv(r,e);let i=e[uo];i!==null&&i.detachView(n)}mv(e)}finally{te(t)}}function bL(n,e){let t=n.cleanup,r=e[Vs];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Vs]=null);let i=e[_r];if(i!==null){e[_r]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Cr];if(o!==null){e[Cr]=null;for(let s of o)s.destroy()}}function SL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof vo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Re(4,a,c);try{c.call(a)}finally{Re(5,a,c)}}else{Re(4,i,o);try{o.call(i)}finally{Re(5,i,o)}}}}}function AL(n,e,t){return RL(n,e.parent,t)}function RL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[An];if(ai(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===br.None||i===br.Emulated)return null}return Nn(r,t)}function NL(n,e,t){return PL(n,e,t)}function ML(n,e,t){return n.type&40?Nn(n,t):null}var PL=ML,fS;function Gv(n,e,t,r){let i=AL(n,r,e),o=e[He],s=r.parent||e[fn],a=NL(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)lS(o,i,t[c],a,!1);else lS(o,i,t,a,!1);fS!==void 0&&fS(o,r,e,t,i)}function Xc(n,e){if(e!==null){let t=e.type;if(t&3)return Nn(e,n);if(t&4)return Iv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Xc(n,r);{let i=n[e.index];return Rn(i)?Iv(-1,i):gn(i)}}else{if(t&128)return Xc(n,e.next);if(t&32)return Hv(e,n)()||gn(n[e.index]);{let r=w0(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ri(n[pn]);return Xc(i,r)}else return Xc(n,e.next)}}}return null}function w0(n,e){if(e!==null){let r=n[pn][fn],i=e.projection;return r.projection[i]}return null}function Iv(n,e){let t=$t+n+1;if(t<e.length){let r=e[t],i=r[ue].firstChild;if(i!==null)return Xc(r,i)}return e[si]}function Wv(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&ou(gn(a),r),t.flags|=2),!zv(t))if(c&8)Wv(n,e,t.child,r,i,o,!1),Hs(e,n,i,a,o);else if(c&32){let l=Hv(t,r),h;for(;h=l();)Hs(e,n,i,h,o);Hs(e,n,i,a,o)}else c&16?xL(n,e,r,t,i,o):Hs(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Kh(n,e,t,r,i,o){Wv(t,r,n.firstChild,e,i,o,!1)}function xL(n,e,t,r,i,o){let s=t[pn],c=s[fn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Hs(e,n,i,h,o)}else{let l=c,h=s[ht];YS(r)&&(l.flags|=128),Wv(n,e,l,h,i,o,!0)}}function kL(n,e,t,r,i){let o=t[si],s=gn(t);o!==s&&Hs(e,n,r,o,i);for(let a=$t;a<t.length;a++){let c=t[a];Kh(c[ue],c,n,e,r,o)}}function OL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Zn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Zn.Important),n.setStyle(t,r,i,o))}}function nu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(gn(o)),Rn(o)&&D0(o,r);let s=t.type;if(s&8)nu(n,e,t.child,r);else if(s&32){let a=Hv(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=w0(e,t);if(Array.isArray(a))r.push(...a);else{let c=ri(e[pn]);nu(c[ue],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function D0(n,e){for(let t=$t;t<n.length;t++){let r=n[t],i=r[ue].firstChild;i!==null&&nu(r[ue],r,i,e)}n[si]!==n[An]&&e.push(n[si])}function C0(n){if(n[hh]!==null){for(let e of n[hh])e.impl.addSequence(e);n[hh].length=0}}var T0=[];function FL(n){return n[Jt]??LL(n)}function LL(n){let e=T0.pop()??Object.create(jL);return e.lView=n,e}function VL(n){n.lView[Jt]!==n&&(n.lView=null,T0.push(n))}var jL=K(O({},Qr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ho(n.lView)},consumerOnSignalRead(){this.lView[Jt]=this}});function UL(n){let e=n[Jt]??Object.create(BL);return e.lView=n,e}var BL=K(O({},Qr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ri(n.lView);for(;e&&!b0(e[ue]);)e=ri(e);e&&jy(e)},consumerOnSignalRead(){this.lView[Jt]=this}});function b0(n){return n.type!==2}function S0(n){if(n[Cr]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Cr])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[J]&8192)}}var $L=100;function Kv(n,e=0){let r=n[Dr].rendererFactory,i=!1;i||r.begin?.();try{HL(n,e)}finally{i||r.end?.()}}function HL(n,e){let t=qy();try{$s(!0),wv(n,e);let r=0;for(;Wc(n);){if(r===$L)throw new j(103,!1);r++,wv(n,1)}}finally{$s(t)}}function A0(n,e){zy(e?Kc.Exhaustive:Kc.OnlyDirtyViews);try{Kv(n)}finally{zy(Kc.Off)}}function zL(n,e,t,r){if(lo(e))return;let i=e[J],o=!1,s=!1;vh(e);let a=!0,c=null,l=null;o||(b0(n)?(l=FL(e),c=Yr(l)):Cd()===null?(a=!1,l=UL(e),c=Yr(l)):e[Jt]&&(Es(e[Jt]),e[Jt]=null));try{Vy(e),zb(n.bindingStartIndex),t!==null&&m0(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Th(e,y,null)}else{let y=n.preOrderHooks;y!==null&&bh(e,y,0,null),nv(e,0)}if(s||qL(e),S0(e),R0(e,0),n.contentQueries!==null&&o0(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Th(e,y)}else{let y=n.contentHooks;y!==null&&bh(e,y,1),nv(e,1)}WL(n,e);let p=n.components;p!==null&&M0(e,p,0);let g=n.viewQuery;if(g!==null&&vv(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Th(e,y)}else{let y=n.viewHooks;y!==null&&bh(e,y,2),nv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[dh]){for(let y of e[dh])y();e[dh]=null}o||(C0(e),e[J]&=-73)}catch(h){throw o||ho(e),h}finally{l!==null&&(Ki(l,c),a&&VL(l)),_h()}}function R0(n,e){for(let t=JS(n);t!==null;t=XS(t))for(let r=$t;r<t.length;r++){let i=t[r];N0(i,e)}}function qL(n){for(let e=JS(n);e!==null;e=XS(e)){if(!(e[J]&2))continue;let t=e[qc];for(let r=0;r<t.length;r++){let i=t[r];jy(i)}}}function GL(n,e,t){Re(18);let r=mn(e,n);N0(r,t),Re(19,r[Dt])}function N0(n,e){gh(n)&&wv(n,e)}function wv(n,e){let r=n[ue],i=n[J],o=n[Jt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&_s(o)),s||=!1,o&&(o.dirty=!1),n[J]&=-9217,s)zL(r,n,r.template,n[Dt]);else if(i&8192){let a=te(null);try{S0(n),R0(n,1);let c=r.components;c!==null&&M0(n,c,1),C0(n)}finally{te(a)}}}function M0(n,e,t){for(let r=0;r<e.length;r++)GL(n,e[r],t)}function WL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ci(~i);else{let o=i,s=t[++r],a=t[++r];Wb(s,o);let c=e[o];Re(24,c),a(2,c),Re(25,c)}}}finally{ci(-1)}}function Qv(n,e){let t=qy()?64:1088;for(n[Dr].changeDetectionScheduler?.notify(e);n;){n[J]|=t;let r=ri(n);if(Us(n)&&!r)return n;n=r}return null}function P0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function KL(n,e,t,r=!0){let i=e[ue];if(QL(i,e,n,t),r){let s=Iv(t,n),a=e[He],c=a.parentNode(n[si]);c!==null&&CL(i,n[fn],a,e,c,s)}let o=e[$c];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Dv(n,e){if(n.length<=$t)return;let t=$t+e,r=n[t];if(r){let i=r[ao];i!==null&&i!==n&&qv(i,r),e>0&&(n[t-1][hn]=r[hn]);let o=jc(n,$t+e);DL(r[ue],r);let s=o[uo];s!==null&&s.detachView(o[ue]),r[ht]=null,r[hn]=null,r[J]&=-129}return r}function QL(n,e,t,r){let i=$t+r,o=t.length;r>0&&(t[i-1][hn]=e),r<o-$t?(e[hn]=t[i],Cy(t,$t+r,e)):(t.push(e),e[hn]=null),e[ht]=t;let s=e[ao];s!==null&&t!==s&&x0(s,e);let a=e[uo];a!==null&&a.insertView(n),mh(e),e[J]|=128}function x0(n,e){let t=n[qc],r=e[ht];if(qn(r))n[J]|=2;else{let i=r[ht][pn];e[pn]!==i&&(n[J]|=2)}t===null?n[qc]=[e]:t.push(e)}var ui=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ue];return nu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Dt]}set context(e){this._lView[Dt]=e}get destroyed(){return lo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ht];if(Rn(e)){let t=e[zc],r=t?t.indexOf(this):-1;r>-1&&(Dv(e,r),jc(t,r))}this._attachedToViewContainer=!1}I0(this._lView[ue],this._lView)}onDestroy(e){Uy(this._lView,e)}markForCheck(){Qv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){mh(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,Kv(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[oo].get(IL,hS)}catch{this.exhaustive=hS}}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Us(this._lView),t=this._lView[ao];t!==null&&!e&&qv(t,this._lView),E0(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=Us(this._lView),r=this._lView[ao];r!==null&&!t&&x0(r,this._lView),mh(this._lView)}};var su=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=YL;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=EL(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ui(o)}}return n})();function YL(){return k0(kt(),Ce())}function k0(n,e){return n.type&4?new su(e,n,Hh(n,e)):null}function Yv(n,e,t,r,i){let o=n.data[e];if(o===null)o=ZL(n,e,t,r,i),Gb()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Ub();o.injectorIndex=s===null?-1:s.injectorIndex}return Bs(o,!0),o}function ZL(n,e,t,r,i){let o=$y(),s=Hy(),a=s?o:o&&o.parent,c=n.data[e]=XL(n,a,t,e,r,i);return JL(n,c,o,s),c}function JL(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function XL(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Lb()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var KQ=new RegExp(`^(\\d+)*(${OF}|${kF})*(.*)`);var eV=()=>null;function pS(n,e){return eV(n,e)}var O0=class{},Qh=class{},Cv=class{resolveComponentFactory(e){throw new j(917,!1)}},au=class{static NULL=new Cv},_o=class{},cu=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>tV()}return n})();function tV(){let n=Ce(),e=kt(),t=mn(e.index,n);return(qn(t)?t:n)[He]}var F0=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>null})}return n})();var Sh={},Tv=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Sh,r);return i!==Sh||t===Sh?i:this.parentInjector.get(e,t,r)}};function gS(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=fy(i,a);else if(o==2){let c=a,l=e[++s];r=fy(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function le(n,e=0){let t=Ce();if(t===null)return re(n,e);let r=kt();return WS(r,t,dt(n),e)}function L0(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,c,l]=h.resolveHostDirectives(s);break}iV(n,e,t,a,o,c,l)}o!==null&&r!==null&&nV(t,r,o)}function nV(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function rV(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function iV(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let y=r[g];!c&&Gn(y)&&(c=!0,rV(n,t,g)),pv(Ph(t,e),n,y.type)}lV(t,n.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=p0(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=tu(t.mergedAttrs,y.hostAttrs),sV(n,t,e,p,y),uV(p,y,i),s!==null&&s.has(y)){let[M,N]=s.get(y);t.directiveToIndex.set(y.type,[p,M+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}oV(n,t,o)}function oV(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))mS(0,e,i,r),mS(1,e,i,r),vS(e,r,!1);else{let o=t.get(i);yS(0,e,o,r),yS(1,e,o,r),vS(e,r,!0)}}}function mS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),V0(e,o)}}function yS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),V0(e,s)}}function V0(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function vS(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Fv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let h of l)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function sV(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ni(i.type,!0)),s=new vo(o,Gn(i),le);n.blueprint[r]=s,t[r]=s,aV(n,e,r,p0(n,t,i.hostVars,Sr),i)}function aV(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;cV(s)!=a&&s.push(a),s.push(t,r,o)}}function cV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function uV(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Gn(e)&&(t[""]=n)}}function lV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function j0(n,e,t,r,i,o,s,a){let c=e.consts,l=Gc(c,s),h=Yv(e,n,2,r,l);return o&&L0(e,t,h,Gc(c,a),i),h.mergedAttrs=tu(h.mergedAttrs,h.attrs),h.attrs!==null&&gS(h,h.attrs,!1),h.mergedAttrs!==null&&gS(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function U0(n,e){jS(n,e),ky(e)&&n.queries.elementEnd(e)}function Zv(n){return $0(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function B0(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function $0(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function dV(n,e,t){return n[e]=t}function Eo(n,e,t){if(t===Sr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function hV(n,e,t,r){let i=Eo(n,e,t);return Eo(n,e+1,r)||i}function ov(n,e,t){return function r(i){let o=ai(n)?mn(n.index,e):e;Qv(o,5);let s=e[Dt],a=_S(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=_S(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function _S(n,e,t,r){let i=te(null);try{return Re(6,e,t),t(r)!==!1}catch(o){return mL(n,o),!1}finally{Re(7,e,t),te(i)}}function fV(n,e,t,r,i,o,s,a){let c=fh(n),l=!1,h=null;if(!r&&c&&(h=pV(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Nn(n,t),g=r?r(p):p;LF(t,g,o,a);let y=i.listen(g,o,a),C=r?M=>r(gn(M[n.index])):n.index;H0(C,e,t,o,a,y,!1)}return l}function pV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Vs],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function H0(n,e,t,r,i,o,s){let a=e.firstCreatePass?xb(e):null,c=Pb(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function ES(n,e,t,r,i,o){let s=e[t],a=e[ue],l=a.data[t].outputs[r],p=s[l].subscribe(o);H0(n.index,a,e,i,o,p,!0)}var bv=Symbol("BINDING");var Oh=class extends au{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=oi(e);return new qs(t,this.ngModule)}};function gV(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Wh.SignalBased)!==0};return i&&(o.transform=i),o})}function mV(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function yV(n,e,t){let r=e instanceof nt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Tv(t,r):t}function vV(n){let e=n.get(_o,null);if(e===null)throw new j(407,!1);let t=n.get(F0,null),r=n.get(zn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function _V(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return l0(e,t,t==="svg"?Sb:t==="math"?Ab:null)}var qs=class extends Qh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=gV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=mV(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=KF(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Re(22);let a=te(null);try{let c=this.componentDef,l=EV(r,c,s,o),h=yV(c,i||this.ngModule,e),p=vV(h),g=p.rendererFactory.createRenderer(null,c),y=r?iL(g,r,c.encapsulation,h):_V(c,g),C=s?.some(IS)||o?.some(F=>typeof F!="function"&&F.bindings.some(IS)),M=Vv(null,l,null,512|f0(c),null,null,p,g,h,null,i0(y,h,!0));M[Bt]=y,vh(M);let N=null;try{let F=j0(Bt,l,M,"#host",()=>l.directiveRegistry,!0,0);y&&(h0(g,y,F),ou(y,M)),Uv(l,M,F),s0(l,F,M),U0(l,F),t!==void 0&&wV(F,this.ngContentSelectors,t),N=mn(F.index,M),M[Dt]=N[Dt],$v(l,M,null)}catch(F){throw N!==null&&mv(N),mv(M),F}finally{Re(23),_h()}return new Fh(this.componentType,M,!!C)}finally{te(a)}}};function EV(n,e,t,r){let i=n?["ng-version","20.0.5"]:QF(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[bv].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[bv].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=Ay(p);c.push(g)}return Lv(0,null,IV(o,s),1,a,c,null,null,null,[i],null)}function IV(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function IS(n){let e=n[bv].kind;return e==="input"||e==="twoWay"}var Fh=class extends O0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=ph(t[ue],Bt),this.location=Hh(this._tNode,t),this.instance=mn(this._tNode.index,t)[Dt],this.hostView=this.changeDetectorRef=new ui(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Bv(r,i[ue],i,e,t);this.previousInputValues.set(e,t);let s=mn(r.index,i);Qv(s,1)}get injector(){return new yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function wV(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var To=(()=>{class n{static __NG_ELEMENT_ID__=DV}return n})();function DV(){let n=kt();return TV(n,Ce())}var CV=To,z0=class extends CV{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Hh(this._hostTNode,this._hostLView)}get injector(){return new yo(this._hostTNode,this._hostLView)}get parentInjector(){let e=xv(this._hostTNode,this._hostLView);if(BS(e)){let t=Nh(e,this._hostLView),r=Rh(e),i=t[ue].data[r+8];return new yo(i,t)}else return new yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=wS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-$t}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=pS(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,dS(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!uF(e),l;if(c)l=t;else{let N=t||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,a=N.bindings}let h=c?e:new qs(oi(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let F=(c?p:this.parentInjector).get(nt,null);F&&(o=F)}let g=oi(h.componentType??{}),y=pS(this._lContainer,g?.id??null),C=y?.firstChild??null,M=h.create(p,i,C,o,s,a);return this.insertImpl(M.hostView,l,dS(this._hostTNode,y)),M}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Rb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[ht],l=new z0(c,c[fn],c[ht]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return KL(s,i,o,r),e.attachToViewContainerRef(),Cy(sv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=wS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Dv(this._lContainer,t);r&&(jc(sv(this._lContainer),t),I0(r[ue],r))}detach(e){let t=this._adjustIndex(e,-1),r=Dv(this._lContainer,t);return r&&jc(sv(this._lContainer),t)!=null?new ui(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function wS(n){return n[zc]}function sv(n){return n[zc]||(n[zc]=[])}function TV(n,e){let t,r=e[n.index];return Rn(r)?t=r:(t=P0(r,e,null,n),e[n.index]=t,jv(e,t)),SV(t,e,n,r),new z0(t,n,e)}function bV(n,e){let t=n[He],r=t.createComment(""),i=Nn(e,n),o=t.parentNode(i);return kh(t,o,r,t.nextSibling(i),!1),r}var SV=NV,AV=()=>!1;function RV(n,e,t){return AV(n,e,t)}function NV(n,e,t,r){if(n[si])return;let i;t.type&8?i=gn(r):i=bV(e,t),n[si]=i}var DS=new Set;function Yh(n){DS.has(n)||(DS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Io=class{},Zh=class{};var Lh=class extends Io{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Oh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Sy(e);this._bootstrapComponents=c0(o.bootstrap),this._r3Injector=Qy(e,t,[{provide:Io,useValue:this},{provide:au,useValue:this.componentFactoryResolver},...r],Ut(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Vh=class extends Zh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Lh(this.moduleType,e,[])}};var ru=class extends Io{injector;componentFactoryResolver=new Oh(this);instance=null;constructor(e){super();let t=new no([...e.providers,{provide:Io,useValue:this},{provide:au,useValue:this.componentFactoryResolver}],e.parent||Bc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function uu(n,e,t=null){return new ru({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var MV=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Ry(!1,t.type),i=r.length>0?uu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(re(nt))})}return n})();function Xt(n){return Ws(()=>{let e=q0(n),t=K(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===kv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(MV).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||br.Emulated,styles:n.styles||Yt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Yh("NgStandalone"),G0(t);let r=n.dependencies;return t.directiveDefs=CS(r,!1),t.pipeDefs=CS(r,!0),t.id=FV(t),t})}function PV(n){return oi(n)||Ay(n)}function xV(n){return n!==null}function di(n){return Ws(()=>({type:n.type,bootstrap:n.bootstrap||Yt,declarations:n.declarations||Yt,imports:n.imports||Yt,exports:n.exports||Yt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function kV(n,e){if(n==null)return ii;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Wh.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function OV(n){if(n==null)return ii;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function pt(n){return Ws(()=>{let e=q0(n);return G0(e),e})}function Jv(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function q0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ii,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Yt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:kV(n.inputs,e),outputs:OV(n.outputs),debugInfo:null}}function G0(n){n.features?.forEach(e=>e(n))}function CS(n,e){if(!n)return null;let t=e?_b:PV;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(xV)}function FV(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function LV(n){return Object.getPrototypeOf(n.prototype).constructor}function Jn(n){let e=LV(n.type),t=!0,r=[n];for(;e;){let i;if(Gn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=av(n.inputs),s.declaredInputs=av(n.declaredInputs),s.outputs=av(n.outputs);let a=i.hostBindings;a&&$V(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&UV(n,c),l&&BV(n,l),VV(n,i),fb(n.outputs,i.outputs),Gn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Jn&&(t=!1)}}e=Object.getPrototypeOf(e)}jV(r)}function VV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function jV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=tu(i.hostAttrs,t=tu(t,i.hostAttrs))}}function av(n){return n===ii?{}:n===Yt?[]:n}function UV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function BV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function $V(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function HV(n,e,t,r,i,o,s,a,c){let l=e.consts,h=Yv(e,n,4,s||null,a||null);By()&&L0(e,t,h,Gc(l,c),_0),h.mergedAttrs=tu(h.mergedAttrs,h.attrs),jS(e,h);let p=h.tView=Lv(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function zV(n,e,t,r,i,o,s,a,c,l,h){let p=t+Bt,g=e.firstCreatePass?HV(p,e,n,r,i,o,s,a,l):e.data[p];c&&(g.flags|=c),Bs(g,!1);let y=qV(e,n,g,t);Ih()&&Gv(e,n,y,g),ou(y,n);let C=P0(y,n,y,g);return n[p]=C,jv(n,C),RV(C,g,n),fh(g)&&Uv(e,n,g),l!=null&&y0(n,g,h),g}function Ar(n,e,t,r,i,o,s,a){let c=Ce(),l=xt(),h=Gc(l.consts,o);return zV(c,l,n,e,t,r,i,h,void 0,s,a),Ar}var qV=GV;function GV(n,e,t,r){return wh(!0),e[He].createComment("")}var Xv=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Xv||{}),lu=new H(""),W0=!1,Sv=class extends et{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Tb()&&(this.destroyRef=P(Qn,{optional:!0})??void 0,this.pendingTasks=P(Tr,{optional:!0})??void 0)}emit(e){let t=te(null);try{super.next(e)}finally{te(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof je&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},we=Sv;function K0(n){let e,t;function r(){n=go;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function TS(n){return queueMicrotask(()=>n()),()=>{n=go}}var e_="isAngularZone",jh=e_+"_ID",WV=0,De=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new we(!1);onMicrotaskEmpty=new we(!1);onStable=new we(!1);onError=new we(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=W0}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,YV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(e_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,KV,go,go);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},KV={};function t_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function QV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){K0(()=>{n.callbackScheduled=!1,Av(n),n.isCheckStableRunning=!0,t_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Av(n)}function YV(n){let e=()=>{QV(n)},t=WV++;n._inner=n._inner.fork({name:"angular",properties:{[e_]:!0,[jh]:t,[jh+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(ZV(c))return r.invokeTask(o,s,a,c);try{return bS(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),SS(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return bS(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!JV(c)&&e(),SS(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Av(n),t_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Av(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function bS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function SS(n){n._nesting--,t_(n)}var Uh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new we;onMicrotaskEmpty=new we;onStable=new we;onError=new we;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function ZV(n){return Q0(n,"__ignore_ng_zone__")}function JV(n){return Q0(n,"__scheduler_tick__")}function Q0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Y0=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})();var n_=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var r_=new H("");function hi(n){return!!n&&typeof n.then=="function"}function i_(n){return!!n&&typeof n.subscribe=="function"}var Z0=new H("");var o_=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=P(Z0,{optional:!0})??[];injector=P($e);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=ft(this.injector,i);if(hi(o))t.push(o);else if(i_(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jh=new H("");function J0(){km(()=>{let n="";throw new j(600,n)})}function X0(n){return n.isBoundToModule}var XV=10;var bo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(Ht);afterRenderManager=P(Y0);zonelessEnabled=P(Yc);rootEffectScheduler=P(Jc);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new et;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(Tr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(fe(t=>!t))}constructor(){P(lu,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=P(nt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=$e.NULL){return this._injector.get(De).run(()=>{Re(10);let s=t instanceof Qh;if(!this._injector.get(o_).done){let C="";throw new j(405,C)}let c;s?c=t:c=this._injector.get(au).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=X0(c)?void 0:this._injector.get(Io),h=r||c.selector,p=c.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(r_,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),eu(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Re(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Re(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Xv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let t=te(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,te(t),this.afterTick.next(),Re(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(_o,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<XV;)Re(14),this.synchronizeOnce(),Re(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Wc(i))continue;let o=r&&!this.zonelessEnabled?0:1;Kv(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Wc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;eu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Jh,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>eu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Xh(n,e,t,r){let i=Ce(),o=Qc();if(Eo(i,o,e)){let s=xt(),a=Eh();fL(a,i,n,e,t,r)}return Xh}function en(n,e,t){let r=Ce(),i=Qc();if(Eo(r,i,e)){let o=xt(),s=Eh();v0(s,r,n,e,r[He],t)}return en}function AS(n,e,t,r,i){Bv(e,n,t,i?"class":"style",r)}function pe(n,e,t,r){let i=Ce(),o=xt(),s=Bt+n,a=i[He],c=o.firstCreatePass?j0(s,o,i,e,_0,By(),t,r):o.data[s],l=e2(o,i,c,a,e,n);i[s]=l;let h=fh(c);return Bs(c,!0),h0(a,l,c),!zv(c)&&Ih()&&Gv(o,i,l,c),(kb()===0||h)&&ou(l,i),Ob(),h&&(Uv(o,i,c),s0(o,c,i)),r!==null&&y0(i,c),pe}function ge(){let n=kt();Hy()?Bb():(n=n.parent,Bs(n,!1));let e=n;Vb(e)&&jb(),Fb();let t=xt();return t.firstCreatePass&&U0(t,e),e.classesWithoutHost!=null&&gF(e)&&AS(t,e,Ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&mF(e)&&AS(t,e,Ce(),e.stylesWithoutHost,!1),ge}function Qs(n,e,t,r){return pe(n,e,t,r),ge(),Qs}var e2=(n,e,t,r,i,o)=>(wh(!0),l0(r,i,eS()));function Ys(){return Ce()}var mo=void 0;function t2(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var n2=["en",[["a","p"],["AM","PM"],mo],[["AM","PM"],mo,mo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",mo,"{1} 'at' {0}",mo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",t2],cv={};function tn(n){let e=r2(n),t=RS(e);if(t)return t;let r=e.split("-")[0];if(t=RS(r),t)return t;if(r==="en")return n2;throw new j(701,!1)}function RS(n){return n in cv||(cv[n]=ro.ng&&ro.ng.common&&ro.ng.common.locales&&ro.ng.common.locales[n]),cv[n]}var qe=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(qe||{});function r2(n){return n.toLowerCase().replace(/_/g,"-")}var du="en-US";var i2=du;function eA(n){typeof n=="string"&&(i2=n.toLowerCase().replace(/_/g,"-"))}function Ge(n,e,t){let r=Ce(),i=xt(),o=kt();return tA(i,r,r[He],o,n,e,t),Ge}function tA(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=ov(r,e,o),fV(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];c??=ov(r,e,o),ES(r,e,g,y,i,c)}if(l&&l.length)for(let p of l)c??=ov(r,e,o),ES(r,e,p,i,i,c)}}function yn(n=1){return Xb(n)}function s_(n){let e=$b();return Fy(e,Bt+n)}function Ch(n,e){return n<<17|e<<2}function wo(n){return n>>17&32767}function o2(n){return(n&2)==2}function s2(n,e){return n&131071|e<<17}function Rv(n){return n|2}function Gs(n){return(n&131068)>>2}function uv(n,e){return n&-131069|e<<2}function a2(n){return(n&1)===1}function Nv(n){return n|1}function c2(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=wo(s),c=Gs(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ls(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let g=wo(n[a+1]);n[r+1]=Ch(g,a),g!==0&&(n[g+1]=uv(n[g+1],r)),n[a+1]=s2(n[a+1],r)}else n[r+1]=Ch(a,0),a!==0&&(n[a+1]=uv(n[a+1],r)),a=r;else n[r+1]=Ch(c,0),a===0?a=r:n[c+1]=uv(n[c+1],r),c=r;l&&(n[r+1]=Rv(n[r+1])),NS(n,h,r,!0),NS(n,h,r,!1),u2(e,h,n,r,o),s=Ch(a,c),o?e.classBindings=s:e.styleBindings=s}function u2(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ls(o,e)>=0&&(t[r+1]=Nv(t[r+1]))}function NS(n,e,t,r){let i=n[t+1],o=e===null,s=r?wo(i):Gs(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];l2(c,e)&&(a=!0,n[s+1]=r?Nv(l):Rv(l)),s=r?wo(l):Gs(l)}a&&(n[t+1]=r?Rv(i):Nv(i))}function l2(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ls(n,e)>=0:!1}function So(n,e){return d2(n,e,null,!0),So}function d2(n,e,t,r){let i=Ce(),o=xt(),s=qb(2);if(o.firstUpdatePass&&f2(o,n,s,r),e!==Sr&&Eo(i,s,e)){let a=o.data[fo()];v2(o,a,i,i[He],n,i[s+1]=_2(e,t),r,s)}}function h2(n,e){return e>=n.expandoStartIndex}function f2(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[fo()],s=h2(n,t);E2(o,r)&&e===null&&!s&&(e=!1),e=p2(i,o,e,r),c2(i,o,e,t,s,r)}}function p2(n,e,t,r){let i=Qb(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=lv(null,n,e,t,r),t=iu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=lv(i,n,e,t,r),o===null){let c=g2(n,e,r);c!==void 0&&Array.isArray(c)&&(c=lv(null,n,e,c[1],r),c=iu(c,e.attrs,r),m2(n,e,r,c))}else o=y2(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function g2(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Gs(r)!==0)return n[wo(r)]}function m2(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[wo(i)]=r}function y2(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=iu(r,s,t)}return iu(r,e.attrs,t)}function lv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=iu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function iu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),vb(n,s,t?!0:e[++o]))}return n===void 0?null:n}function v2(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=a2(l)?MS(c,e,t,i,Gs(l),s):void 0;if(!Bh(h)){Bh(o)||o2(l)&&(o=MS(c,null,t,i,a,s));let p=Oy(fo(),t);OL(r,s,p,i,o)}}function MS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,g=t[i+1];g===Sr&&(g=p?Yt:void 0);let y=p?lh(g,r):h===r?g:void 0;if(l&&!Bh(y)&&(y=lh(c,r)),Bh(y)&&(a=y,s))return a;let C=n[i+1];i=s?wo(C):Gs(C)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=lh(c,r))}return a}function Bh(n){return n!==void 0}function _2(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ut(a0(n)))),n}function E2(n,e){return(n.flags&(e?8:16))!==0}function Me(n,e=""){let t=Ce(),r=xt(),i=n+Bt,o=r.firstCreatePass?Yv(r,i,1,e,null):r.data[i],s=I2(r,t,o,e,n);t[i]=s,Ih()&&Gv(r,t,s,o),Bs(o,!1)}var I2=(n,e,t,r,i)=>(wh(!0),YF(e[He],r));function w2(n,e,t,r=""){return Eo(n,Qc(),t)?e+ah(t)+r:Sr}function Ao(n){return Ro("",n),Ao}function Ro(n,e,t){let r=Ce(),i=w2(r,n,e,t);return i!==Sr&&D2(r,fo(),i),Ro}function D2(n,e,t){let r=Oy(e,n);ZF(n[He],r,t)}function hu(n,e,t){Xy(e)&&(e=e());let r=Ce(),i=Qc();if(Eo(r,i,e)){let o=xt(),s=Eh();v0(s,r,n,e,r[He],t)}return hu}function ef(n,e){let t=Xy(n);return t&&n.set(e),t}function fu(n,e){let t=Ce(),r=xt(),i=kt();return tA(r,t,t[He],i,n,e),fu}function C2(n,e,t){let r=xt();if(r.firstCreatePass){let i=Gn(n);Mv(t,r.data,r.blueprint,i,!0),Mv(e,r.data,r.blueprint,i,!1)}}function Mv(n,e,t,r,i){if(n=dt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Mv(n[o],e,t,r,i);else{let o=xt(),s=Ce(),a=kt(),c=to(n)?n:dt(n.provide),l=My(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(to(n)||!n.multi){let y=new vo(l,i,le),C=hv(c,e,i?h:h+g,p);C===-1?(pv(Ph(a,s),o,c),dv(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[C]=y,s[C]=y)}else{let y=hv(c,e,h+g,p),C=hv(c,e,h,h+g),M=y>=0&&t[y],N=C>=0&&t[C];if(i&&!N||!i&&!M){pv(Ph(a,s),o,c);let F=S2(i?b2:T2,t.length,i,r,l);!i&&N&&(t[C].providerFactory=F),dv(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=nA(t[i?C:y],l,!i&&r);dv(o,n,y>-1?y:C,F)}!i&&r&&N&&t[C].componentProviders++}}}function dv(n,e,t,r){let i=to(e),o=Cb(e);if(i||o){let c=(o?dt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function nA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function hv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function T2(n,e,t,r){return Pv(this.multi,[])}function b2(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=xh(t,t[ue],this.providerFactory.index,r);o=a.slice(0,s),Pv(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Pv(i,o);return o}function Pv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function S2(n,e,t,r,i){let o=new vo(n,t,le);return o.multi=[],o.index=e,o.componentProviders=0,nA(o,i,r&&!t),o}function Zs(n,e=[]){return t=>{t.providersResolver=(r,i)=>C2(r,i?i(n):n,e)}}function A2(n,e){let t=n[e];return t===Sr?void 0:t}function R2(n,e,t,r,i,o,s){let a=e+t;return hV(n,a,i,o)?dV(n,a+2,s?r.call(s,i,o):r(i,o)):A2(n,a+2)}function a_(n,e){let t=xt(),r,i=n+Bt;t.firstCreatePass?(r=N2(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ni(r.type,!0)),s,a=Pt(le);try{let c=Mh(!1),l=o();return Mh(c),Ly(t,Ce(),i,l),l}finally{Pt(a)}}function N2(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function c_(n,e,t,r){let i=n+Bt,o=Ce(),s=Fy(o,i);return M2(o,i)?R2(o,Hb(),e,s.transform,t,r,s):s.transform(t,r)}function M2(n,e){return n[ue].data[e].pure}function u_(n,e){return k0(n,e)}var $h=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},l_=(()=>{class n{compileModuleSync(t){return new Vh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Sy(t),o=c0(i.declarations).reduce((s,a)=>{let c=oi(a);return c&&s.push(new qs(c)),s},[]);return new $h(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var P2=(()=>{class n{zone=P(De);changeDetectionScheduler=P(zn);applicationRef=P(bo);applicationErrorHandler=P(Ht);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rA=new H("",{factory:()=>!1});function d_({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new De(K(O({},f_()),{scheduleInRootZone:t})),[{provide:De,useFactory:n},{provide:wr,multi:!0,useFactory:()=>{let r=P(P2,{optional:!0});return()=>r.initialize()}},{provide:wr,multi:!0,useFactory:()=>{let r=P(x2);return()=>{r.initialize()}}},e===!0?{provide:ev,useValue:!0}:[],{provide:tv,useValue:t??W0},{provide:Ht,useFactory:()=>{let r=P(De),i=P(nt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Sn),o.handleError(s))})}}}]}function h_(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=d_({ngZoneFactory:()=>{let i=f_(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Yh("NgZone_CoalesceEvent"),new De(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Zt([{provide:rA,useValue:!0},{provide:Yc,useValue:!1},r])}function f_(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var x2=(()=>{class n{subscription=new je;initialized=!1;zone=P(De);pendingTasks=P(Tr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var iA=(()=>{class n{applicationErrorHandler=P(Ht);appRef=P(bo);taskService=P(Tr);ngZone=P(De);zonelessEnabled=P(Yc);tracing=P(lu,{optional:!0});disableScheduling=P(ev,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(jh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(tv,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Uh||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?TS:K0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(jh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,TS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function k2(){return typeof $localize<"u"&&$localize.locale||du}var pu=new H("",{providedIn:"root",factory:()=>P(pu,{optional:!0,skipSelf:!0})||k2()});function Pn(n){return ub(n)}function Xn(n,e){return Rd(n,e?.equal)}var p_=class{[wt];constructor(e){this[wt]=e}destroy(){this[wt].destroy()}};function g_(n,e){let t=e?.injector??P($e),r=e?.manualCleanup!==!0?t.get(Qn):null,i,o=t.get(Zc,null,{optional:!0}),s=t.get(zn);return o!==null?(i=L2(o.view,s,n),r instanceof Fc&&r._lView===o.view&&(r=null)):i=V2(n,t.get(Jc),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new p_(i)}var oA=K(O({},Qr),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:go,run(){if(this.dirty=!1,this.hasRun&&!_s(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=Yr(this),t=$s(!1);try{this.maybeCleanup(),this.fn(n)}finally{$s(t),Ki(this,e)}},maybeCleanup(){if(!this.cleanupFns?.length)return;let n=te(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],te(n)}}}),O2=K(O({},oA),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Es(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),F2=K(O({},oA),{consumerMarkedDirty(){this.view[J]|=8192,ho(this.view),this.notifier.notify(13)},destroy(){Es(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Cr]?.delete(this)}});function L2(n,e,t){let r=Object.create(F2);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[Cr]??=new Set,n[Cr].add(r),r.consumerMarkedDirty(r),r}function V2(n,e,t){let r=Object.create(O2);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}var uA=Symbol("InputSignalNode#UNSET"),J2=K(O({},Nd),{transformFn:void 0,applyValueToInputSignal(n,e){Is(n,e)}});function lA(n,e){let t=Object.create(J2);t.value=n,t.transformFn=e?.transform;function r(){if(vs(t),t.value===uA){let i=null;throw new j(-950,i)}return t.value}return r[wt]=t,r}var X2=new H("");X2.__NG_ELEMENT_ID__=n=>{let e=kt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new j(204,!1)};function sA(n,e){return lA(n,e)}function ej(n){return lA(uA,n)}var dA=(sA.required=ej,sA);var Js=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},hA=new Js("20.0.5");var m_=new H(""),tj=new H("");function gu(n){return!n.moduleRef}function nj(n){let e=gu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(De);return t.run(()=>{gu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Ht),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),gu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(m_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(m_);s.add(o),n.moduleRef.onDestroy(()=>{eu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return ij(r,t,()=>{let o=e.get(o_);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(pu,du);if(eA(s||du),!e.get(tj,!0))return gu(n)?e.get(bo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(gu(n)){let c=e.get(bo);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return rj?.(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}var rj;function ij(n,e,t){try{let r=t();return hi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var tf=null;function oj(n=[],e){return $e.create({name:e,providers:[{provide:Uc,useValue:"platform"},{provide:m_,useValue:new Set([()=>tf=null])},...n]})}function sj(n=[]){if(tf)return tf;let e=oj(n);return tf=e,J0(),aj(e),e}function aj(n){let e=n.get(qh,null);ft(n,()=>{e?.forEach(t=>t())})}function I_(){return!1}var yu=(()=>{class n{static __NG_ELEMENT_ID__=cj}return n})();function cj(n){return uj(kt(),Ce(),(n&16)===16)}function uj(n,e,t){if(ai(n)&&!t){let r=mn(n.index,e);return new ui(r,r)}else if(n.type&175){let r=e[pn];return new ui(r,e)}return null}var y_=class{constructor(){}supports(e){return Zv(e)}create(e){return new v_(e)}},lj=(n,e)=>e,v_=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||lj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<aA(r,i,o)?t:r,a=aA(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,C=y+g;h<=C&&C<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Zv(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,B0(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new __(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new nf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new nf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},__=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},E_=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},nf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new E_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function aA(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function cA(){return new w_([new y_])}var w_=(()=>{class n{factories;static \u0275prov=q({token:n,providedIn:"root",factory:cA});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||cA()),deps:[[n,new kS,new zt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new j(901,!1)}}return n})();function fA(n){Re(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=sj(r),o=[d_({}),{provide:zn,useExisting:iA},nS,...t||[]],s=new ru({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return nj({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Re(9)}}function rf(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var mA=null;function vn(){return mA}function D_(n){mA??=n}var vu=class{},C_=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>P(yA),providedIn:"platform"})}return n})();var yA=(()=>{class n extends C_{_location;_history;_doc=P(ct);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vn().getBaseHref(this._doc)}onPopState(t){let r=vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function vA(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function pA(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function fi(n){return n&&n[0]!=="?"?`?${n}`:n}var of=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>P(EA),providedIn:"root"})}return n})(),_A=new H(""),EA=(()=>{class n extends of{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(ct).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return vA(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+fi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+fi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+fi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(re(C_),re(_A,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xs=(()=>{class n{_subject=new et;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=fj(pA(gA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+fi(r))}normalize(t){return n.stripTrailingSlash(hj(this._basePath,gA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=fi;static joinWithSlash=vA;static stripTrailingSlash=pA;static \u0275fac=function(r){return new(r||n)(re(of))};static \u0275prov=q({token:n,factory:()=>dj(),providedIn:"root"})}return n})();function dj(){return new Xs(re(of))}function hj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function gA(n){return n.replace(/\/index.html$/,"")}function fj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Tt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Tt||{}),Te=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Te||{}),qt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(qt||{}),Nr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function CA(n){return tn(n)[qe.LocaleId]}function TA(n,e,t){let r=tn(n),i=[r[qe.DayPeriodsFormat],r[qe.DayPeriodsStandalone]],o=_n(i,e);return _n(o,t)}function bA(n,e,t){let r=tn(n),i=[r[qe.DaysFormat],r[qe.DaysStandalone]],o=_n(i,e);return _n(o,t)}function SA(n,e,t){let r=tn(n),i=[r[qe.MonthsFormat],r[qe.MonthsStandalone]],o=_n(i,e);return _n(o,t)}function AA(n,e){let r=tn(n)[qe.Eras];return _n(r,e)}function _u(n,e){let t=tn(n);return _n(t[qe.DateFormat],e)}function Eu(n,e){let t=tn(n);return _n(t[qe.TimeFormat],e)}function Iu(n,e){let r=tn(n)[qe.DateTimeFormat];return _n(r,e)}function wu(n,e){let t=tn(n),r=t[qe.NumberSymbols][e];if(typeof r>"u"){if(e===Nr.CurrencyDecimal)return t[qe.NumberSymbols][Nr.Decimal];if(e===Nr.CurrencyGroup)return t[qe.NumberSymbols][Nr.Group]}return r}function RA(n){if(!n[qe.ExtraData])throw new j(2303,!1)}function NA(n){let e=tn(n);return RA(e),(e[qe.ExtraData][2]||[]).map(r=>typeof r=="string"?T_(r):[T_(r[0]),T_(r[1])])}function MA(n,e,t){let r=tn(n);RA(r);let i=[r[qe.ExtraData][0],r[qe.ExtraData][1]],o=_n(i,e)||[];return _n(o,t)||[]}function _n(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new j(2304,!1)}function T_(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var pj=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,sf={},gj=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function PA(n,e,t,r){let i=Cj(n);e=Rr(t,e)||e;let s=[],a;for(;e;)if(a=gj.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=kA(r,c),i=Dj(i,r));let l="";return s.forEach(h=>{let p=Ij(h);l+=p?p(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function df(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Rr(n,e){let t=CA(n);if(sf[t]??={},sf[t][e])return sf[t][e];let r="";switch(e){case"shortDate":r=_u(n,qt.Short);break;case"mediumDate":r=_u(n,qt.Medium);break;case"longDate":r=_u(n,qt.Long);break;case"fullDate":r=_u(n,qt.Full);break;case"shortTime":r=Eu(n,qt.Short);break;case"mediumTime":r=Eu(n,qt.Medium);break;case"longTime":r=Eu(n,qt.Long);break;case"fullTime":r=Eu(n,qt.Full);break;case"short":let i=Rr(n,"shortTime"),o=Rr(n,"shortDate");r=af(Iu(n,qt.Short),[i,o]);break;case"medium":let s=Rr(n,"mediumTime"),a=Rr(n,"mediumDate");r=af(Iu(n,qt.Medium),[s,a]);break;case"long":let c=Rr(n,"longTime"),l=Rr(n,"longDate");r=af(Iu(n,qt.Long),[c,l]);break;case"full":let h=Rr(n,"fullTime"),p=Rr(n,"fullDate");r=af(Iu(n,qt.Full),[h,p]);break}return r&&(sf[t][e]=r),r}function af(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function xn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function mj(n,e){return xn(n,3).substring(0,e)}function Ye(n,e,t=0,r=!1,i=!1){return function(o,s){let a=yj(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return mj(a,e);let c=wu(s,Nr.MinusSign);return xn(a,e,c,r,i)}}function yj(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new j(2301,!1)}}function Pe(n,e,t=Tt.Format,r=!1){return function(i,o){return vj(i,o,n,e,t,r)}}function vj(n,e,t,r,i,o){switch(t){case 2:return SA(e,i,r)[n.getMonth()];case 1:return bA(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=NA(e),h=MA(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[y,C]=g,M=s>=y.hours&&a>=y.minutes,N=s<C.hours||s===C.hours&&a<C.minutes;if(y.hours<C.hours){if(M&&N)return!0}else if(M||N)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return TA(e,i,r)[s<12?0:1];case 3:return AA(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new j(2302,!1)}}function cf(n){return function(e,t,r){let i=-1*r,o=wu(t,Nr.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+xn(s,2,o)+xn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+xn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+xn(s,2,o)+":"+xn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+xn(s,2,o)+":"+xn(Math.abs(i%60),2,o);default:throw new j(2302,!1)}}}var _j=0,lf=4;function Ej(n){let e=df(n,_j,1).getDay();return df(n,0,1+(e<=lf?lf:lf+7)-e)}function xA(n){let e=n.getDay(),t=e===0?-3:lf-e;return df(n.getFullYear(),n.getMonth(),n.getDate()+t)}function b_(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=xA(t),s=Ej(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return xn(i,n,wu(r,Nr.MinusSign))}}function uf(n,e=!1){return function(t,r){let o=xA(t).getFullYear();return xn(o,n,wu(r,Nr.MinusSign),e)}}var S_={};function Ij(n){if(S_[n])return S_[n];let e;switch(n){case"G":case"GG":case"GGG":e=Pe(3,Te.Abbreviated);break;case"GGGG":e=Pe(3,Te.Wide);break;case"GGGGG":e=Pe(3,Te.Narrow);break;case"y":e=Ye(0,1,0,!1,!0);break;case"yy":e=Ye(0,2,0,!0,!0);break;case"yyy":e=Ye(0,3,0,!1,!0);break;case"yyyy":e=Ye(0,4,0,!1,!0);break;case"Y":e=uf(1);break;case"YY":e=uf(2,!0);break;case"YYY":e=uf(3);break;case"YYYY":e=uf(4);break;case"M":case"L":e=Ye(1,1,1);break;case"MM":case"LL":e=Ye(1,2,1);break;case"MMM":e=Pe(2,Te.Abbreviated);break;case"MMMM":e=Pe(2,Te.Wide);break;case"MMMMM":e=Pe(2,Te.Narrow);break;case"LLL":e=Pe(2,Te.Abbreviated,Tt.Standalone);break;case"LLLL":e=Pe(2,Te.Wide,Tt.Standalone);break;case"LLLLL":e=Pe(2,Te.Narrow,Tt.Standalone);break;case"w":e=b_(1);break;case"ww":e=b_(2);break;case"W":e=b_(1,!0);break;case"d":e=Ye(2,1);break;case"dd":e=Ye(2,2);break;case"c":case"cc":e=Ye(7,1);break;case"ccc":e=Pe(1,Te.Abbreviated,Tt.Standalone);break;case"cccc":e=Pe(1,Te.Wide,Tt.Standalone);break;case"ccccc":e=Pe(1,Te.Narrow,Tt.Standalone);break;case"cccccc":e=Pe(1,Te.Short,Tt.Standalone);break;case"E":case"EE":case"EEE":e=Pe(1,Te.Abbreviated);break;case"EEEE":e=Pe(1,Te.Wide);break;case"EEEEE":e=Pe(1,Te.Narrow);break;case"EEEEEE":e=Pe(1,Te.Short);break;case"a":case"aa":case"aaa":e=Pe(0,Te.Abbreviated);break;case"aaaa":e=Pe(0,Te.Wide);break;case"aaaaa":e=Pe(0,Te.Narrow);break;case"b":case"bb":case"bbb":e=Pe(0,Te.Abbreviated,Tt.Standalone,!0);break;case"bbbb":e=Pe(0,Te.Wide,Tt.Standalone,!0);break;case"bbbbb":e=Pe(0,Te.Narrow,Tt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Pe(0,Te.Abbreviated,Tt.Format,!0);break;case"BBBB":e=Pe(0,Te.Wide,Tt.Format,!0);break;case"BBBBB":e=Pe(0,Te.Narrow,Tt.Format,!0);break;case"h":e=Ye(3,1,-12);break;case"hh":e=Ye(3,2,-12);break;case"H":e=Ye(3,1);break;case"HH":e=Ye(3,2);break;case"m":e=Ye(4,1);break;case"mm":e=Ye(4,2);break;case"s":e=Ye(5,1);break;case"ss":e=Ye(5,2);break;case"S":e=Ye(6,1);break;case"SS":e=Ye(6,2);break;case"SSS":e=Ye(6,3);break;case"Z":case"ZZ":case"ZZZ":e=cf(0);break;case"ZZZZZ":e=cf(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=cf(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=cf(2);break;default:return null}return S_[n]=e,e}function kA(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function wj(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Dj(n,e,t){let i=n.getTimezoneOffset(),o=kA(e,i);return wj(n,-1*(o-i))}function Cj(n){if(IA(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return df(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(pj))return Tj(r)}let e=new Date(n);if(!IA(e))throw new j(2302,!1);return e}function Tj(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function IA(n){return n instanceof Date&&!isNaN(n.valueOf())}var hf=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ea=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new hf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),wA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);wA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(le(To),le(su),le(w_))};static \u0275dir=pt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function wA(n,e){n.context.$implicit=e.item}var Du=(()=>{class n{_viewContainer;_context=new ff;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){DA(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){DA(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(le(To),le(su))};static \u0275dir=pt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),ff=class{$implicit=null;ngIf=null};function DA(n,e){if(n&&!n.createEmbeddedView)throw new j(2020,!1)}function bj(n,e){return new j(2100,!1)}var Sj="mediumDate",OA=new H(""),FA=new H(""),A_=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??Sj,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return PA(t,s,o||this.locale,a)}catch(s){throw bj(n,s.message)}}static \u0275fac=function(r){return new(r||n)(le(pu,16),le(OA,24),le(FA,24))};static \u0275pipe=Jv({name:"date",type:n,pure:!0})}return n})();var En=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=di({type:n});static \u0275inj=Ir({})}return n})();function R_(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Cu=class{};var LA="browser",Aj="server";function VA(n){return n===Aj}var mf=new H(""),k_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(re(mf),re(De))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Tu=class{_doc;constructor(e){this._doc=e}manager},pf="ng-app-id";function jA(n){for(let e of n)e.remove()}function UA(n,e){let t=e.createElement("style");return t.textContent=n,t}function Rj(n,e,t,r){let i=n.head?.querySelectorAll(`style[${pf}="${e}"],link[${pf}="${e}"]`);if(i)for(let o of i)o.removeAttribute(pf),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function P_(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var O_=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=VA(o),Rj(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,UA);r?.forEach(i=>this.addUsage(i,this.external,P_))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(jA(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])jA(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,UA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,P_(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(pf,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(re(ct),re(zh),re(Gh,8),re(li))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),M_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},F_=/%COMP%/g;var $A="%COMP%",Nj=`_nghost-${$A}`,Mj=`_ngcontent-${$A}`,Pj=!0,xj=new H("",{providedIn:"root",factory:()=>Pj});function kj(n){return Mj.replace(F_,n)}function Oj(n){return Nj.replace(F_,n)}function HA(n,e){return e.map(t=>t.replace(F_,n))}var L_=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new bu(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof gf?i.applyToHost(t):i instanceof Su&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case br.Emulated:o=new gf(c,l,r,this.appId,h,s,a,p,g);break;case br.ShadowDom:return new x_(c,l,t,r,s,a,this.nonce,p,g);default:o=new Su(c,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(re(k_),re(O_),re(zh),re(xj),re(ct),re(li),re(De),re(Gh),re(lu,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),bu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(M_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(BA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(BA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=M_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=M_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Zn.DashCase|Zn.Important)?e.style.setProperty(t,r,i&Zn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Zn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=vn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function BA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var x_=class extends bu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=HA(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=P_(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Su=class extends bu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?HA(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},gf=class extends Su{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,c,l,h),this.contentAttr=kj(h),this.hostAttr=Oj(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var yf=class n extends vu{supportsDOMEvents=!0;static makeCurrent(){D_(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Fj();return t==null?null:Lj(t)}resetBaseElement(){Au=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return R_(document.cookie,e)}},Au=null;function Fj(){return Au=Au||document.head.querySelector("base"),Au?Au.getAttribute("href"):null}function Lj(n){return new URL(n,document.baseURI).pathname}var Vj=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),qA=(()=>{class n extends Tu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(re(ct))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),zA=["alt","control","meta","shift"],jj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Uj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},GA=(()=>{class n extends Tu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),zA.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=jj[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),zA.forEach(s=>{if(s!==i){let a=Uj[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(re(ct))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function V_(n,e){return fA(O({rootComponent:n},Bj(e)))}function Bj(n){return{appProviders:[...Gj,...n?.providers??[]],platformProviders:qj}}function $j(){yf.makeCurrent()}function Hj(){return new Sn}function zj(){return Ov(document),document}var qj=[{provide:li,useValue:LA},{provide:qh,useValue:$j,multi:!0},{provide:ct,useFactory:zj}];var Gj=[{provide:Uc,useValue:"root"},{provide:Sn,useFactory:Hj},{provide:mf,useClass:qA,multi:!0,deps:[ct]},{provide:mf,useClass:GA,multi:!0,deps:[ct]},L_,O_,k_,{provide:_o,useExisting:L_},{provide:Cu,useClass:Vj},[]];var WA=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(re(ct))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ie="primary",Bu=Symbol("RouteTitle"),H_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function sa(n){return new H_(n)}function Kj(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Qj(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!er(n[t],e[t]))return!1;return!0}function er(n,e){let t=n?z_(n):void 0,r=e?z_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!tR(n[i],e[i]))return!1;return!0}function z_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function tR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function nR(n){return n.length>0?n[n.length-1]:null}function xr(n){return Ym(n)?n:hi(n)?Ue(Promise.resolve(n)):ee(n)}var Yj={exact:iR,subset:oR},rR={exact:Zj,subset:Jj,ignored:()=>!0};function KA(n,e,t){return Yj[t.paths](n.root,e.root,t.matrixParams)&&rR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Zj(n,e){return er(n,e)}function iR(n,e,t){if(!Mo(n.segments,e.segments)||!Ef(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!iR(n.children[r],e.children[r],t))return!1;return!0}function Jj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tR(n[t],e[t]))}function oR(n,e,t){return sR(n,e,e.segments,t)}function sR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Mo(i,t)||e.hasChildren()||!Ef(i,t,r))}else if(n.segments.length===t.length){if(!Mo(n.segments,t)||!Ef(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!oR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Mo(n.segments,i)||!Ef(n.segments,i,r)||!n.children[ie]?!1:sR(n.children[ie],e,o,r)}}function Ef(n,e,t){return e.every((r,i)=>rR[t](n[i].parameters,r.parameters))}var Pr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ie([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=sa(this.queryParams),this._queryParamMap}toString(){return tU.serialize(this)}},Ie=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return If(this)}},No=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=sa(this.parameters),this._parameterMap}toString(){return cR(this)}};function Xj(n,e){return Mo(n,e)&&n.every((t,r)=>er(t.parameters,e[r].parameters))}function Mo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function eU(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ie&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ie&&(t=t.concat(e(i,r)))}),t}var xf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new aa,providedIn:"root"})}return n})(),aa=class{parse(e){let t=new G_(e);return new Pr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ru(e.root,!0)}`,r=iU(e.queryParams),i=typeof e.fragment=="string"?`#${nU(e.fragment)}`:"";return`${t}${r}${i}`}},tU=new aa;function If(n){return n.segments.map(e=>cR(e)).join("/")}function Ru(n,e){if(!n.hasChildren())return If(n);if(e){let t=n.children[ie]?Ru(n.children[ie],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ie&&r.push(`${i}:${Ru(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=eU(n,(r,i)=>i===ie?[Ru(n.children[ie],!1)]:[`${i}:${Ru(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ie]!=null?`${If(n)}/${t[0]}`:`${If(n)}/(${t.join("//")})`}}function aR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vf(n){return aR(n).replace(/%3B/gi,";")}function nU(n){return encodeURI(n)}function q_(n){return aR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wf(n){return decodeURIComponent(n)}function QA(n){return wf(n.replace(/\+/g,"%20"))}function cR(n){return`${q_(n.path)}${rU(n.parameters)}`}function rU(n){return Object.entries(n).map(([e,t])=>`;${q_(e)}=${q_(t)}`).join("")}function iU(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${vf(t)}=${vf(i)}`).join("&"):`${vf(t)}=${vf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var oU=/^[^\/()?;#]+/;function j_(n){let e=n.match(oU);return e?e[0]:""}var sU=/^[^\/()?;=#]+/;function aU(n){let e=n.match(sU);return e?e[0]:""}var cU=/^[^=?&#]+/;function uU(n){let e=n.match(cU);return e?e[0]:""}var lU=/^[^&#]+/;function dU(n){let e=n.match(lU);return e?e[0]:""}var G_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ie]=new Ie(e,t)),r}parseSegment(){let e=j_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new No(wf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=aU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=j_(this.remaining);i&&(r=i,this.capture(r))}e[wf(t)]=wf(r)}parseQueryParam(e){let t=uU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=dU(this.remaining);s&&(r=s,this.capture(r))}let i=QA(t),o=QA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=j_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ie);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ie]:new Ie([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function uR(n){return n.segments.length>0?new Ie([],{[ie]:n}):n}function lR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=lR(i);if(r===ie&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ie(n.segments,e);return hU(t)}function hU(n){if(n.numberOfChildren===1&&n.children[ie]){let e=n.children[ie];return new Ie(n.segments.concat(e.segments),e.children)}return n}function ca(n){return n instanceof Pr}function fU(n,e,t=null,r=null){let i=dR(n);return hR(i,e,t,r)}function dR(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Ie(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=uR(r);return e??i}function hR(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return U_(i,i,i,t,r);let o=pU(e);if(o.toRoot())return U_(i,i,new Ie([],{}),t,r);let s=gU(o,i,n),a=s.processChildren?Mu(s.segmentGroup,s.index,o.commands):pR(s.segmentGroup,s.index,o.commands);return U_(i,s.segmentGroup,a,t,r)}function Df(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ku(n){return typeof n=="object"&&n!=null&&n.outlets}function U_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=fR(n,e,t);let a=uR(lR(s));return new Pr(a,o,i)}function fR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=fR(o,e,t)}),new Ie(n.segments,r)}var Cf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Df(r[0]))throw new j(4003,!1);let i=r.find(ku);if(i&&i!==nR(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function pU(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Cf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Cf(t,e,r)}var ra=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function gU(n,e,t){if(n.isAbsolute)return new ra(e,!0,0);if(!t)return new ra(e,!1,NaN);if(t.parent===null)return new ra(t,!0,0);let r=Df(n.commands[0])?0:1,i=t.segments.length-1+r;return mU(t,i,n.numberOfDoubleDots)}function mU(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new ra(r,!1,i-o)}function yU(n){return ku(n[0])?n[0].outlets:{[ie]:n}}function pR(n,e,t){if(n??=new Ie([],{}),n.segments.length===0&&n.hasChildren())return Mu(n,e,t);let r=vU(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ie(n.segments.slice(0,r.pathIndex),{});return o.children[ie]=new Ie(n.segments.slice(r.pathIndex),n.children),Mu(o,0,i)}else return r.match&&i.length===0?new Ie(n.segments,{}):r.match&&!n.hasChildren()?W_(n,e,t):r.match?Mu(n,0,i):W_(n,e,t)}function Mu(n,e,t){if(t.length===0)return new Ie(n.segments,{});{let r=yU(t),i={};if(Object.keys(r).some(o=>o!==ie)&&n.children[ie]&&n.numberOfChildren===1&&n.children[ie].segments.length===0){let o=Mu(n.children[ie],e,t);return new Ie(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=pR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ie(n.segments,i)}}function vU(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ku(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!ZA(c,l,s))return o;r+=2}else{if(!ZA(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function W_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ku(o)){let c=_U(o.outlets);return new Ie(r,c)}if(i===0&&Df(t[0])){let c=n.segments[e];r.push(new No(c.path,YA(t[0]))),i++;continue}let s=ku(o)?o.outlets[ie]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Df(a)?(r.push(new No(s,YA(a))),i+=2):(r.push(new No(s,{})),i++)}return new Ie(r,{})}function _U(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=W_(new Ie([],{}),0,r))}),e}function YA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ZA(n,e,t){return n==t.path&&er(e,t.parameters)}var Pu="imperative",gt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(gt||{}),In=class{id;url;constructor(e,t){this.id=e,this.url=t}},ua=class extends In{type=gt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},pi=class extends In{urlAfterRedirects;type=gt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(Gt||{}),Tf=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Tf||{}),Mr=class extends In{reason;code;type=gt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gi=class extends In{reason;code;type=gt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ou=class extends In{error;target;type=gt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bf=class extends In{urlAfterRedirects;state;type=gt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},K_=class extends In{urlAfterRedirects;state;type=gt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Q_=class extends In{urlAfterRedirects;state;shouldActivate;type=gt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Y_=class extends In{urlAfterRedirects;state;type=gt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Z_=class extends In{urlAfterRedirects;state;type=gt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},J_=class{route;type=gt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},X_=class{route;type=gt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},eE=class{snapshot;type=gt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tE=class{snapshot;type=gt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nE=class{snapshot;type=gt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rE=class{snapshot;type=gt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Fu=class{},la=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function EU(n){return!(n instanceof Fu)&&!(n instanceof la)}function IU(n,e){return n.providers&&!n._injector&&(n._injector=uu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function kn(n){return n.outlet||ie}function wU(n,e){let t=n.filter(r=>kn(r)===e);return t.push(...n.filter(r=>kn(r)!==e)),t}function $u(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var iE=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return $u(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Hu(this.rootInjector)}},Hu=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new iE(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(re(nt))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=oE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=oE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=sE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return sE(e,this._root).map(t=>t.value)}};function oE(n,e){if(n===e.value)return e;for(let t of e.children){let r=oE(n,t);if(r)return r}return null}function sE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=sE(n,t);if(r.length)return r.unshift(e),r}return[]}var nn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function na(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Af=class extends Sf{snapshot;constructor(e,t){super(e),this.snapshot=t,gE(this,e)}toString(){return this.snapshot.toString()}};function gR(n){let e=DU(n),t=new lt([new No("",{})]),r=new lt({}),i=new lt({}),o=new lt({}),s=new lt(""),a=new Po(t,r,o,s,i,ie,n,e.root);return a.snapshot=e.root,new Af(new nn(a,[]),e)}function DU(n){let e={},t={},r={},i="",o=new ia([],e,r,i,t,ie,n,null,{});return new Nf("",new nn(o,[]))}var Po=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(fe(l=>l[Bu]))??ee(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(fe(e=>sa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(fe(e=>sa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Rf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&yR(i)&&(r.resolve[Bu]=i.title),r}var ia=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Bu]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=sa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=sa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Nf=class extends Sf{url;constructor(e,t){super(t),this.url=e,gE(this,t)}toString(){return mR(this._root)}};function gE(n,e){e.value._routerState=n,e.children.forEach(t=>gE(n,t))}function mR(n){let e=n.children.length>0?` { ${n.children.map(mR).join(", ")} } `:"";return`${n.value}${e}`}function B_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,er(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),er(e.params,t.params)||n.paramsSubject.next(t.params),Qj(e.url,t.url)||n.urlSubject.next(t.url),er(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function aE(n,e){let t=er(n.params,e.params)&&Xj(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||aE(n.parent,e.parent))}function yR(n){return typeof n.title=="string"||n.title===null}var CU=new H(""),vR=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ie;activateEvents=new we;deactivateEvents=new we;attachEvents=new we;detachEvents=new we;routerOutletData=dA(void 0);parentContexts=P(Hu);location=P(To);changeDetector=P(yu);inputBinder=P(kf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new cE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=pt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Do]})}return n})(),cE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Po?this.route:e===Hu?this.childContexts:e===CU?this.outletData:this.parent.get(e,t)}},kf=new H("");var _R=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Xt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Qs(0,"router-outlet")},dependencies:[vR],encapsulation:2})}return n})();function mE(n){let e=n.children&&n.children.map(mE),t=e?K(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ie&&(t.component=_R),t}function TU(n,e,t){let r=Lu(n,e._root,t?t._root:void 0);return new Af(r,e)}function Lu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=bU(n,e,t);return new nn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Lu(n,a)),s}}let r=SU(e.value),i=e.children.map(o=>Lu(n,o));return new nn(r,i)}}function bU(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Lu(n,r,i);return Lu(n,r)})}function SU(n){return new Po(new lt(n.url),new lt(n.params),new lt(n.queryParams),new lt(n.fragment),new lt(n.data),n.outlet,n.component,n)}var Vu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ER="ngNavigationCancelingError";function Mf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ca(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=IR(!1,Gt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function IR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ER]=!0,t.cancellationCode=e,t}function AU(n){return wR(n)&&ca(n.url)}function wR(n){return!!n&&n[ER]}var RU=(n,e,t,r)=>fe(i=>(new uE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),uE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),B_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=na(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=na(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=na(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=na(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new rE(o.value.snapshot))}),e.children.length&&this.forwardEvent(new tE(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(B_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),B_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Pf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},oa=class{component;route;constructor(e,t){this.component=e,this.route=t}};function NU(n,e,t){let r=n._root,i=e?e._root:null;return Nu(r,i,t,[r.value])}function MU(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ha(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!gy(n)?n:e.get(n):r}function Nu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=na(e);return n.children.forEach(s=>{PU(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>xu(a,t.getContext(s),i)),i}function PU(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=xU(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Pf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Nu(n,e,a?a.children:null,r,i):Nu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new oa(a.outlet.component,s))}else s&&xu(e,a,i),i.canActivateChecks.push(new Pf(r)),o.component?Nu(n,null,a?a.children:null,r,i):Nu(n,null,t,r,i);return i}function xU(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Mo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mo(n.url,e.url)||!er(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!aE(n,e)||!er(n.queryParams,e.queryParams);case"paramsChange":default:return!aE(n,e)}}function xu(n,e,t){let r=na(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?xu(s,e.children.getContext(o),t):xu(s,null,t):xu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new oa(e.outlet.component,i)):t.canDeactivateChecks.push(new oa(null,i)):t.canDeactivateChecks.push(new oa(null,i))}function zu(n){return typeof n=="function"}function kU(n){return typeof n=="boolean"}function OU(n){return n&&zu(n.canLoad)}function FU(n){return n&&zu(n.canActivate)}function LU(n){return n&&zu(n.canActivateChild)}function VU(n){return n&&zu(n.canDeactivate)}function jU(n){return n&&zu(n.canMatch)}function DR(n){return n instanceof mr||n?.name==="EmptyError"}var _f=Symbol("INITIAL_VALUE");function da(){return dn(n=>Xd(n.map(e=>e.pipe(yr(1),ey(_f)))).pipe(fe(e=>{for(let t of e)if(t!==!0){if(t===_f)return _f;if(t===!1||UU(t))return t}return!0}),ln(e=>e!==_f),yr(1)))}function UU(n){return ca(n)||n instanceof Vu}function BU(n,e){return tt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ee(K(O({},t),{guardsResult:!0})):$U(s,r,i,n).pipe(tt(a=>a&&kU(a)?HU(r,o,n,e):ee(a)),fe(a=>K(O({},t),{guardsResult:a})))})}function $U(n,e,t,r){return Ue(n).pipe(tt(i=>KU(i.component,i.route,t,e,r)),vr(i=>i!==!0,!0))}function HU(n,e,t,r){return Ue(e).pipe(ks(i=>xs(qU(i.route.parent,r),zU(i.route,r),WU(n,i.path,t),GU(n,i.route,t))),vr(i=>i!==!0,!0))}function zU(n,e){return n!==null&&e&&e(new nE(n)),ee(!0)}function qU(n,e){return n!==null&&e&&e(new eE(n)),ee(!0)}function GU(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(o=>Mc(()=>{let s=$u(e)??t,a=ha(o,s),c=FU(a)?a.canActivate(e,n):ft(s,()=>a(e,n));return xr(c).pipe(vr())}));return ee(i).pipe(da())}function WU(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>MU(s)).filter(s=>s!==null).map(s=>Mc(()=>{let a=s.guards.map(c=>{let l=$u(s.node)??t,h=ha(c,l),p=LU(h)?h.canActivateChild(r,n):ft(l,()=>h(r,n));return xr(p).pipe(vr())});return ee(a).pipe(da())}));return ee(o).pipe(da())}function KU(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ee(!0);let s=o.map(a=>{let c=$u(e)??i,l=ha(a,c),h=VU(l)?l.canDeactivate(n,e,t,r):ft(c,()=>l(n,e,t,r));return xr(h).pipe(vr())});return ee(s).pipe(da())}function QU(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let o=i.map(s=>{let a=ha(s,n),c=OU(a)?a.canLoad(e,t):ft(n,()=>a(e,t));return xr(c)});return ee(o).pipe(da(),CR(r))}function CR(n){return $m(at(e=>{if(typeof e!="boolean")throw Mf(n,e)}),fe(e=>e===!0))}function YU(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let o=i.map(s=>{let a=ha(s,n),c=jU(a)?a.canMatch(e,t):ft(n,()=>a(e,t));return xr(c)});return ee(o).pipe(da(),CR(r))}var ju=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Uu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ta(n){return Ps(new ju(n))}function ZU(n){return Ps(new j(4e3,!1))}function JU(n){return Ps(IR(!1,Gt.GuardRejected))}var lE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[ie])return ZU(`${e.redirectTo}`);i=i.children[ie]}}applyRedirectCommands(e,t,r,i,o){return XU(t,i,o).pipe(fe(s=>{if(s instanceof Pr)throw new Uu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Uu(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Pr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ie(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function XU(n,e,t){if(typeof n=="string")return ee(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:h,title:p}=e;return xr(ft(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:p})))}var dE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function eB(n,e,t,r,i){let o=TR(n,e,t);return o.matched?(r=IU(e,r),YU(r,e,t,i).pipe(fe(s=>s===!0?o:O({},dE)))):ee(o)}function TR(n,e,t){if(e.path==="**")return tB(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},dE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Kj)(t,n,e);if(!i)return O({},dE);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function tB(n){return{matched:!0,parameters:n.length>0?nR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function JA(n,e,t,r){return t.length>0&&iB(n,t,r)?{segmentGroup:new Ie(e,rB(r,new Ie(t,n.children))),slicedSegments:[]}:t.length===0&&oB(n,t,r)?{segmentGroup:new Ie(n.segments,nB(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ie(n.segments,n.children),slicedSegments:t}}function nB(n,e,t,r){let i={};for(let o of t)if(Of(n,e,o)&&!r[kn(o)]){let s=new Ie([],{});i[kn(o)]=s}return O(O({},r),i)}function rB(n,e){let t={};t[ie]=e;for(let r of n)if(r.path===""&&kn(r)!==ie){let i=new Ie([],{});t[kn(r)]=i}return t}function iB(n,e,t){return t.some(r=>Of(n,e,r)&&kn(r)!==ie)}function oB(n,e,t){return t.some(r=>Of(n,e,r))}function Of(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function sB(n,e,t){return e.length===0&&!n.children[t]}var hE=class{};function aB(n,e,t,r,i,o,s="emptyOnly"){return new fE(n,e,t,r,i,s,o).recognize()}var cB=31,fE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new lE(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=JA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(fe(({children:t,rootSnapshot:r})=>{let i=new nn(r,t),o=new Nf("",i),s=fU(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ia([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ie,t).pipe(fe(r=>({children:r,rootSnapshot:t})),ei(r=>{if(r instanceof Uu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ju?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(fe(s=>s instanceof nn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ue(o).pipe(ks(s=>{let a=r.children[s],c=wU(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Xm((s,a)=>(s.push(...a),s)),ti(null),Jm(),tt(s=>{if(s===null)return ta(r);let a=bR(s);return uB(a),ee(a)}))}processSegment(e,t,r,i,o,s,a){return Ue(t).pipe(ks(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(ei(l=>{if(l instanceof ju)return ee(null);throw l}))),vr(c=>!!c),ei(c=>{if(DR(c))return sB(r,i,o)?ee(new hE):ta(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return kn(r)!==s&&(s===ie||!Of(i,o,r))?ta(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):ta(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=TR(t,i,o);if(!c)return ta(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>cB&&(this.allowRedirects=!1));let y=new ia(o,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,XA(i),kn(i),i.component??i._loadedComponent??null,i,eR(i)),C=Rf(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(dn(N=>this.applyRedirects.lineralizeSegments(i,N)),tt(N=>this.processSegment(e,r,t,N.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=eB(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(dn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(dn(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=c,C=new ia(g,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,XA(r),kn(r),r.component??r._loadedComponent??null,r,eR(r)),M=Rf(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(M.params),C.data=Object.freeze(M.data);let{segmentGroup:N,slicedSegments:F}=JA(t,g,y,l);if(F.length===0&&N.hasChildren())return this.processChildren(h,l,N,C).pipe(fe(U=>new nn(C,U)));if(l.length===0&&F.length===0)return ee(new nn(C,[]));let z=kn(r)===o;return this.processSegment(h,l,N,F,z?ie:o,!0,C).pipe(fe(U=>new nn(C,U instanceof nn?[U]:[])))}))):ta(t)))}getChildConfig(e,t,r){return t.children?ee({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ee({routes:t._loadedRoutes,injector:t._loadedInjector}):QU(e,t,r,this.urlSerializer).pipe(tt(i=>i?this.configLoader.loadChildren(e,t).pipe(at(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):JU(t))):ee({routes:[],injector:e})}};function uB(n){n.sort((e,t)=>e.value.outlet===ie?-1:t.value.outlet===ie?1:e.value.outlet.localeCompare(t.value.outlet))}function lB(n){let e=n.value.routeConfig;return e&&e.path===""}function bR(n){let e=[],t=new Set;for(let r of n){if(!lB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=bR(r.children);e.push(new nn(r.value,i))}return e.filter(r=>!t.has(r))}function XA(n){return n.data||{}}function eR(n){return n.resolve||{}}function dB(n,e,t,r,i,o){return tt(s=>aB(n,e,t,r,s.extractedUrl,i,o).pipe(fe(({state:a,tree:c})=>K(O({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function hB(n,e){return tt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ee(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of SR(c))s.add(l);let a=0;return Ue(s).pipe(ks(c=>o.has(c)?fB(c,r,n,e):(c.data=Rf(c,c.parent,n).resolve,ee(void 0))),at(()=>a++),Os(1),tt(c=>a===s.size?ee(t):Vt))})}function SR(n){let e=n.children.map(t=>SR(t)).flat();return[n,...e]}function fB(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!yR(i)&&(o[Bu]=i.title),Mc(()=>(n.data=Rf(n,n.parent,t).resolve,pB(o,n,e,r).pipe(fe(s=>(n._resolvedData=s,n.data=O(O({},n.data),s),null)))))}function pB(n,e,t,r){let i=z_(n);if(i.length===0)return ee({});let o={};return Ue(i).pipe(tt(s=>gB(n[s],e,t,r).pipe(vr(),at(a=>{if(a instanceof Vu)throw Mf(new aa,a);o[s]=a}))),Os(1),fe(()=>o),ei(s=>DR(s)?Vt:Ps(s)))}function gB(n,e,t,r){let i=$u(e)??r,o=ha(n,i),s=o.resolve?o.resolve(e,t):ft(i,()=>o(e,t));return xr(s)}function $_(n){return dn(e=>{let t=n(e);return t?Ue(t).pipe(fe(()=>e)):ee(e)})}var AR=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ie);return r}getResolvedTitleForRoute(t){return t.data[Bu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>P(mB),providedIn:"root"})}return n})(),mB=(()=>{class n extends AR{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(re(WA))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ff=new H("",{providedIn:"root",factory:()=>({})}),Lf=new H(""),RR=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(l_);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ee(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=xr(t.loadComponent()).pipe(fe(NR),at(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Pc(()=>{this.componentLoaders.delete(t)})),i=new As(r,()=>new et).pipe(Ss());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=yB(r,this.compiler,t,this.onLoadEndListener).pipe(Pc(()=>{this.childrenLoaders.delete(r)})),s=new As(o,()=>new et).pipe(Ss());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yB(n,e,t,r){return xr(n.loadChildren()).pipe(fe(NR),tt(i=>i instanceof Zh||Array.isArray(i)?ee(i):Ue(e.compileModuleAsync(i))),fe(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Lf,[],{optional:!0,self:!0}).flat()),{routes:s.map(mE),injector:o}}))}function vB(n){return n&&typeof n=="object"&&"default"in n}function NR(n){return vB(n)?n.default:n}var yE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>P(_B),providedIn:"root"})}return n})(),_B=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MR=new H("");var PR=new H(""),xR=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new et;transitionAbortWithErrorSubject=new et;configLoader=P(RR);environmentInjector=P(nt);destroyRef=P(Qn);urlSerializer=P(xf);rootContexts=P(Hu);location=P(Xs);inputBindingEnabled=P(kf,{optional:!0})!==null;titleStrategy=P(AR);options=P(Ff,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(yE);createViewTransition=P(MR,{optional:!0});navigationErrorHandler=P(PR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ee(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new J_(i)),r=i=>this.events.next(new X_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(K(O({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new lt(null),this.transitions.pipe(ln(r=>r!==null),dn(r=>{let i=!1;return ee(r).pipe(dn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Gt.SupersededByNewNavigation),Vt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?K(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let c="";return this.events.next(new gi(o.id,this.urlSerializer.serialize(o.rawUrl),c,Tf.IgnoredSameUrlNavigation)),o.resolve(!1),Vt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ee(o).pipe(dn(c=>(this.events.next(new ua(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Vt:Promise.resolve(c))),dB(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),at(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=K(O({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let l=new bf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new ua(c,this.urlSerializer.serialize(l),h,p);this.events.next(y);let C=gR(this.rootComponentType).snapshot;return this.currentTransition=r=K(O({},o),{targetSnapshot:C,urlAfterRedirects:l,extras:K(O({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,ee(r)}else{let c="";return this.events.next(new gi(o.id,this.urlSerializer.serialize(o.extractedUrl),c,Tf.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Vt}}),at(o=>{let s=new K_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),fe(o=>(this.currentTransition=r=K(O({},o),{guards:NU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),BU(this.environmentInjector,o=>this.events.next(o)),at(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Mf(this.urlSerializer,o.guardsResult);let s=new Q_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ln(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Gt.GuardRejected),!1)),$_(o=>{if(o.guards.canActivateChecks.length!==0)return ee(o).pipe(at(s=>{let a=new Y_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),dn(s=>{let a=!1;return ee(s).pipe(hB(this.paramsInheritanceStrategy,this.environmentInjector),at({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Gt.NoDataFromResolver)}}))}),at(s=>{let a=new Z_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),$_(o=>{let s=a=>{let c=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(a.routeConfig).pipe(at(l=>{a.component=l}),fe(()=>{})));for(let l of a.children)c.push(...s(l));return c};return Xd(s(o.targetSnapshot.root)).pipe(ti(null),yr(1))}),$_(()=>this.afterPreactivation()),dn(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ue(a).pipe(fe(()=>r)):ee(r)}),fe(o=>{let s=TU(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=K(O({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),at(()=>{this.events.next(new Fu)}),RU(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),yr(1),th(new se(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ln(()=>!i&&!r.targetRouterState),at(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Gt.Aborted)}))),at({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pi(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),th(this.transitionAbortWithErrorSubject.pipe(at(o=>{throw o}))),Pc(()=>{i||this.cancelNavigationTransition(r,"",Gt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),ei(o=>{if(this.destroyed)return r.resolve(!1),Vt;if(i=!0,wR(o))this.events.next(new Mr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),AU(o)?this.events.next(new la(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ou(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=ft(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Vu){let{message:c,cancellationCode:l}=Mf(this.urlSerializer,a);this.events.next(new Mr(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new la(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Vt}))}))}cancelNavigationTransition(t,r,i){let o=new Mr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function EB(n){return n!==Pu}var IB=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>P(wB),providedIn:"root"})}return n})(),pE=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},wB=(()=>{class n extends pE{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Co(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kR=(()=>{class n{urlSerializer=P(xf);options=P(Ff,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(Xs);urlHandlingStrategy=P(yE);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Pr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Pr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=gR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>P(DB),providedIn:"root"})}return n})(),DB=(()=>{class n extends kR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ua?this.updateStateMemento():t instanceof gi?this.commitTransition(r):t instanceof bf?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Fu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Mr&&t.code!==Gt.SupersededByNewNavigation&&t.code!==Gt.Redirect?this.restoreHistory(r):t instanceof Ou?this.restoreHistory(r,!0):t instanceof pi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=O(O({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=O(O({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Co(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OR(n,e){n.events.pipe(ln(t=>t instanceof pi||t instanceof Mr||t instanceof Ou||t instanceof gi),fe(t=>t instanceof pi||t instanceof gi?0:(t instanceof Mr?t.code===Gt.Redirect||t.code===Gt.SupersededByNewNavigation:!1)?2:1),ln(t=>t!==2),yr(1)).subscribe(()=>{e()})}var CB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},vE=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(n_);stateManager=P(kR);options=P(Ff,{optional:!0})||{};pendingTasks=P(Tr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(xR);urlSerializer=P(xf);location=P(Xs);urlHandlingStrategy=P(yE);injector=P(nt);_events=new et;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(IB);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(Lf,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(kf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new je;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Mr&&r.code!==Gt.Redirect&&r.code!==Gt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof pi)this.navigated=!0;else if(r instanceof la){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||EB(i.source)},s);this.scheduleNavigation(a,Pu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}EU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=O({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.injector.get(Ht)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(mE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=dR(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return hR(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ca(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Pu,null,r)}navigate(t,r={skipLocationChange:!1}){return bB(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},CB):r===!1?i=O({},TB):i=r,ca(t))return KA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return KA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,c=g});let h=this.pendingTasks.add();return OR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}var SB=new H("");function _E(n,...e){return Zt([{provide:Lf,multi:!0,useValue:n},[],{provide:Po,useFactory:AB,deps:[vE]},{provide:Jh,multi:!0,useFactory:RB},e.map(t=>t.\u0275providers)])}function AB(n){return n.routerState.root}function RB(){let n=P($e);return e=>{let t=n.get(bo);if(e!==t.components[0])return;let r=n.get(vE),i=n.get(NB);n.get(MB)===1&&r.initialNavigation(),n.get(PB,null,{optional:!0})?.setUpPreloading(),n.get(SB,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var NB=new H("",{factory:()=>new et}),MB=new H("",{providedIn:"root",factory:()=>1});var PB=new H("");var FR=[];var LR=()=>{};var UR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},kB=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Vf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;c||(y=64,s||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(UR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new IE;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},IE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},OB=function(n){let e=UR(n);return Vf.encodeByteArray(e,!0)},Gu=function(n){return OB(n).replace(/\./g,"")},jf=function(n){try{return Vf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Uf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var FB=()=>Uf().__FIREBASE_DEFAULTS__,LB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},VB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&jf(n[1]);return e&&JSON.parse(e)},Bf=()=>{try{return LR()||FB()||LB()||VB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},DE=n=>{var e,t;return(t=(e=Bf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},BR=n=>{let e=DE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},CE=()=>{var n;return(n=Bf())===null||n===void 0?void 0:n.config},TE=n=>{var e;return(e=Bf())===null||e===void 0?void 0:e[`_${n}`]};var xo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function mi(n){return n.endsWith(".cloudworkstations.dev")}function $f(n){return _(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function $R(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Gu(JSON.stringify(t)),Gu(JSON.stringify(s)),""].join(".")}var qu={};function jB(){let n={prod:[],emulator:[]};for(let e of Object.keys(qu))qu[e]?n.emulator.push(e):n.prod.push(e);return n}function UB(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var VR=!1;function Hf(n,e){if(typeof window>"u"||typeof document>"u"||!mi(window.location.host)||qu[n]===e||qu[n]||VR)return;qu[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=jB().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{VR=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=UB(r),y=t("text"),C=document.getElementById(y)||document.createElement("span"),M=t("learnmore"),N=document.getElementById(M)||document.createElement("a"),F=t("preprendIcon"),z=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let U=g.element;a(U),h(N,M);let oe=l();c(z,F),U.append(z,C,N,oe),document.body.appendChild(U)}o?(C.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function zR(){var n;let e=(n=Bf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function WR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KR(){let n=We();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function bE(){return!zR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SE(){return!zR()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function fa(){try{return typeof indexedDB=="object"}catch{return!1}}function QR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var BB="FirebaseError",rn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=BB,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,On.prototype.create)}},On=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?$B(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new rn(i,a,r)}};function $B(n,e){return n.replace(HB,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var HB=/\{\$([^}]+)}/g;function YR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function tr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(jR(o)&&jR(s)){if(!tr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function jR(n){return n!==null&&typeof n=="object"}function Wu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ZR(n,e){let t=new wE(n,e);return t.subscribe.bind(t)}var wE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");zB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=EE),i.error===void 0&&(i.error=EE),i.complete===void 0&&(i.complete=EE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function zB(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function EE(){}var poe=4*60*60*1e3;function bt(n){return n&&n._delegate?n._delegate:n}var Ot=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ko="[DEFAULT]";var AE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new xo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GB(e))try{this.getOrInitializeService({instanceIdentifier:ko})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ko){return this.instances.has(e)}getOptions(e=ko){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ko){return this.component?this.component.multipleInstances?e:ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function qB(n){return n===ko?void 0:n}function GB(n){return n.instantiationMode==="EAGER"}var zf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new AE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var WB=[],de=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(de||{}),KB={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},QB=de.INFO,YB={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},ZB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=YB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},nr=class{constructor(e){this.name=e,this._logLevel=QB,this._logHandler=ZB,this._userLogHandler=null,WB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var JB=(n,e)=>e.some(t=>n instanceof t),JR,XR;function XB(){return JR||(JR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e$(){return XR||(XR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var eN=new WeakMap,NE=new WeakMap,tN=new WeakMap,RE=new WeakMap,PE=new WeakMap;function t$(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(rr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&eN.set(t,n)}).catch(()=>{}),PE.set(e,n),e}function n$(n){if(NE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});NE.set(n,e)}var ME={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return NE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||tN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function nN(n){ME=n(ME)}function r$(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(qf(this),e,...t);return tN.set(r,e.sort?e.sort():[e]),rr(r)}:e$().includes(n)?function(...e){return n.apply(qf(this),e),rr(eN.get(this))}:function(...e){return rr(n.apply(qf(this),e))}}function i$(n){return typeof n=="function"?r$(n):(n instanceof IDBTransaction&&n$(n),JB(n,XB())?new Proxy(n,ME):n)}function rr(n){if(n instanceof IDBRequest)return t$(n);if(RE.has(n))return RE.get(n);let e=i$(n);return e!==n&&(RE.set(n,e),PE.set(e,n)),e}var qf=n=>PE.get(n);function iN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=rr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(rr(s.result),c.oldVersion,c.newVersion,rr(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var o$=["get","getKey","getAll","getAllKeys","count"],s$=["put","add","delete","clear"],xE=new Map;function rN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xE.get(e))return xE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=s$.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||o$.includes(t)))return;let o=function(s,...a){return _(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return xE.set(e,o),o}nN(n=>K(O({},n),{get:(e,t,r)=>rN(e,t)||n.get(e,t,r),has:(e,t)=>!!rN(e,t)||n.has(e,t)}));var OE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(a$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function a$(n){let e=n.getComponent();return e?.type==="VERSION"}var FE="@firebase/app",oN="0.13.1";var kr=new nr("@firebase/app"),c$="@firebase/app-compat",u$="@firebase/analytics-compat",l$="@firebase/analytics",d$="@firebase/app-check-compat",h$="@firebase/app-check",f$="@firebase/auth",p$="@firebase/auth-compat",g$="@firebase/database",m$="@firebase/data-connect",y$="@firebase/database-compat",v$="@firebase/functions",_$="@firebase/functions-compat",E$="@firebase/installations",I$="@firebase/installations-compat",w$="@firebase/messaging",D$="@firebase/messaging-compat",C$="@firebase/performance",T$="@firebase/performance-compat",b$="@firebase/remote-config",S$="@firebase/remote-config-compat",A$="@firebase/storage",R$="@firebase/storage-compat",N$="@firebase/firestore",M$="@firebase/ai",P$="@firebase/firestore-compat",x$="firebase",k$="11.9.0";var LE="[DEFAULT]",O$={[FE]:"fire-core",[c$]:"fire-core-compat",[l$]:"fire-analytics",[u$]:"fire-analytics-compat",[h$]:"fire-app-check",[d$]:"fire-app-check-compat",[f$]:"fire-auth",[p$]:"fire-auth-compat",[g$]:"fire-rtdb",[m$]:"fire-data-connect",[y$]:"fire-rtdb-compat",[v$]:"fire-fn",[_$]:"fire-fn-compat",[E$]:"fire-iid",[I$]:"fire-iid-compat",[w$]:"fire-fcm",[D$]:"fire-fcm-compat",[C$]:"fire-perf",[T$]:"fire-perf-compat",[b$]:"fire-rc",[S$]:"fire-rc-compat",[A$]:"fire-gcs",[R$]:"fire-gcs-compat",[N$]:"fire-fst",[P$]:"fire-fst-compat",[M$]:"fire-vertex","fire-js":"fire-js",[x$]:"fire-js-all"};var Ku=new Map,F$=new Map,VE=new Map;function sN(n,e){try{n.container.addComponent(e)}catch(t){kr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fn(n){let e=n.name;if(VE.has(e))return kr.debug(`There were multiple attempts to register component ${e}.`),!1;VE.set(e,n);for(let t of Ku.values())sN(t,n);for(let t of F$.values())sN(t,n);return!0}function pa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function on(n){return n==null?!1:n.settings!==void 0}var L$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new On("app","Firebase",L$);var jE=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ot("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}};var vi=k$;function $E(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:LE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw yi.create("bad-app-name",{appName:String(i)});if(t||(t=CE()),!t)throw yi.create("no-options");let o=Ku.get(i);if(o){if(tr(t,o.options)&&tr(r,o.config))return o;throw yi.create("duplicate-app",{appName:i})}let s=new zf(i);for(let c of VE.values())s.addComponent(c);let a=new jE(t,r,s);return Ku.set(i,a),a}function Oo(n=LE){let e=Ku.get(n);if(!e&&n===LE&&CE())return $E();if(!e)throw yi.create("no-app",{appName:n});return e}function Gf(){return Array.from(Ku.values())}function Be(n,e,t){var r;let i=(r=O$[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kr.warn(a.join(" "));return}Fn(new Ot(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var V$="firebase-heartbeat-database",j$=1,Qu="firebase-heartbeat-store",kE=null;function lN(){return kE||(kE=iN(V$,j$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Qu)}catch(t){console.warn(t)}}}}).catch(n=>{throw yi.create("idb-open",{originalErrorMessage:n.message})})),kE}function U$(n){return _(this,null,function*(){try{let t=(yield lN()).transaction(Qu),r=yield t.objectStore(Qu).get(dN(n));return yield t.done,r}catch(e){if(e instanceof rn)kr.warn(e.message);else{let t=yi.create("idb-get",{originalErrorMessage:e?.message});kr.warn(t.message)}}})}function aN(n,e){return _(this,null,function*(){try{let r=(yield lN()).transaction(Qu,"readwrite");yield r.objectStore(Qu).put(e,dN(n)),yield r.done}catch(t){if(t instanceof rn)kr.warn(t.message);else{let r=yi.create("idb-set",{originalErrorMessage:t?.message});kr.warn(r.message)}}})}function dN(n){return`${n.name}!${n.options.appId}`}var B$=1024,$$=30,UE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new BE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=cN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>$$){let s=z$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){kr.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=cN(),{heartbeatsToSend:r,unsentEntries:i}=H$(this._heartbeatsCache.heartbeats),o=Gu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return kr.warn(t),""}})}};function cN(){return new Date().toISOString().substring(0,10)}function H$(n,e=B$){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),uN(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),uN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var BE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return fa()?QR().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield U$(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return aN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return aN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function uN(n){return Gu(JSON.stringify({version:2,heartbeats:n})).length}function z$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function q$(n){Fn(new Ot("platform-logger",e=>new OE(e),"PRIVATE")),Fn(new Ot("heartbeat",e=>new UE(e),"PRIVATE")),Be(FE,oN,n),Be(FE,oN,"esm2017"),Be("fire-js","")}q$("");var G$="firebase",W$="11.9.1";Be(G$,W$,"app");function hN(n){n===void 0&&(n=P($e));let e=n.get(po);return t=>new se(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var _i=new Js("ANGULARFIRE2_VERSION");function Yu(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ma=(n,e)=>{let t=e?[e]:Gf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ga=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(ga||{}),fN=I_()&&typeof Zone<"u"?ga.WARN:ga.SILENT;var Wf=class{zone;delegate;constructor(e,t=Km){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Ei=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=P(De);this.outsideAngular=t.runOutsideAngular(()=>new Wf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Wf(typeof Zone>"u"?void 0:Zone.current,Wm))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pN=!1;function K$(n,e){!pN&&(fN>ga.SILENT||I_())&&(pN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),fN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Q$(n){let e=P(De,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Fo(n){let e=P(De,{optional:!0});return e?e.run(()=>n()):n()}var Y$=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),ft(t,()=>Fo(()=>n.apply(void 0,r)))),St=(n,e,t)=>(t||=e?ga.WARN:ga.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=P(Ei),s=P(po),a=P(nt)}catch{return K$(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Fo(()=>s.add())),i[l]=Y$(i[l],r,a));let c=Q$(()=>n.apply(this,i));return e?c instanceof se?c.pipe(Xr(o.outsideAngular),Jr(o.insideAngular),hN(a)):c instanceof Promise?Fo(()=>{let l=s.add();return new Promise((h,p)=>{c.then(g=>ft(a,()=>Fo(()=>h(g))),g=>ft(a,()=>Fo(()=>p(g)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Fo(()=>c):c instanceof se?c.pipe(Xr(o.outsideAngular),Jr(o.insideAngular)):Fo(()=>c)});var Or=class{constructor(e){return e}},Lo=class{constructor(){return Gf()}};function Z$(n){return n&&n.length===1?n[0]:new Or(Oo())}var HE=new H("angularfire2._apps"),J$={provide:Or,useFactory:Z$,deps:[[new zt,HE]]},X$={provide:Lo,deps:[[new zt,HE]]};function eH(n){return(e,t)=>{let r=t.get(li);Be("angularfire",_i.full,"core"),Be("angularfire",_i.full,"app"),Be("angular",hA.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Or(i)}}function gN(n,...e){return Zt([J$,X$,{provide:HE,useFactory:eH(n),multi:!0,deps:[De,$e,Ei,...e]}])}var mN=St($E,!0);var tH=new Map,nH={activated:!1,tokenObservers:[]},rH={initialized:!1,enabled:!1};function Ln(n){return tH.get(n)||Object.assign({},nH)}function EN(){return rH}var iH="https://content-firebaseappcheck.googleapis.com/v1";var oH="exchangeDebugToken",yN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},yse=24*60*60*1e3;var GE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new xo,this.pending.promise.catch(t=>{}),yield sH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new xo,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function sH(n){return new Promise(e=>{setTimeout(e,n)})}var aH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ii=new On("appCheck","AppCheck",aH);function IN(n){if(!Ln(n).activated)throw Ii.create("use-before-activation",{appName:n.name})}function wN(r,i){return _(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(y){throw Ii.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw Ii.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw Ii.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ii.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function DN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${iH}/projects/${t}/apps/${r}:${oH}?key=${i}`,body:{debug_token:e}}}var cH="firebase-app-check-database",uH=1,WE="firebase-app-check-store";var Kf=null;function lH(){return Kf||(Kf=new Promise((n,e)=>{try{let t=indexedDB.open(cH,uH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ii.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(WE,{keyPath:"compositeKey"})}}}catch(t){e(Ii.create("storage-open",{originalErrorMessage:t?.message}))}}),Kf)}function dH(n,e){return hH(fH(n),e)}function hH(n,e){return _(this,null,function*(){let r=(yield lH()).transaction(WE,"readwrite"),o=r.objectStore(WE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Ii.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function fH(n){return`${n.options.appId}-${n.name}`}var Zu=new nr("@firebase/app-check");function zE(n,e){return fa()?dH(n,e).catch(t=>{Zu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function CN(){return EN().enabled}function TN(){return _(this,null,function*(){let n=EN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var pH={error:"UNKNOWN_ERROR"};function gH(n){return Vf.encodeString(JSON.stringify(n),!1)}function KE(n,e=!1,t=!1){return _(this,null,function*(){let r=n.app;IN(r);let i=Ln(r),o=i.token,s;if(o&&!Ju(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Ju(l)?o=l:yield zE(r,void 0))}if(!e&&o&&Ju(o))return{token:o.token};let a=!1;if(CN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=wN(DN(r,yield TN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield zE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Zu.warn(l.message):t&&Zu.error(l),qE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Ln(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Zu.warn(l.message):t&&Zu.error(l),s=l}let c;return o?s?Ju(o)?c={token:o.token,internalError:s}:c=qE(s):(c={token:o.token},i.token=o,yield zE(r,o)):c=qE(s),a&&_H(r,c),c})}function mH(n){return _(this,null,function*(){let e=n.app;IN(e);let{provider:t}=Ln(e);if(CN()){let r=yield TN(),{token:i}=yield wN(DN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function yH(n,e,t,r){let{app:i}=n,o=Ln(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ju(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),vN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>vN(n))}function bN(n,e){let t=Ln(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function vN(n){let{app:e}=n,t=Ln(e),r=t.tokenRefresher;r||(r=vH(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vH(n){let{app:e}=n;return new GE(()=>_(null,null,function*(){let t=Ln(e),r;if(t.token?r=yield KE(n,!0):r=yield KE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Ln(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},yN.RETRIAL_MIN_WAIT,yN.RETRIAL_MAX_WAIT)}function _H(n,e){let t=Ln(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ju(n){return n.expireTimeMillis-Date.now()>0}function qE(n){return{token:gH(pH),error:n}}var QE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ln(this.app);for(let t of e)bN(this.app,t.next);return Promise.resolve()}};function EH(n,e){return new QE(n,e)}function IH(n){return{getToken:e=>KE(n,e),getLimitedUseToken:()=>mH(n),addTokenListener:e=>yH(n,"INTERNAL",e),removeTokenListener:e=>bN(n.app,e)}}var wH="@firebase/app-check",DH="0.10.0";var CH="app-check",_N="app-check-internal";function TH(){Fn(new Ot(CH,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return EH(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(_N).initialize()})),Fn(new Ot(_N,n=>{let e=n.getProvider("app-check").getImmediate();return IH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Be(wH,DH)}TH();var bH="app-check";var ya=class{constructor(){return ma(bH)}};var SH=["localhost","0.0.0.0","127.0.0.1"],Nse=typeof window<"u"&&SH.includes(window.location.hostname);function BN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var $N=BN,HN=new On("auth","Firebase",BN());var ep=new nr("@firebase/auth");function AH(n,...e){ep.logLevel<=de.WARN&&ep.warn(`Auth (${vi}): ${n}`,...e)}function Yf(n,...e){ep.logLevel<=de.ERROR&&ep.error(`Auth (${vi}): ${n}`,...e)}function Ti(n,...e){throw gI(n,...e)}function Vo(n,...e){return gI(n,...e)}function zN(n,e,t){let r=Object.assign(Object.assign({},$N()),{[e]:t});return new On("auth","Firebase",r).create(e,{appName:n.name})}function Ci(n){return zN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return HN.create(n,...e)}function Y(n,e,...t){if(!n)throw gI(e,...t)}function Fr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Yf(e),new Error(e)}function bi(n,e){n||Fr(e)}function XE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function RH(){return SN()==="http:"||SN()==="https:"}function SN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function NH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RH()||GR()||"connection"in navigator)?navigator.onLine:!0}function MH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var jo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,bi(t>e,"Short delay should be less than long delay!"),this.isMobile=HR()||WR()}get(){return NH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function mI(n,e){bi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var tp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var PH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var xH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kH=new jo(3e4,6e4);function hp(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function va(o,s,a,c){return _(this,arguments,function*(n,e,t,r,i={}){return qN(n,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Wu(Object.assign({key:n.config.apiKey},h)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:g},l);return qR()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&mi(n.emulatorConfig.host)&&(y.credentials="include"),tp.fetch()(yield WN(n,n.config.apiHost,t,p),y)}))})}function qN(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},PH),e);try{let i=new eI(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Qf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qf(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Qf(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Qf(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw zN(n,h,l);Ti(n,h)}}catch(i){if(i instanceof rn)throw i;Ti(n,"network-request-failed",{message:String(i)})}})}function GN(o,s,a,c){return _(this,arguments,function*(n,e,t,r,i={}){let l=yield va(n,e,t,r,i);return"mfaPendingCredential"in l&&Ti(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function WN(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?mI(n.config,i):`${n.config.apiScheme}://${i}`;return xH.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var eI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Vo(this.auth,"network-request-failed")),kH.get())})}};function Qf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Vo(n,e,r);return i.customData._tokenResponse=t,i}function OH(n,e){return _(this,null,function*(){return va(n,"POST","/v1/accounts:delete",e)})}function np(n,e){return _(this,null,function*(){return va(n,"POST","/v1/accounts:lookup",e)})}function Xu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function yI(n,e=!1){return _(this,null,function*(){let t=bt(n),r=yield t.getIdToken(e),i=vI(r);Y(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Xu(YE(i.auth_time)),issuedAtTime:Xu(YE(i.iat)),expirationTime:Xu(YE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function YE(n){return Number(n)*1e3}function vI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Yf("JWT malformed, contained fewer than 3 sections"),null;try{let i=jf(t);return i?JSON.parse(i):(Yf("Failed to decode base64 JWT payload"),null)}catch(i){return Yf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function AN(n){let e=vI(n);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function tl(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof rn&&FH(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function FH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var tI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var nl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xu(this.lastLoginAt),this.creationTime=Xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function rp(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield tl(n,np(t,{idToken:r}));Y(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?KN(o.providerUserInfo):[],a=LH(n.providerData,s),c=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=c?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new nl(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function _I(n){return _(this,null,function*(){let e=bt(n);yield rp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function LH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KN(n){return n.map(e=>{var{providerId:t}=e,r=Qm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function VH(n,e){return _(this,null,function*(){let t=yield qN(n,{},()=>_(null,null,function*(){let r=Wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield WN(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&mi(n.emulatorConfig.host)&&(c.credentials="include"),tp.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function jH(n,e){return _(this,null,function*(){return va(n,"POST","/v2/accounts:revokeToken",hp(n,e))})}var el=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let t=AN(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield VH(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Y(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Y(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Fr("not implemented")}};function wi(n,e){Y(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Di=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Qm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new nl(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield tl(this,this.stsTokenManager.getToken(this.auth,e));return Y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return yI(this,e)}reload(){return _I(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield rp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(on(this.auth.app))return Promise.reject(Ci(this.auth));let e=yield this.getIdToken();return yield tl(this,OH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=t.photoURL)!==null&&s!==void 0?s:void 0,M=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,F=(l=t.createdAt)!==null&&l!==void 0?l:void 0,z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:U,emailVerified:oe,isAnonymous:_e,providerData:Z,stsTokenManager:w}=t;Y(U&&w,e,"internal-error");let v=el.fromJSON(this.name,w);Y(typeof U=="string",e,"internal-error"),wi(p,e.name),wi(g,e.name),Y(typeof oe=="boolean",e,"internal-error"),Y(typeof _e=="boolean",e,"internal-error"),wi(y,e.name),wi(C,e.name),wi(M,e.name),wi(N,e.name),wi(F,e.name),wi(z,e.name);let I=new n({uid:U,auth:e,email:g,emailVerified:oe,displayName:p,isAnonymous:_e,photoURL:C,phoneNumber:y,tenantId:M,stsTokenManager:v,createdAt:F,lastLoginAt:z});return Z&&Array.isArray(Z)&&(I.providerData=Z.map(D=>Object.assign({},D))),N&&(I._redirectEventId=N),I}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new el;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield rp(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];Y(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?KN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new el;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new nl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var RN=new Map;function Lr(n){bi(n instanceof Function,"Expected a class definition");let e=RN.get(n);return e?(bi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,RN.set(n,e),e)}var UH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),nI=UH;function Zf(n,e,t){return`firebase:${n}:${e}:${t}`}var ip=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Zf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Zf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield np(this.auth,{idToken:e}).catch(()=>{});return t?Di._fromGetAccountInfoResponse(this.auth,t,e):null}return Di._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(Lr(nI),e,r);let i=(yield Promise.all(t.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Lr(nI),s=Zf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield np(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield Di._fromGetAccountInfoResponse(e,g,h)}else p=Di._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function NN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eM(e))return"Blackberry";if(tM(e))return"Webos";if(YN(e))return"Safari";if((e.includes("chrome/")||ZN(e))&&!e.includes("edge/"))return"Chrome";if(XN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function QN(n=We()){return/firefox\//i.test(n)}function YN(n=We()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZN(n=We()){return/crios\//i.test(n)}function JN(n=We()){return/iemobile/i.test(n)}function XN(n=We()){return/android/i.test(n)}function eM(n=We()){return/blackberry/i.test(n)}function tM(n=We()){return/webos/i.test(n)}function EI(n=We()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function BH(n=We()){var e;return EI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $H(){return KR()&&document.documentMode===10}function nM(n=We()){return EI(n)||XN(n)||tM(n)||eM(n)||/windows phone/i.test(n)||JN(n)}function rM(n,e=[]){let t;switch(n){case"Browser":t=NN(We());break;case"Worker":t=`${NN(We())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vi}/${r}`}var rI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function HH(t){return _(this,arguments,function*(n,e={}){return va(n,"GET","/v2/passwordPolicy",hp(n,e))})}var zH=6,iI=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:zH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var oI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new op(this),this.idTokenSubscription=new op(this),this.beforeStateQueue=new rI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield ip.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield np(this,{idToken:e}),r=yield Di._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(on(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield rp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=MH()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(on(this.app))return Promise.reject(Ci(this));let t=e?bt(e):null;return t&&Y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return on(this.app)?Promise.reject(Ci(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return on(this.app)?Promise.reject(Ci(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Lr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield HH(this),t=new iI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new On("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield jH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Lr(e)||this._popupRedirectResolver;Y(t,this,"argument-error"),this.redirectPersistenceManager=yield ip.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;if(on(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&AH(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function fp(n){return bt(n)}var op=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZR(t=>this.observer=t)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var II={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qH(n){II=n}function GH(n){return II.loadJS(n)}function WH(){return II.gapiScript}function iM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function wI(n,e){let t=pa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(tr(o,e??{}))return i;Ti(i,"already-initialized")}return t.initialize({options:e})}function KH(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Lr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function DI(n,e,t){let r=fp(n);Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=oM(e),{host:s,port:a}=QH(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Y(tr(l,r.config.emulator)&&tr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,mi(s)?($f(`${o}//${s}${c}`),Hf("Auth",!0)):i||YH()}function oM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QH(n){let e=oM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:MN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:MN(s)}}}function MN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function YH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var sp=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,t){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}};function ZE(n,e){return _(this,null,function*(){return GN(n,"POST","/v1/accounts:signInWithIdp",hp(n,e))})}var ap=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var sI=class extends ap{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function ZH(n,e){return _(this,null,function*(){return GN(n,"POST","/v1/accounts:signUp",hp(n,e))})}var Uo=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield Di._fromIdTokenResponse(e,r,i),s=PN(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=PN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function PN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}function CI(n){return _(this,null,function*(){var e;if(on(n.app))return Promise.reject(Ci(n));let t=fp(n);if(yield t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Uo({user:t.currentUser,providerId:null,operationType:"signIn"});let r=yield ZH(t,{returnSecureToken:!0}),i=yield Uo._fromIdTokenResponse(t,"signIn",r,!0);return yield t._updateCurrentUser(i.user),i})}var aI=class n extends rn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function sM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?aI._fromErrorAndOperation(n,o,e,r):o})}function JH(n,e,t=!1){return _(this,null,function*(){let r=yield tl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Uo._forOperation(n,"link",r)})}function XH(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(on(r.app))return Promise.reject(Ci(r));let i="reauthenticate";try{let o=yield tl(n,sM(r,i,e,n),t);Y(o.idToken,r,"internal-error");let s=vI(o.idToken);Y(s,r,"internal-error");let{sub:a}=s;return Y(n.uid===a,r,"user-mismatch"),Uo._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ti(r,"user-mismatch"),o}})}function e4(n,e,t=!1){return _(this,null,function*(){if(on(n.app))return Promise.reject(Ci(n));let r="signIn",i=yield sM(n,r,e),o=yield Uo._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function TI(n,e,t,r){return bt(n).onIdTokenChanged(e,t,r)}function bI(n,e,t){return bt(n).beforeAuthStateChanged(e,t)}function il(n,e,t,r){return bt(n).onAuthStateChanged(e,t,r)}var cp="__sak";var up=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cp,"1"),this.storage.removeItem(cp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var t4=1e3,n4=10,r4=(()=>{class n extends up{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);$H()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,n4):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},t4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield pr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield pr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield pr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),aM=r4;var i4=(()=>{class n extends up{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),SI=i4;function o4(n){return Promise.all(n.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var s4=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield o4(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function cM(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var cI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=cM("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function ir(){return window}function a4(n){ir().location.href=n}function uM(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}function c4(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function u4(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function l4(){return uM()?self:null}var lM="firebaseLocalStorageDb",d4=1,lp="firebaseLocalStorage",dM="fbase_key",Bo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function pp(n,e){return n.transaction([lp],e?"readwrite":"readonly").objectStore(lp)}function h4(){let n=indexedDB.deleteDatabase(lM);return new Bo(n).toPromise()}function uI(){let n=indexedDB.open(lM,d4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(lp,{keyPath:dM})}catch(i){t(i)}}),n.addEventListener("success",()=>_(null,null,function*(){let r=n.result;r.objectStoreNames.contains(lp)?e(r):(r.close(),yield h4(),e(yield uI()))}))})}function xN(n,e,t){return _(this,null,function*(){let r=pp(n,!0).put({[dM]:e,value:t});return new Bo(r).toPromise()})}function f4(n,e){return _(this,null,function*(){let t=pp(n,!1).get(e),r=yield new Bo(t).toPromise();return r===void 0?null:r.value})}function kN(n,e){let t=pp(n,!0).delete(e);return new Bo(t).toPromise()}var p4=800,g4=3,m4=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield uI(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>g4)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return uM()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=s4._getInstance(l4()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield c4(),!this.activeServiceWorker)return;this.sender=new cI(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||u4()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield uI();return yield xN(t,cp,"1"),yield kN(t,cp),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>xN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>f4(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>kN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let s=pp(o,!1).getAll();return new Bo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),p4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),hM=m4;var Use=iM("rcb"),Bse=new jo(3e4,6e4);function y4(n,e){return e?Lr(e):(Y(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var rl=class extends sp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ZE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ZE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ZE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function v4(n){return e4(n.auth,new rl(n),n.bypassAuthState)}function _4(n){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),XH(t,new rl(n),n.bypassAuthState)}function E4(n){return _(this,null,function*(){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),JH(t,new rl(n),n.bypassAuthState)})}var lI=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return v4;case"linkViaPopup":case"linkViaRedirect":return E4;case"reauthViaPopup":case"reauthViaRedirect":return _4;default:Ti(this.auth,"internal-error")}}resolve(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var $se=new jo(2e3,1e4);var I4="pendingRedirect",Jf=new Map,dI=class n extends lI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Jf.get(this.auth._key());if(!e){try{let r=(yield w4(this.resolver,this.auth))?yield pr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Jf.set(this.auth._key(),e)}return this.bypassAuthState||Jf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return pr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,pr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function w4(n,e){return _(this,null,function*(){let t=T4(e),r=C4(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function D4(n,e){Jf.set(n._key(),e)}function C4(n){return Lr(n._redirectPersistence)}function T4(n){return Zf(I4,n.config.apiKey,n.name)}function b4(n,e,t=!1){return _(this,null,function*(){if(on(n.app))return Promise.reject(Ci(n));let r=fp(n),i=y4(r,e),s=yield new dI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var S4=10*60*1e3,hI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!fM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Vo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S4&&this.cachedEventUids.clear(),this.cachedEventUids.has(ON(e))}saveEventToCache(e){this.cachedEventUids.add(ON(e)),this.lastProcessedEventTime=Date.now()}};function ON(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function fM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function A4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fM(n);default:return!1}}function R4(t){return _(this,arguments,function*(n,e={}){return va(n,"GET","/v1/projects",e)})}var N4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,M4=/^https?/;function P4(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield R4(n);for(let t of e)try{if(x4(t))return}catch{}Ti(n,"unauthorized-domain")})}function x4(n){let e=XE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!M4.test(t))return!1;if(N4.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var k4=new jo(3e4,6e4);function FN(){let n=ir().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function O4(n){return new Promise((e,t)=>{var r,i,o;function s(){FN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FN(),t(Vo(n,"network-request-failed"))},timeout:k4.get()})}if(!((i=(r=ir().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=ir().gapi)===null||o===void 0)&&o.load)s();else{let a=iM("iframefcb");return ir()[a]=()=>{gapi.load?s():t(Vo(n,"network-request-failed"))},GH(`${WH()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Xf=null,e})}var Xf=null;function F4(n){return Xf=Xf||O4(n),Xf}var L4=new jo(5e3,15e3),V4="__/auth/iframe",j4="emulator/auth/iframe",U4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $4(n){let e=n.config;Y(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?mI(e,j4):`https://${n.config.authDomain}/${V4}`,r={apiKey:e.apiKey,appName:n.name,v:vi},i=B4.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Wu(r).slice(1)}`}function H4(n){return _(this,null,function*(){let e=yield F4(n),t=ir().gapi;return Y(t,n,"internal-error"),e.open({where:document.body,url:$4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U4,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Vo(n,"network-request-failed"),a=ir().setTimeout(()=>{o(s)},L4.get());function c(){ir().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var z4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q4=500,G4=600,W4="_blank",K4="http://localhost",dp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Q4(n,e,t,r=q4,i=G4){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},z4),{width:r.toString(),height:i.toString(),top:o,left:s}),l=We().toLowerCase();t&&(a=ZN(l)?W4:t),QN(l)&&(e=e||K4,c.scrollbars="yes");let h=Object.entries(c).reduce((g,[y,C])=>`${g}${y}=${C},`,"");if(BH(l)&&a!=="_self")return Y4(e||"",a),new dp(null);let p=window.open(e||"",a,h);Y(p,n,"popup-blocked");try{p.focus()}catch{}return new dp(p)}function Y4(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Z4="__/auth/handler",J4="emulator/auth/handler",X4=encodeURIComponent("fac");function LN(n,e,t,r,i,o){return _(this,null,function*(){Y(n.config.authDomain,n,"auth-domain-config-required"),Y(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:vi,eventId:i};if(e instanceof ap){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",YR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof sI){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),l=c?`#${X4}=${encodeURIComponent(c)}`:"";return`${ez(n)}?${Wu(a).slice(1)}${l}`})}function ez({config:n}){return n.emulator?mI(n,J4):`https://${n.authDomain}/${Z4}`}var JE="webStorageSupport",fI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SI,this._completeRedirectFn=b4,this._overrideRedirectResult=D4}_openPopup(e,t,r,i){return _(this,null,function*(){var o;bi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield LN(e,t,r,XE(),i);return Q4(e,s,cM())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield LN(e,t,r,XE(),i);return a4(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(bi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield H4(e),r=new hI(e);return t.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(JE,{type:JE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[JE];s!==void 0&&t(!!s),Ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=P4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nM()||YN()||EI()}},pM=fI;var VN="@firebase/auth",jN="1.10.7";var pI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function tz(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nz(n){Fn(new Ot("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Y(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rM(n)},l=new oI(r,i,o,c);return KH(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Fn(new Ot("auth-internal",e=>{let t=fp(e.getProvider("auth").getImmediate());return(r=>new pI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Be(VN,jN,tz(n)),Be(VN,jN,"esm2017")}var rz=5*60,iz=TE("authIdTokenMaxAge")||rz,UN=null,oz=n=>e=>_(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>iz)return;let i=t?.token;UN!==i&&(UN=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function AI(n=Oo()){let e=pa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=wI(n,{popupRedirectResolver:pM,persistence:[hM,aM,SI]}),r=TE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=oz(o.toString());bI(t,s,()=>s(t.currentUser)),TI(t,a=>s(a))}}let i=DE("auth");return i&&DI(t,`http://${i}`),t}function sz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}qH({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Vo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",sz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nz("Browser");var gM="auth",Vn=class{constructor(e){return e}},ol=class{constructor(){return ma(gM)}};var RI=new H("angularfire2.auth-instances");function Zz(n,e){let t=Yu(gM,n,e);return t&&new Vn(t)}function Jz(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Vn(r)}}var Xz={provide:ol,deps:[[new zt,RI]]},e3={provide:Vn,useFactory:Zz,deps:[[new zt,RI],Or]};function mM(n,...e){return Be("angularfire",_i.full,"auth"),Zt([e3,Xz,{provide:RI,useFactory:Jz(n),multi:!0,deps:[De,$e,Ei,Lo,[new zt,ya],...e]}])}var yM=St(AI,!0);var vM=St(il,!0);var _M=St(CI,!0,2);var EM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IM={};var Vr,NI;(function(){var n;function e(w,v){function I(){}I.prototype=v.prototype,w.D=v.prototype,w.prototype=new I,w.prototype.constructor=w,w.C=function(D,T,S){for(var E=Array(arguments.length-2),dr=2;dr<arguments.length;dr++)E[dr-2]=arguments[dr];return v.prototype[T].apply(D,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,I){I||(I=0);var D=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)D[T]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(T=0;16>T;++T)D[T]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=w.g[0],I=w.g[1],T=w.g[2];var S=w.g[3],E=v+(S^I&(T^S))+D[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=S+(T^v&(I^T))+D[1]+3905402710&4294967295,S=v+(E<<12&4294967295|E>>>20),E=T+(I^S&(v^I))+D[2]+606105819&4294967295,T=S+(E<<17&4294967295|E>>>15),E=I+(v^T&(S^v))+D[3]+3250441966&4294967295,I=T+(E<<22&4294967295|E>>>10),E=v+(S^I&(T^S))+D[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(T^v&(I^T))+D[5]+1200080426&4294967295,S=v+(E<<12&4294967295|E>>>20),E=T+(I^S&(v^I))+D[6]+2821735955&4294967295,T=S+(E<<17&4294967295|E>>>15),E=I+(v^T&(S^v))+D[7]+4249261313&4294967295,I=T+(E<<22&4294967295|E>>>10),E=v+(S^I&(T^S))+D[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(T^v&(I^T))+D[9]+2336552879&4294967295,S=v+(E<<12&4294967295|E>>>20),E=T+(I^S&(v^I))+D[10]+4294925233&4294967295,T=S+(E<<17&4294967295|E>>>15),E=I+(v^T&(S^v))+D[11]+2304563134&4294967295,I=T+(E<<22&4294967295|E>>>10),E=v+(S^I&(T^S))+D[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(T^v&(I^T))+D[13]+4254626195&4294967295,S=v+(E<<12&4294967295|E>>>20),E=T+(I^S&(v^I))+D[14]+2792965006&4294967295,T=S+(E<<17&4294967295|E>>>15),E=I+(v^T&(S^v))+D[15]+1236535329&4294967295,I=T+(E<<22&4294967295|E>>>10),E=v+(T^S&(I^T))+D[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^T&(v^I))+D[6]+3225465664&4294967295,S=v+(E<<9&4294967295|E>>>23),E=T+(v^I&(S^v))+D[11]+643717713&4294967295,T=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(T^S))+D[0]+3921069994&4294967295,I=T+(E<<20&4294967295|E>>>12),E=v+(T^S&(I^T))+D[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^T&(v^I))+D[10]+38016083&4294967295,S=v+(E<<9&4294967295|E>>>23),E=T+(v^I&(S^v))+D[15]+3634488961&4294967295,T=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(T^S))+D[4]+3889429448&4294967295,I=T+(E<<20&4294967295|E>>>12),E=v+(T^S&(I^T))+D[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^T&(v^I))+D[14]+3275163606&4294967295,S=v+(E<<9&4294967295|E>>>23),E=T+(v^I&(S^v))+D[3]+4107603335&4294967295,T=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(T^S))+D[8]+1163531501&4294967295,I=T+(E<<20&4294967295|E>>>12),E=v+(T^S&(I^T))+D[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^T&(v^I))+D[2]+4243563512&4294967295,S=v+(E<<9&4294967295|E>>>23),E=T+(v^I&(S^v))+D[7]+1735328473&4294967295,T=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(T^S))+D[12]+2368359562&4294967295,I=T+(E<<20&4294967295|E>>>12),E=v+(I^T^S)+D[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^T)+D[8]+2272392833&4294967295,S=v+(E<<11&4294967295|E>>>21),E=T+(S^v^I)+D[11]+1839030562&4294967295,T=S+(E<<16&4294967295|E>>>16),E=I+(T^S^v)+D[14]+4259657740&4294967295,I=T+(E<<23&4294967295|E>>>9),E=v+(I^T^S)+D[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^T)+D[4]+1272893353&4294967295,S=v+(E<<11&4294967295|E>>>21),E=T+(S^v^I)+D[7]+4139469664&4294967295,T=S+(E<<16&4294967295|E>>>16),E=I+(T^S^v)+D[10]+3200236656&4294967295,I=T+(E<<23&4294967295|E>>>9),E=v+(I^T^S)+D[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^T)+D[0]+3936430074&4294967295,S=v+(E<<11&4294967295|E>>>21),E=T+(S^v^I)+D[3]+3572445317&4294967295,T=S+(E<<16&4294967295|E>>>16),E=I+(T^S^v)+D[6]+76029189&4294967295,I=T+(E<<23&4294967295|E>>>9),E=v+(I^T^S)+D[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^T)+D[12]+3873151461&4294967295,S=v+(E<<11&4294967295|E>>>21),E=T+(S^v^I)+D[15]+530742520&4294967295,T=S+(E<<16&4294967295|E>>>16),E=I+(T^S^v)+D[2]+3299628645&4294967295,I=T+(E<<23&4294967295|E>>>9),E=v+(T^(I|~S))+D[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~T))+D[7]+1126891415&4294967295,S=v+(E<<10&4294967295|E>>>22),E=T+(v^(S|~I))+D[14]+2878612391&4294967295,T=S+(E<<15&4294967295|E>>>17),E=I+(S^(T|~v))+D[5]+4237533241&4294967295,I=T+(E<<21&4294967295|E>>>11),E=v+(T^(I|~S))+D[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~T))+D[3]+2399980690&4294967295,S=v+(E<<10&4294967295|E>>>22),E=T+(v^(S|~I))+D[10]+4293915773&4294967295,T=S+(E<<15&4294967295|E>>>17),E=I+(S^(T|~v))+D[1]+2240044497&4294967295,I=T+(E<<21&4294967295|E>>>11),E=v+(T^(I|~S))+D[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~T))+D[15]+4264355552&4294967295,S=v+(E<<10&4294967295|E>>>22),E=T+(v^(S|~I))+D[6]+2734768916&4294967295,T=S+(E<<15&4294967295|E>>>17),E=I+(S^(T|~v))+D[13]+1309151649&4294967295,I=T+(E<<21&4294967295|E>>>11),E=v+(T^(I|~S))+D[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~T))+D[11]+3174756917&4294967295,S=v+(E<<10&4294967295|E>>>22),E=T+(v^(S|~I))+D[2]+718787259&4294967295,T=S+(E<<15&4294967295|E>>>17),E=I+(S^(T|~v))+D[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(T+(E<<21&4294967295|E>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+S&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var I=v-this.blockSize,D=this.B,T=this.h,S=0;S<v;){if(T==0)for(;S<=I;)i(this,w,S),S+=this.blockSize;if(typeof w=="string"){for(;S<v;)if(D[T++]=w.charCodeAt(S++),T==this.blockSize){i(this,D),T=0;break}}else for(;S<v;)if(D[T++]=w[S++],T==this.blockSize){i(this,D),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var I=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=I&255,I/=256;for(this.u(w),w=Array(16),v=I=0;4>v;++v)for(var D=0;32>D;D+=8)w[I++]=this.g[v]>>>D&255;return w};function o(w,v){var I=a;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=v(w)}function s(w,v){this.h=v;for(var I=[],D=!0,T=w.length-1;0<=T;T--){var S=w[T]|0;D&&S==v||(I[T]=S,D=!1)}this.g=I}var a={};function c(w){return-128<=w&&128>w?o(w,function(v){return new s([v|0],0>v?-1:0)}):new s([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return N(l(-w));for(var v=[],I=1,D=0;w>=I;D++)v[D]=w/I|0,I*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return N(h(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),D=p,T=0;T<w.length;T+=8){var S=Math.min(8,w.length-T),E=parseInt(w.substring(T,T+S),v);8>S?(S=l(Math.pow(v,S)),D=D.j(S).add(l(E))):(D=D.j(I),D=D.add(l(E)))}return D}var p=c(0),g=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(M(this))return-N(this).m();for(var w=0,v=1,I=0;I<this.g.length;I++){var D=this.i(I);w+=(0<=D?D:4294967296+D)*v,v*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(C(this))return"0";if(M(this))return"-"+N(this).toString(w);for(var v=l(Math.pow(w,6)),I=this,D="";;){var T=oe(I,v).g;I=F(I,T.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(w);if(I=T,C(I))return S+D;for(;6>S.length;)S="0"+S;D=S+D}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function C(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function M(w){return w.h==-1}n.l=function(w){return w=F(this,w),M(w)?-1:C(w)?0:1};function N(w){for(var v=w.g.length,I=[],D=0;D<v;D++)I[D]=~w.g[D];return new s(I,~w.h).add(g)}n.abs=function(){return M(this)?N(this):this},n.add=function(w){for(var v=Math.max(this.g.length,w.g.length),I=[],D=0,T=0;T<=v;T++){var S=D+(this.i(T)&65535)+(w.i(T)&65535),E=(S>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);D=E>>>16,S&=65535,E&=65535,I[T]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function F(w,v){return w.add(N(v))}n.j=function(w){if(C(this)||C(w))return p;if(M(this))return M(w)?N(this).j(N(w)):N(N(this).j(w));if(M(w))return N(this.j(N(w)));if(0>this.l(y)&&0>w.l(y))return l(this.m()*w.m());for(var v=this.g.length+w.g.length,I=[],D=0;D<2*v;D++)I[D]=0;for(D=0;D<this.g.length;D++)for(var T=0;T<w.g.length;T++){var S=this.i(D)>>>16,E=this.i(D)&65535,dr=w.i(T)>>>16,cc=w.i(T)&65535;I[2*D+2*T]+=E*cc,z(I,2*D+2*T),I[2*D+2*T+1]+=S*cc,z(I,2*D+2*T+1),I[2*D+2*T+1]+=E*dr,z(I,2*D+2*T+1),I[2*D+2*T+2]+=S*dr,z(I,2*D+2*T+2)}for(D=0;D<v;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=v;D<2*v;D++)I[D]=0;return new s(I,0)};function z(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function U(w,v){this.g=w,this.h=v}function oe(w,v){if(C(v))throw Error("division by zero");if(C(w))return new U(p,p);if(M(w))return v=oe(N(w),v),new U(N(v.g),N(v.h));if(M(v))return v=oe(w,N(v)),new U(N(v.g),v.h);if(30<w.g.length){if(M(w)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,D=v;0>=D.l(w);)I=_e(I),D=_e(D);var T=Z(I,1),S=Z(D,1);for(D=Z(D,2),I=Z(I,2);!C(D);){var E=S.add(D);0>=E.l(w)&&(T=T.add(I),S=E),D=Z(D,1),I=Z(I,1)}return v=F(w,T.j(v)),new U(T,v)}for(T=p;0<=w.l(v);){for(I=Math.max(1,Math.floor(w.m()/v.m())),D=Math.ceil(Math.log(I)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),S=l(I),E=S.j(v);M(E)||0<E.l(w);)I-=D,S=l(I),E=S.j(v);C(S)&&(S=g),T=T.add(S),w=F(w,E)}return new U(T,w)}n.A=function(w){return oe(this,w).h},n.and=function(w){for(var v=Math.max(this.g.length,w.g.length),I=[],D=0;D<v;D++)I[D]=this.i(D)&w.i(D);return new s(I,this.h&w.h)},n.or=function(w){for(var v=Math.max(this.g.length,w.g.length),I=[],D=0;D<v;D++)I[D]=this.i(D)|w.i(D);return new s(I,this.h|w.h)},n.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),I=[],D=0;D<v;D++)I[D]=this.i(D)^w.i(D);return new s(I,this.h^w.h)};function _e(w){for(var v=w.g.length+1,I=[],D=0;D<v;D++)I[D]=w.i(D)<<1|w.i(D-1)>>>31;return new s(I,w.h)}function Z(w,v){var I=v>>5;v%=32;for(var D=w.g.length-I,T=[],S=0;S<D;S++)T[S]=0<v?w.i(S+I)>>>v|w.i(S+I+1)<<32-v:w.i(S+I);return new s(T,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,NI=IM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Vr=IM.Integer=s}).apply(typeof EM<"u"?EM:typeof self<"u"?self:typeof window<"u"?window:{});var gp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jr={};var MI,t3,_a,PI,sl,mp,xI,kI,OI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof gp=="object"&&gp];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var b=u[m];if(!(b in f))break e;f=f[b]}u=u[u.length-1],m=f[u],d=d(m),d!=m&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,m=!1,b={next:function(){if(!m&&f<u.length){var R=f++;return{value:d(R,u[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),u.apply(d,b)}}return function(){return u.apply(d,arguments)}}function g(u,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function C(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(m,b,R){for(var L=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)L[Ae-2]=arguments[Ae];return d.prototype[b].apply(m,L)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=u[m];return f}return[]}function N(u,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(c(m)){let b=u.length||0,R=m.length||0;u.length=b+R;for(let L=0;L<R;L++)u[b+L]=m[L]}else u.push(m)}}class F{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(u){return/^[\s\xa0]*$/.test(u)}function U(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var _e=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function Z(u,d,f){for(let m in u)d.call(f,u[m],m,u)}function w(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function v(u){let d={};for(let f in u)d[f]=u[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,d){let f,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(f in m)u[f]=m[f];for(let R=0;R<I.length;R++)f=I[R],Object.prototype.hasOwnProperty.call(m,f)&&(u[f]=m[f])}}function T(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function S(u){a.setTimeout(()=>{throw u},0)}function E(){var u=im;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class dr{constructor(){this.h=this.g=null}add(d,f){let m=cc.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var cc=new F(()=>new gO,u=>u.reset());class gO{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let uc,lc=!1,im=new dr,TC=()=>{let u=a.Promise.resolve(void 0);uc=()=>{u.then(mO)}};var mO=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(f){S(f)}var d=cc;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}lc=!1};function qr(){this.s=this.s,this.C=this.C}qr.prototype.s=!1,qr.prototype.ma=function(){this.s||(this.s=!0,this.N())},qr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function vt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}vt.prototype.h=function(){this.defaultPrevented=!0};var yO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function dc(u,d){if(vt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(_e){e:{try{oe(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:vO[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&dc.aa.h.call(this)}}C(dc,vt);var vO={2:"touch",3:"pen",4:"mouse"};dc.prototype.h=function(){dc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var hc="closure_listenable_"+(1e6*Math.random()|0),_O=0;function EO(u,d,f,m,b){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=b,this.key=++_O,this.da=this.fa=!1}function ed(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function td(u){this.src=u,this.g={},this.h=0}td.prototype.add=function(u,d,f,m,b){var R=u.toString();u=this.g[R],u||(u=this.g[R]=[],this.h++);var L=sm(u,d,m,b);return-1<L?(d=u[L],f||(d.fa=!1)):(d=new EO(d,this.src,R,!!m,b),d.fa=f,u.push(d)),d};function om(u,d){var f=d.type;if(f in u.g){var m=u.g[f],b=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=b)&&Array.prototype.splice.call(m,b,1),R&&(ed(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function sm(u,d,f,m){for(var b=0;b<u.length;++b){var R=u[b];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==m)return b}return-1}var am="closure_lm_"+(1e6*Math.random()|0),cm={};function bC(u,d,f,m,b){if(m&&m.once)return AC(u,d,f,m,b);if(Array.isArray(d)){for(var R=0;R<d.length;R++)bC(u,d[R],f,m,b);return null}return f=hm(f),u&&u[hc]?u.K(d,f,l(m)?!!m.capture:!!m,b):SC(u,d,f,!1,m,b)}function SC(u,d,f,m,b,R){if(!d)throw Error("Invalid event type");var L=l(b)?!!b.capture:!!b,Ae=lm(u);if(Ae||(u[am]=Ae=new td(u)),f=Ae.add(d,f,m,L,R),f.proxy)return f;if(m=IO(),f.proxy=m,m.src=u,m.listener=f,u.addEventListener)yO||(b=L),b===void 0&&(b=!1),u.addEventListener(d.toString(),m,b);else if(u.attachEvent)u.attachEvent(NC(d.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function IO(){function u(f){return d.call(u.src,u.listener,f)}let d=wO;return u}function AC(u,d,f,m,b){if(Array.isArray(d)){for(var R=0;R<d.length;R++)AC(u,d[R],f,m,b);return null}return f=hm(f),u&&u[hc]?u.L(d,f,l(m)?!!m.capture:!!m,b):SC(u,d,f,!0,m,b)}function RC(u,d,f,m,b){if(Array.isArray(d))for(var R=0;R<d.length;R++)RC(u,d[R],f,m,b);else m=l(m)?!!m.capture:!!m,f=hm(f),u&&u[hc]?(u=u.i,d=String(d).toString(),d in u.g&&(R=u.g[d],f=sm(R,f,m,b),-1<f&&(ed(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete u.g[d],u.h--)))):u&&(u=lm(u))&&(d=u.g[d.toString()],u=-1,d&&(u=sm(d,f,m,b)),(f=-1<u?d[u]:null)&&um(f))}function um(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[hc])om(d.i,u);else{var f=u.type,m=u.proxy;d.removeEventListener?d.removeEventListener(f,m,u.capture):d.detachEvent?d.detachEvent(NC(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=lm(d))?(om(f,u),f.h==0&&(f.src=null,d[am]=null)):ed(u)}}}function NC(u){return u in cm?cm[u]:cm[u]="on"+u}function wO(u,d){if(u.da)u=!0;else{d=new dc(d,this);var f=u.listener,m=u.ha||u.src;u.fa&&um(u),u=f.call(m,d)}return u}function lm(u){return u=u[am],u instanceof td?u:null}var dm="__closure_events_fn_"+(1e9*Math.random()>>>0);function hm(u){return typeof u=="function"?u:(u[dm]||(u[dm]=function(d){return u.handleEvent(d)}),u[dm])}function _t(){qr.call(this),this.i=new td(this),this.M=this,this.F=null}C(_t,qr),_t.prototype[hc]=!0,_t.prototype.removeEventListener=function(u,d,f,m){RC(this,u,d,f,m)};function Nt(u,d){var f,m=u.F;if(m)for(f=[];m;m=m.F)f.push(m);if(u=u.M,m=d.type||d,typeof d=="string")d=new vt(d,u);else if(d instanceof vt)d.target=d.target||u;else{var b=d;d=new vt(m,u),D(d,b)}if(b=!0,f)for(var R=f.length-1;0<=R;R--){var L=d.g=f[R];b=nd(L,m,!0,d)&&b}if(L=d.g=u,b=nd(L,m,!0,d)&&b,b=nd(L,m,!1,d)&&b,f)for(R=0;R<f.length;R++)L=d.g=f[R],b=nd(L,m,!1,d)&&b}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],m=0;m<f.length;m++)ed(f[m]);delete u.g[d],u.h--}}this.F=null},_t.prototype.K=function(u,d,f,m){return this.i.add(String(u),d,!1,f,m)},_t.prototype.L=function(u,d,f,m){return this.i.add(String(u),d,!0,f,m)};function nd(u,d,f,m){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,R=0;R<d.length;++R){var L=d[R];if(L&&!L.da&&L.capture==f){var Ae=L.listener,ut=L.ha||L.src;L.fa&&om(u.i,L),b=Ae.call(ut,m)!==!1&&b}}return b&&!m.defaultPrevented}function MC(u,d,f){if(typeof u=="function")f&&(u=g(u,f));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function PC(u){u.g=MC(()=>{u.g=null,u.i&&(u.i=!1,PC(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class DO extends qr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:PC(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fc(u){qr.call(this),this.h=u,this.g={}}C(fc,qr);var xC=[];function kC(u){Z(u.g,function(d,f){this.g.hasOwnProperty(f)&&um(d)},u),u.g={}}fc.prototype.N=function(){fc.aa.N.call(this),kC(this)},fc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fm=a.JSON.stringify,CO=a.JSON.parse,TO=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function pm(){}pm.prototype.h=null;function OC(u){return u.h||(u.h=u.i())}function FC(){}var pc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gm(){vt.call(this,"d")}C(gm,vt);function mm(){vt.call(this,"c")}C(mm,vt);var zi={},LC=null;function rd(){return LC=LC||new _t}zi.La="serverreachability";function VC(u){vt.call(this,zi.La,u)}C(VC,vt);function gc(u){let d=rd();Nt(d,new VC(d))}zi.STAT_EVENT="statevent";function jC(u,d){vt.call(this,zi.STAT_EVENT,u),this.stat=d}C(jC,vt);function Mt(u){let d=rd();Nt(d,new jC(d,u))}zi.Ma="timingevent";function UC(u,d){vt.call(this,zi.Ma,u),this.size=d}C(UC,vt);function mc(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function yc(){this.g=!0}yc.prototype.xa=function(){this.g=!1};function bO(u,d,f,m,b,R){u.info(function(){if(u.g)if(R)for(var L="",Ae=R.split("&"),ut=0;ut<Ae.length;ut++){var Ee=Ae[ut].split("=");if(1<Ee.length){var Et=Ee[0];Ee=Ee[1];var It=Et.split("_");L=2<=It.length&&It[1]=="type"?L+(Et+"="+Ee+"&"):L+(Et+"=redacted&")}}else L=null;else L=R;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+f+`
`+L})}function SO(u,d,f,m,b,R,L){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+f+`
`+R+" "+L})}function fs(u,d,f,m){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+RO(u,f)+(m?" "+m:"")})}function AO(u,d){u.info(function(){return"TIMEOUT: "+d})}yc.prototype.info=function(){};function RO(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var m=f[u];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var R=b[0];if(R!="noop"&&R!="stop"&&R!="close")for(var L=1;L<b.length;L++)b[L]=""}}}}return fm(f)}catch{return d}}var id={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},BC={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ym;function od(){}C(od,pm),od.prototype.g=function(){return new XMLHttpRequest},od.prototype.i=function(){return{}},ym=new od;function Gr(u,d,f,m){this.j=u,this.i=d,this.l=f,this.R=m||1,this.U=new fc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $C}function $C(){this.i=null,this.g="",this.h=!1}var HC={},vm={};function _m(u,d,f){u.L=1,u.v=ud(hr(d)),u.m=f,u.P=!0,zC(u,null)}function zC(u,d){u.F=Date.now(),sd(u),u.A=hr(u.v);var f=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),iT(f.i,"t",m),u.C=0,f=u.j.J,u.h=new $C,u.g=wT(u.j,f?d:null,!u.m),0<u.O&&(u.M=new DO(g(u.Y,u,u.g),u.O)),d=u.U,f=u.g,m=u.ca;var b="readystatechange";Array.isArray(b)||(b&&(xC[0]=b.toString()),b=xC);for(var R=0;R<b.length;R++){var L=bC(f,b[R],m||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),gc(),bO(u.i,u.u,u.A,u.l,u.R,u.m)}Gr.prototype.ca=function(u){u=u.target;let d=this.M;d&&fr(u)==3?d.j():this.Y(u)},Gr.prototype.Y=function(u){try{if(u==this.g)e:{let It=fr(this.g);var d=this.g.Ba();let ms=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||dT(this.g)))){this.J||It!=4||d==7||(d==8||0>=ms?gc(3):gc(2)),Em(this);var f=this.g.Z();this.X=f;t:if(qC(this)){var m=dT(this.g);u="";var b=m.length,R=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qi(this),vc(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,u+=this.h.i.decode(m[d],{stream:!(R&&d==b-1)});m.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,SO(this.i,this.u,this.A,this.l,this.R,It,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,ut=this.g;if((Ae=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Ae)){var Ee=Ae;break t}}Ee=null}if(f=Ee)fs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Im(this,f);else{this.o=!1,this.s=3,Mt(12),qi(this),vc(this);break e}}if(this.P){f=!0;let Tn;for(;!this.J&&this.C<L.length;)if(Tn=NO(this,L),Tn==vm){It==4&&(this.s=4,Mt(14),f=!1),fs(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==HC){this.s=4,Mt(15),fs(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else fs(this.i,this.l,Tn,null),Im(this,Tn);if(qC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||L.length!=0||this.h.h||(this.s=1,Mt(16),f=!1),this.o=this.o&&f,!f)fs(this.i,this.l,L,"[Invalid Chunked Response]"),qi(this),vc(this);else if(0<L.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Sm(Et),Et.M=!0,Mt(11))}}else fs(this.i,this.l,L,null),Im(this,L);It==4&&qi(this),this.o&&!this.J&&(It==4?vT(this.j,this):(this.o=!1,sd(this)))}else WO(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),qi(this),vc(this)}}}catch{}finally{}};function qC(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function NO(u,d){var f=u.C,m=d.indexOf(`
`,f);return m==-1?vm:(f=Number(d.substring(f,m)),isNaN(f)?HC:(m+=1,m+f>d.length?vm:(d=d.slice(m,m+f),u.C=m+f,d)))}Gr.prototype.cancel=function(){this.J=!0,qi(this)};function sd(u){u.S=Date.now()+u.I,GC(u,u.I)}function GC(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=mc(g(u.ba,u),d)}function Em(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Gr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(AO(this.i,this.A),this.L!=2&&(gc(),Mt(17)),qi(this),this.s=2,vc(this)):GC(this,this.S-u)};function vc(u){u.j.G==0||u.J||vT(u.j,u)}function qi(u){Em(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,kC(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Im(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||wm(f.h,u))){if(!u.K&&wm(f.h,u)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)pd(f),hd(f);else break e;bm(f),Mt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=mc(g(f.Za,f),6e3));if(1>=QC(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Wi(f,11)}else if((u.K||f.g==u)&&pd(f),!z(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let Ee=b[d];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];let Et=Ee[3];Et!=null&&(f.la=Et,f.j.info("VER="+f.la));let It=Ee[4];It!=null&&(f.Aa=It,f.j.info("SVER="+f.Aa));let ms=Ee[5];ms!=null&&typeof ms=="number"&&0<ms&&(m=1.5*ms,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Tn=u.g;if(Tn){let md=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(md){var R=m.h;R.g||md.indexOf("spdy")==-1&&md.indexOf("quic")==-1&&md.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Dm(R,R.h),R.h=null))}if(m.D){let Am=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Am&&(m.ya=Am,xe(m.I,m.D,Am))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var L=u;if(m.qa=IT(m,m.J?m.ia:null,m.W),L.K){YC(m.h,L);var Ae=L,ut=m.L;ut&&(Ae.I=ut),Ae.B&&(Em(Ae),sd(Ae)),m.g=L}else mT(m);0<f.i.length&&fd(f)}else Ee[0]!="stop"&&Ee[0]!="close"||Wi(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Wi(f,7):Tm(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}gc(4)}catch{}}var MO=class{constructor(u,d){this.g=u,this.map=d}};function WC(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function KC(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function QC(u){return u.h?1:u.g?u.g.size:0}function wm(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Dm(u,d){u.g?u.g.add(d):u.h=d}function YC(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}WC.prototype.cancel=function(){if(this.i=ZC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function ZC(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function PO(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,m=0;m<f;m++)d.push(u[m]);return d}d=[],f=0;for(m in u)d[f++]=u[m];return d}function xO(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let m in u)d[f++]=m;return d}}}function JC(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=xO(u),m=PO(u),b=m.length,R=0;R<b;R++)d.call(void 0,m[R],f&&f[R],u)}var XC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kO(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var m=u[f].indexOf("="),b=null;if(0<=m){var R=u[f].substring(0,m);b=u[f].substring(m+1)}else R=u[f];d(R,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Gi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Gi){this.h=u.h,ad(this,u.j),this.o=u.o,this.g=u.g,cd(this,u.s),this.l=u.l;var d=u.i,f=new Ic;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),eT(this,f),this.m=u.m}else u&&(d=String(u).match(XC))?(this.h=!1,ad(this,d[1]||"",!0),this.o=_c(d[2]||""),this.g=_c(d[3]||"",!0),cd(this,d[4]),this.l=_c(d[5]||"",!0),eT(this,d[6]||"",!0),this.m=_c(d[7]||"")):(this.h=!1,this.i=new Ic(null,this.h))}Gi.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Ec(d,tT,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Ec(d,tT,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Ec(f,f.charAt(0)=="/"?LO:FO,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Ec(f,jO)),u.join("")};function hr(u){return new Gi(u)}function ad(u,d,f){u.j=f?_c(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function cd(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function eT(u,d,f){d instanceof Ic?(u.i=d,UO(u.i,u.h)):(f||(d=Ec(d,VO)),u.i=new Ic(d,u.h))}function xe(u,d,f){u.i.set(d,f)}function ud(u){return xe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function _c(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ec(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,OO),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function OO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var tT=/[#\/\?@]/g,FO=/[#\?:]/g,LO=/[#\?]/g,VO=/[#\?@]/g,jO=/#/g;function Ic(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Wr(u){u.g||(u.g=new Map,u.h=0,u.i&&kO(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Ic.prototype,n.add=function(u,d){Wr(this),this.i=null,u=ps(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function nT(u,d){Wr(u),d=ps(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function rT(u,d){return Wr(u),d=ps(u,d),u.g.has(d)}n.forEach=function(u,d){Wr(this),this.g.forEach(function(f,m){f.forEach(function(b){u.call(d,b,m,this)},this)},this)},n.na=function(){Wr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let b=u[m];for(let R=0;R<b.length;R++)f.push(d[m])}return f},n.V=function(u){Wr(this);let d=[];if(typeof u=="string")rT(this,u)&&(d=d.concat(this.g.get(ps(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return Wr(this),this.i=null,u=ps(this,u),rT(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function iT(u,d,f){nT(u,d),0<f.length&&(u.i=null,u.g.set(ps(u,d),M(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let R=encodeURIComponent(String(m)),L=this.V(m);for(m=0;m<L.length;m++){var b=R;L[m]!==""&&(b+="="+encodeURIComponent(String(L[m]))),u.push(b)}}return this.i=u.join("&")};function ps(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function UO(u,d){d&&!u.j&&(Wr(u),u.i=null,u.g.forEach(function(f,m){var b=m.toLowerCase();m!=b&&(nT(this,m),iT(this,b,f))},u)),u.j=d}function BO(u,d){let f=new yc;if(a.Image){let m=new Image;m.onload=y(Kr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Kr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Kr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Kr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else d(!1)}function $O(u,d){let f=new yc,m=new AbortController,b=setTimeout(()=>{m.abort(),Kr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:m.signal}).then(R=>{clearTimeout(b),R.ok?Kr(f,"TestPingServer: ok",!0,d):Kr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Kr(f,"TestPingServer: error",!1,d)})}function Kr(u,d,f,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(f)}catch{}}function HO(){this.g=new TO}function zO(u,d,f){let m=f||"";try{JC(u,function(b,R){let L=b;l(b)&&(L=fm(b)),d.push(m+R+"="+encodeURIComponent(L))})}catch(b){throw d.push(m+"type="+encodeURIComponent("_badmap")),b}}function wc(u){this.l=u.Ub||null,this.j=u.eb||!1}C(wc,pm),wc.prototype.g=function(){return new ld(this.l,this.j)},wc.prototype.i=function(u){return function(){return u}}({});function ld(u,d){_t.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ld,_t),n=ld.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Cc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Dc(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Cc(this)),this.g&&(this.readyState=3,Cc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oT(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function oT(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Dc(this):Cc(this),this.readyState==3&&oT(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Dc(this))},n.Qa=function(u){this.g&&(this.response=u,Dc(this))},n.ga=function(){this.g&&Dc(this)};function Dc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Cc(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function Cc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ld.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function sT(u){let d="";return Z(u,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Cm(u,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=sT(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):xe(u,d,f))}function Ve(u){_t.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ve,_t);var qO=/^https?$/i,GO=["POST","PUT"];n=Ve.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ym.g(),this.v=this.o?OC(this.o):OC(ym),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(R){aT(this,R);return}if(u=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)f.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),b=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(GO,d,void 0))||m||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,L]of f)this.g.setRequestHeader(R,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lT(this),this.u=!0,this.g.send(u),this.u=!1}catch(R){aT(this,R)}};function aT(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,cT(u),dd(u)}function cT(u){u.A||(u.A=!0,Nt(u,"complete"),Nt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Nt(this,"complete"),Nt(this,"abort"),dd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dd(this,!0)),Ve.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?uT(this):this.bb())},n.bb=function(){uT(this)};function uT(u){if(u.h&&typeof s<"u"&&(!u.v[1]||fr(u)!=4||u.Z()!=2)){if(u.u&&fr(u)==4)MC(u.Ea,0,u);else if(Nt(u,"readystatechange"),fr(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=L===0){var b=String(u.D).match(XC)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!qO.test(b?b.toLowerCase():"")}f=m}if(f)Nt(u,"complete"),Nt(u,"success");else{u.m=6;try{var R=2<fr(u)?u.g.statusText:""}catch{R=""}u.l=R+" ["+u.Z()+"]",cT(u)}}finally{dd(u)}}}}function dd(u,d){if(u.g){lT(u);let f=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||Nt(u,"ready");try{f.onreadystatechange=m}catch{}}}function lT(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function fr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),CO(d)}};function dT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function WO(u){let d={};u=(u.g&&2<=fr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(z(u[m]))continue;var f=T(u[m]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[b]||[];d[b]=R,R.push(f)}w(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tc(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function hT(u){this.Aa=0,this.i=[],this.j=new yc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tc("baseRetryDelayMs",5e3,u),this.cb=Tc("retryDelaySeedMs",1e4,u),this.Wa=Tc("forwardChannelMaxRetries",2,u),this.wa=Tc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new WC(u&&u.concurrentRequestLimit),this.Da=new HO,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=hT.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,m){Mt(0),this.W=u,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=IT(this,null,this.W),fd(this)};function Tm(u){if(fT(u),u.G==3){var d=u.U++,f=hr(u.I);if(xe(f,"SID",u.K),xe(f,"RID",d),xe(f,"TYPE","terminate"),bc(u,f),d=new Gr(u,u.j,d),d.L=2,d.v=ud(hr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=wT(d.j,null),d.g.ea(d.v)),d.F=Date.now(),sd(d)}ET(u)}function hd(u){u.g&&(Sm(u),u.g.cancel(),u.g=null)}function fT(u){hd(u),u.u&&(a.clearTimeout(u.u),u.u=null),pd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function fd(u){if(!KC(u.h)&&!u.s){u.s=!0;var d=u.Ga;uc||TC(),lc||(uc(),lc=!0),im.add(d,u),u.B=0}}function KO(u,d){return QC(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=mc(g(u.Ga,u,d),_T(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let b=new Gr(this,this.j,u),R=this.o;if(this.S&&(R?(R=v(R),D(R,this.S)):R=this.S),this.m!==null||this.O||(b.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=gT(this,b,d),f=hr(this.I),xe(f,"RID",u),xe(f,"CVER",22),this.D&&xe(f,"X-HTTP-Session-Id",this.D),bc(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(sT(R)))+"&"+d:this.m&&Cm(f,this.m,R)),Dm(this.h,b),this.Ua&&xe(f,"TYPE","init"),this.P?(xe(f,"$req",d),xe(f,"SID","null"),b.T=!0,_m(b,f,null)):_m(b,f,d),this.G=2}}else this.G==3&&(u?pT(this,u):this.i.length==0||KC(this.h)||pT(this))};function pT(u,d){var f;d?f=d.l:f=u.U++;let m=hr(u.I);xe(m,"SID",u.K),xe(m,"RID",f),xe(m,"AID",u.T),bc(u,m),u.m&&u.o&&Cm(m,u.m,u.o),f=new Gr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=gT(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Dm(u.h,f),_m(f,m,d)}function bc(u,d){u.H&&Z(u.H,function(f,m){xe(d,m,f)}),u.l&&JC({},function(f,m){xe(d,m,f)})}function gT(u,d,f){f=Math.min(u.i.length,f);var m=u.l?g(u.l.Na,u.l,u):null;e:{var b=u.i;let R=-1;for(;;){let L=["count="+f];R==-1?0<f?(R=b[0].g,L.push("ofs="+R)):R=0:L.push("ofs="+R);let Ae=!0;for(let ut=0;ut<f;ut++){let Ee=b[ut].g,Et=b[ut].map;if(Ee-=R,0>Ee)R=Math.max(0,b[ut].g-100),Ae=!1;else try{zO(Et,L,"req"+Ee+"_")}catch{m&&m(Et)}}if(Ae){m=L.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,m}function mT(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;uc||TC(),lc||(uc(),lc=!0),im.add(d,u),u.v=0}}function bm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=mc(g(u.Fa,u),_T(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,yT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=mc(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),hd(this),yT(this))};function Sm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function yT(u){u.g=new Gr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=hr(u.qa);xe(d,"RID","rpc"),xe(d,"SID",u.K),xe(d,"AID",u.T),xe(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&xe(d,"TO",u.ja),xe(d,"TYPE","xmlhttp"),bc(u,d),u.m&&u.o&&Cm(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=ud(hr(d)),f.m=null,f.P=!0,zC(f,u)}n.Za=function(){this.C!=null&&(this.C=null,hd(this),bm(this),Mt(19))};function pd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function vT(u,d){var f=null;if(u.g==d){pd(u),Sm(u),u.g=null;var m=2}else if(wm(u.h,d))f=d.D,YC(u.h,d),m=1;else return;if(u.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=u.B;m=rd(),Nt(m,new UC(m,f)),fd(u)}else mT(u);else if(b=d.s,b==3||b==0&&0<d.X||!(m==1&&KO(u,d)||m==2&&bm(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),b){case 1:Wi(u,5);break;case 4:Wi(u,10);break;case 3:Wi(u,6);break;default:Wi(u,2)}}}function _T(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function Wi(u,d){if(u.j.info("Error code "+d),d==2){var f=g(u.fb,u),m=u.Xa;let b=!m;m=new Gi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ad(m,"https"),ud(m),b?BO(m.toString(),f):$O(m.toString(),f)}else Mt(2);u.G=0,u.l&&u.l.sa(d),ET(u),fT(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function ET(u){if(u.G=0,u.ka=[],u.l){let d=ZC(u.h);(d.length!=0||u.i.length!=0)&&(N(u.ka,d),N(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function IT(u,d,f){var m=f instanceof Gi?hr(f):new Gi(f);if(m.g!="")d&&(m.g=d+"."+m.g),cd(m,m.s);else{var b=a.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var R=new Gi(null);m&&ad(R,m),d&&(R.g=d),b&&cd(R,b),f&&(R.l=f),m=R}return f=u.D,d=u.ya,f&&d&&xe(m,f,d),xe(m,"VER",u.la),bc(u,m),m}function wT(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Ve(new wc({eb:f})):new Ve(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function DT(){}n=DT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function gd(){}gd.prototype.g=function(u,d){return new Kt(u,d)};function Kt(u,d){_t.call(this),this.g=new hT(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!z(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new gs(this)}C(Kt,_t),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Tm(this.g)},Kt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=fm(u),u=f);d.i.push(new MO(d.Ya++,u)),d.G==3&&fd(d)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Tm(this.g),delete this.g,Kt.aa.N.call(this)};function CT(u){gm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}C(CT,gm);function TT(){mm.call(this),this.status=1}C(TT,mm);function gs(u){this.g=u}C(gs,DT),gs.prototype.ua=function(){Nt(this.g,"a")},gs.prototype.ta=function(u){Nt(this.g,new CT(u))},gs.prototype.sa=function(u){Nt(this.g,new TT)},gs.prototype.ra=function(){Nt(this.g,"b")},gd.prototype.createWebChannel=gd.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,OI=jr.createWebChannelTransport=function(){return new gd},kI=jr.getStatEventTarget=function(){return rd()},xI=jr.Event=zi,mp=jr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},id.NO_ERROR=0,id.TIMEOUT=8,id.HTTP_ERROR=6,sl=jr.ErrorCode=id,BC.COMPLETE="complete",PI=jr.EventType=BC,FC.EventType=pc,pc.OPEN="a",pc.CLOSE="b",pc.ERROR="c",pc.MESSAGE="d",_t.prototype.listen=_t.prototype.K,_a=jr.WebChannel=FC,t3=jr.FetchXmlHttpFactory=wc,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,MI=jr.XhrIo=Ve}).apply(typeof gp<"u"?gp:typeof self<"u"?self:typeof window<"u"?window:{});var wM="@firebase/firestore",DM="4.7.17";var rt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");var nc="11.9.0";var ns=new nr("@firebase/firestore");function ba(){return ns.logLevel}function k(n,...e){if(ns.logLevel<=de.DEBUG){let t=e.map(kD);ns.debug(`Firestore (${nc}): ${n}`,...t)}}function Ft(n,...e){if(ns.logLevel<=de.ERROR){let t=e.map(kD);ns.error(`Firestore (${nc}): ${n}`,...t)}}function rs(n,...e){if(ns.logLevel<=de.WARN){let t=e.map(kD);ns.warn(`Firestore (${nc}): ${n}`,...t)}}function kD(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function $(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,OP(n,r,t)}function OP(n,e,t){let r=`FIRESTORE (${nc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ft(r),new Error(r)}function G(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||OP(e,i,r)}function X(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends rn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $n=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Np=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},$I=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rt.UNAUTHENTICATED))}shutdown(){}},HI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},zI=class{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){G(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new $n;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new $n,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new $n)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(G(typeof r.accessToken=="string",31837,{l:r}),new Np(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return G(e===null||typeof e=="string",2055,{h:e}),new rt(e)}},qI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},GI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new qI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Mp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},WI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,on(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){G(this.o===void 0,3512);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Mp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(G(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Mp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function n3(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function FP(){return new TextEncoder}var Pp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=n3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Q(n,e){return n<e?-1:n>e?1:0}function KI(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Q(r,i);{let o=FP(),s=r3(o.encode(CM(n,t)),o.encode(CM(e,t)));return s!==0?s:Q(r,i)}}t+=r>65535?2:1}return Q(n.length,e.length)}function CM(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function r3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Q(n[t],e[t]);return Q(n.length,e.length)}function Oa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function LP(n){return n+"\0"}var TM=-62135596800,bM=1e6,Fe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*bM);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<TM)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bM}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-TM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var W=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Fe(0,0))}static max(){return new n(new Fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var SM="__name__",xp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&$(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&$(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Q(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):KI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vr.fromString(e.substring(4,e.length-2))}},Ne=class n extends xp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},i3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,it=class n extends xp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return i3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===SM}static keyField(){return new n([SM])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new B(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var V=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ne.fromString(e))}static fromName(e){return new n(Ne.fromString(e).popFirst(5))}static empty(){return new n(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ne(e.slice()))}};var El=-1,Fa=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function QI(n){return n.fields.find(e=>e.kind===2)}function Ho(n){return n.fields.filter(e=>e.kind!==2)}Fa.UNKNOWN_ID=-1;var Pa=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Il=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Cn.min())}};function o3(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=W.fromTimestamp(r===1e9?new Fe(t+1,0):new Fe(t,r));return new Cn(i,V.empty(),e)}function VP(n){return new Cn(n.readTime,n.key,El)}var Cn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(W.min(),V.empty(),El)}static max(){return new n(W.max(),V.empty(),El)}};function OD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=V.comparator(n.documentKey,e.documentKey),t!==0?t:Q(n.largestBatchId,e.largestBatchId))}var jP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ls(n){return _(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==jP)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var A=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var sn="SimpleDb",Op=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Jo(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new $n,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Jo(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=FD(r.target.error);this.S.reject(new Jo(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(k(sn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new ZI(t)}},La=class n{static delete(e){return k(sn,"Removing database:",e),qo(Uf().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!fa())return!1;if(n.F())return!0;let e=We(),t=n.M(e),r=0<t&&t<10,i=UP(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,n.M(We())===12.2&&Ft("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return _(this,null,function*(){return this.db||(k(sn,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Jo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new B(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new B(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Jo(e,s))},i.onupgradeneeded=o=>{k(sn,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{k(sn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db})}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return _(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.k(e);let a=Op.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.v(),l)).catch(l=>(a.abort(l),A.reject(l))).toPromise();return c.catch(()=>{}),yield a.D,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(k(sn,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function UP(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var YI=class{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return qo(this.K.delete())}},Jo=class extends B{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Bi(n){return n.name==="IndexedDbTransactionError"}var ZI=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k(sn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(k(sn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qo(r)}add(e){return k(sn,"ADD",this.store.name,e,e),qo(this.store.add(e))}get(e){return qo(this.store.get(e)).next(t=>(t===void 0&&(t=null),k(sn,"GET",this.store.name,e,t),t))}delete(e){return k(sn,"DELETE",this.store.name,e),qo(this.store.delete(e))}count(){return k(sn,"COUNT",this.store.name),qo(this.store.count())}J(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new A((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.Y(o,(a,c)=>{s.push(c)}).next(()=>s)}}Z(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new A((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}X(e,t){k(sn,"DELETE ALL",this.store.name);let r=this.options(e,t);r.ee=!1;let i=this.cursor(r);return this.Y(i,(o,s,a)=>a.delete())}te(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.Y(i,t)}ne(e){let t=this.cursor({});return new A((r,i)=>{t.onerror=o=>{let s=FD(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}Y(e,t){let r=[];return new A((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new YI(a),l=t(a.primaryKey,a.value,c);if(l instanceof A){let h=l.catch(p=>(c.done(),A.reject(p)));r.push(h)}c.isDone?i():c.j===null?a.continue():a.continue(c.j)}}).next(()=>A.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function qo(n){return new A((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=FD(r.target.error);t(i)}})}var AM=!1;function FD(n){let e=La.M(We());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AM||(AM=!0,setTimeout(()=>{throw r},0)),r}}return n}var fl="IndexBackfiller",JI=class{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){k(fl,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>_(this,null,function*(){this.task=null;try{let t=yield this.re.se();k(fl,`Documents written: ${t}`)}catch(t){Bi(t)?k(fl,"Ignoring IndexedDB error during index backfill: ",t):yield ls(t)}yield this.ie(6e4)}))}},XI=class{constructor(e,t){this.localStore=e,this.persistence=t}se(e=50){return _(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))})}oe(e,t){let r=new Set,i=t,o=!0;return A.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k(fl,`Processing collection: ${s}`),this._e(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ae(i,o)).next(a=>(k(fl,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}ae(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=VP(o);OD(s,r)>0&&(r=s)}),new Cn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Un=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),Xo=-1;function Mg(n){return n==null}function wl(n){return n===0&&1/n==-1/0}function s3(n){return typeof n=="number"&&Number.isInteger(n)&&!wl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Fp="";function Rt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=RM(e)),e=a3(n.get(t),e);return RM(e)}function a3(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Fp:t+="";break;default:t+=o}}return t}function RM(n){return n+Fp+""}function or(n){let e=n.length;if(G(e>=2,64408,{path:n}),e===2)return G(n.charAt(0)===Fp&&n.charAt(1)==="",56145,{path:n}),Ne.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(Fp,o);switch((s<0||s>t)&&$(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:$(61167,{path:n})}o=s+2}return new Ne(r)}var zo="remoteDocuments",$l="owner",Ea="owner",Dl="mutationQueues",c3="userId",jn="mutations",NM="batchId",Qo="userMutationsIndex",MM=["userId","batchId"];function wp(n,e){return[n,Rt(e)]}function BP(n,e,t){return[n,Rt(e),t]}var u3={},Va="documentMutations",Lp="remoteDocumentsV14",l3=["prefixPath","collectionGroup","readTime","documentId"],Dp="documentKeyIndex",d3=["prefixPath","collectionGroup","documentId"],$P="collectionGroupIndex",h3=["collectionGroup","readTime","prefixPath","documentId"],Cl="remoteDocumentGlobal",ew="remoteDocumentGlobalKey",ja="targets",HP="queryTargetsIndex",f3=["canonicalId","targetId"],Ua="targetDocuments",p3=["targetId","path"],LD="documentTargetsIndex",g3=["path","targetId"],Vp="targetGlobalKey",es="targetGlobal",Tl="collectionParents",m3=["collectionId","parent"],Ba="clientMetadata",y3="clientId",Pg="bundles",v3="bundleId",xg="namedQueries",_3="name",VD="indexConfiguration",E3="indexId",tw="collectionGroupIndex",I3="collectionGroup",pl="indexState",w3=["indexId","uid"],zP="sequenceNumberIndex",D3=["uid","sequenceNumber"],gl="indexEntries",C3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qP="documentKeyIndex",T3=["indexId","uid","orderedDocumentKey"],kg="documentOverlays",b3=["userId","collectionPath","documentId"],nw="collectionPathOverlayIndex",S3=["userId","collectionPath","largestBatchId"],GP="collectionGroupOverlayIndex",A3=["userId","collectionGroup","largestBatchId"],jD="globals",R3="name",WP=[Dl,jn,Va,zo,ja,$l,es,Ua,Ba,Cl,Tl,Pg,xg],N3=[...WP,kg],KP=[Dl,jn,Va,Lp,ja,$l,es,Ua,Ba,Cl,Tl,Pg,xg,kg],QP=KP,UD=[...QP,VD,pl,gl],M3=UD,YP=[...UD,jD],P3=YP;var bl=class extends kp{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}};function st(n,e){let t=X(n);return La.N(t.he,e)}function PM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ds(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Le=class n{constructor(e,t){this.comparator=e,this.root=t||ar.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ar.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ma(this.root,e,this.comparator,!0)}},Ma=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ar=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw $(27949);return e+(this.isRed()?0:1)}};ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1;ar.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new ar(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Se=class n{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jp(this.data.getIterator())}getIteratorFrom(e){return new jp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},jp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ia(n){return n.hasNext()?n.getNext():void 0}var Bn=class n{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new n([])}unionWith(e){let t=new Se(it.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Up=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ot=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Up("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ot.EMPTY_BYTE_STRING=new ot("");var x3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(n){if(G(!!n,39018),typeof n=="string"){let e=0,t=x3.exec(n);if(G(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(n.seconds),nanos:Oe(n.nanos)}}function Oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $r(n){return typeof n=="string"?ot.fromBase64String(n):ot.fromUint8Array(n)}var JP="server_timestamp",XP="__type__",ex="__previous_value__",tx="__local_write_time__";function BD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[XP])===null||t===void 0?void 0:t.stringValue)===JP}function Og(n){let e=n.mapValue.fields[ex];return BD(e)?Og(e):e}function Sl(n){let e=Br(n.mapValue.fields[tx].timestampValue);return new Fe(e.seconds,e.nanos)}var rw=class{constructor(e,t,r,i,o,s,a,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h}},Bp="(default)",$a=class n{constructor(e,t){this.projectId=e,this.database=t||Bp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Bp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var $D="__type__",nx="__max__",Mi={mapValue:{fields:{__type__:{stringValue:nx}}}},HD="__vector__",Ha="value",Cp={nullValue:"NULL_VALUE"};function xi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?BD(n)?4:rx(n)?9007199254740991:Fg(n)?10:11:$(28295,{value:n})}function ur(n,e){if(n===e)return!0;let t=xi(n);if(t!==xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sl(n).isEqual(Sl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Br(i.timestampValue),a=Br(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return $r(i.bytesValue).isEqual($r(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Oe(i.geoPointValue.latitude)===Oe(o.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Oe(i.integerValue)===Oe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Oe(i.doubleValue),a=Oe(o.doubleValue);return s===a?wl(s)===wl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Oa(n.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(PM(s)!==PM(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!ur(s[c],a[c])))return!1;return!0}(n,e);default:return $(52216,{left:n})}}function Al(n,e){return(n.values||[]).find(t=>ur(t,e))!==void 0}function ki(n,e){if(n===e)return 0;let t=xi(n),r=xi(e);if(t!==r)return Q(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Q(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Oe(o.integerValue||o.doubleValue),c=Oe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return xM(n.timestampValue,e.timestampValue);case 4:return xM(Sl(n),Sl(e));case 5:return KI(n.stringValue,e.stringValue);case 6:return function(o,s){let a=$r(o),c=$r(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=Q(a[l],c[l]);if(h!==0)return h}return Q(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Q(Oe(o.latitude),Oe(s.latitude));return a!==0?a:Q(Oe(o.longitude),Oe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return kM(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[Ha])===null||a===void 0?void 0:a.arrayValue,C=(c=g[Ha])===null||c===void 0?void 0:c.arrayValue,M=Q(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:kM(y,C)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Mi.mapValue&&s===Mi.mapValue)return 0;if(o===Mi.mapValue)return 1;if(s===Mi.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let g=KI(c[p],h[p]);if(g!==0)return g;let y=ki(a[c[p]],l[h[p]]);if(y!==0)return y}return Q(c.length,h.length)}(n.mapValue,e.mapValue);default:throw $(23264,{Pe:t})}}function xM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Q(n,e);let t=Br(n),r=Br(e),i=Q(t.seconds,r.seconds);return i!==0?i:Q(t.nanos,r.nanos)}function kM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ki(t[i],r[i]);if(o)return o}return Q(t.length,r.length)}function za(n){return iw(n)}function iw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Br(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return $r(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return V.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=iw(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${iw(t.fields[s])}`;return i+"}"}(n.mapValue):$(61005,{value:n})}function Tp(n){switch(xi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Og(n);return e?16+Tp(e):16;case 5:return 2*n.stringValue.length;case 6:return $r(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Tp(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ds(r.fields,(o,s)=>{i+=o.length+Tp(s)}),i}(n.mapValue);default:throw $(13486,{value:n})}}function zD(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ow(n){return!!n&&"integerValue"in n}function Rl(n){return!!n&&"arrayValue"in n}function OM(n){return!!n&&"nullValue"in n}function FM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bp(n){return!!n&&"mapValue"in n}function Fg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[$D])===null||t===void 0?void 0:t.stringValue)===HD}function ml(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ds(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ml(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ml(n.arrayValue.values[t]);return e}return Object.assign({},n)}function rx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nx}var ix={mapValue:{fields:{[$D]:{stringValue:HD},[Ha]:{arrayValue:{}}}}};function k3(n){return"nullValue"in n?Cp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zD($a.empty(),V.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Fg(n)?ix:{mapValue:{}}:$(35942,{value:n})}function O3(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zD($a.empty(),V.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?ix:"mapValue"in n?Fg(n)?{mapValue:{}}:Mi:$(61959,{value:n})}function LM(n,e){let t=ki(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function VM(n,e){let t=ki(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var an=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ml(t)}setAll(e){let t=it.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ml(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());bp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ds(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ml(this.value))}};function ox(n){let e=[];return ds(n.fields,(t,r)=>{let i=new it([t]);if(bp(r)){let o=ox(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Bn(e)}var mt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,W.min(),W.min(),W.min(),an.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,W.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,W.min(),W.min(),an.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,W.min(),W.min(),an.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Oi=class{constructor(e,t){this.position=e,this.inclusive=t}};function jM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=V.comparator(V.fromName(s.referenceValue),t.key):r=ki(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function UM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ur(n.position[t],e.position[t]))return!1;return!0}var qa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function F3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var $p=class{},me=class n extends $p{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new cw(e,t,r):t==="array-contains"?new dw(e,r):t==="in"?new Hp(e,r):t==="not-in"?new hw(e,r):t==="array-contains-any"?new fw(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new uw(e,r):new lw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ki(t,this.value)):t!==null&&xi(this.value)===xi(t)&&this.matchesComparison(ki(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},be=class n extends $p{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return Ga(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function Ga(n){return n.op==="and"}function sw(n){return n.op==="or"}function qD(n){return sx(n)&&Ga(n)}function sx(n){for(let e of n.filters)if(e instanceof be)return!1;return!0}function aw(n){if(n instanceof me)return n.field.canonicalString()+n.op.toString()+za(n.value);if(qD(n))return n.filters.map(e=>aw(e)).join(",");{let e=n.filters.map(t=>aw(t)).join(",");return`${n.op}(${e})`}}function ax(n,e){return n instanceof me?function(r,i){return i instanceof me&&r.op===i.op&&r.field.isEqual(i.field)&&ur(r.value,i.value)}(n,e):n instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&ax(s,i.filters[a]),!0):!1}(n,e):void $(19439)}function cx(n,e){let t=n.filters.concat(e);return be.create(t,n.op)}function ux(n){return n instanceof me?function(t){return`${t.field.canonicalString()} ${t.op} ${za(t.value)}`}(n):n instanceof be?function(t){return t.op.toString()+" {"+t.getFilters().map(ux).join(" ,")+"}"}(n):"Filter"}var cw=class extends me{constructor(e,t,r){super(e,t,r),this.key=V.fromName(r.referenceValue)}matches(e){let t=V.comparator(e.key,this.key);return this.matchesComparison(t)}},uw=class extends me{constructor(e,t){super(e,"in",t),this.keys=lx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},lw=class extends me{constructor(e,t){super(e,"not-in",t),this.keys=lx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function lx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>V.fromName(r.referenceValue))}var dw=class extends me{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Rl(t)&&Al(t.arrayValue,this.value)}},Hp=class extends me{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Al(this.value.arrayValue,t)}},hw=class extends me{constructor(e,t){super(e,"not-in",t)}matches(e){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Al(this.value.arrayValue,t)}},fw=class extends me{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Rl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Al(this.value.arrayValue,r))}};var pw=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function gw(n,e=null,t=[],r=[],i=null,o=null,s=null){return new pw(n,e,t,r,i,o,s)}function is(n){let e=X(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>aw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Mg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>za(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>za(r)).join(",")),e.Ie=t}return e.Ie}function Hl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!F3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ax(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UM(n.startAt,e.startAt)&&UM(n.endAt,e.endAt)}function zp(n){return V.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function qp(n,e){return n.filters.filter(t=>t instanceof me&&t.field.isEqual(e))}function BM(n,e,t){let r=Cp,i=!0;for(let o of qp(n,e)){let s=Cp,a=!0;switch(o.op){case"<":case"<=":s=k3(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Cp}LM({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];LM({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function $M(n,e,t){let r=Mi,i=!0;for(let o of qp(n,e)){let s=Mi,a=!0;switch(o.op){case">=":case">":s=O3(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Mi}VM({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];VM({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Wa=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function L3(n,e,t,r,i,o,s,a){return new Wa(n,e,t,r,i,o,s,a)}function Lg(n){return new Wa(n)}function HM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function V3(n){return n.collectionGroup!==null}function yl(n){let e=X(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Se(it.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new qa(o,r))}),t.has(it.keyField().canonicalString())||e.Ee.push(new qa(it.keyField(),r))}return e.Ee}function Dn(n){let e=X(n);return e.de||(e.de=j3(e,yl(n))),e.de}function j3(n,e){if(n.limitType==="F")return gw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new qa(i.field,o)});let t=n.endAt?new Oi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Oi(n.startAt.position,n.startAt.inclusive):null;return gw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function mw(n,e,t){return new Wa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vg(n,e){return Hl(Dn(n),Dn(e))&&n.limitType===e.limitType}function dx(n){return`${is(Dn(n))}|lt:${n.limitType}`}function Sa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ux(i)).join(", ")}]`),Mg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>za(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>za(i)).join(",")),`Target(${r})`}(Dn(n))}; limitType=${n.limitType})`}function zl(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):V.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of yl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=jM(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,yl(r),i)||r.endAt&&!function(s,a,c){let l=jM(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,yl(r),i))}(n,e)}function U3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hx(n){return(e,t)=>{let r=!1;for(let i of yl(n)){let o=B3(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function B3(n,e,t){let r=n.field.isKeyField()?V.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?ki(c,l):$(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return $(19790,{direction:n.dir})}}var Hn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return ZP(this.inner)}size(){return this.innerSize}};var $3=new Le(V.comparator);function cn(){return $3}var fx=new Le(V.comparator);function dl(...n){let e=fx;for(let t of n)e=e.insert(t.key,t);return e}function px(n){let e=fx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function sr(){return vl()}function gx(){return vl()}function vl(){return new Hn(n=>n.toString(),(n,e)=>n.isEqual(e))}var H3=new Le(V.comparator),z3=new Se(V.comparator);function ae(...n){let e=z3;for(let t of n)e=e.add(t);return e}var q3=new Se(Q);function G3(){return q3}function GD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wl(e)?"-0":e}}function mx(n){return{integerValue:""+n}}function W3(n,e){return s3(e)?mx(e):GD(n,e)}var Ka=class{constructor(){this._=void 0}};function K3(n,e,t){return n instanceof os?function(i,o){let s={fields:{[XP]:{stringValue:JP},[tx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&BD(o)&&(o=Og(o)),o&&(s.fields[ex]=o),{mapValue:s}}(t,e):n instanceof Fi?vx(n,e):n instanceof Li?_x(n,e):function(i,o){let s=yx(i,o),a=zM(s)+zM(i.Re);return ow(s)&&ow(i.Re)?mx(a):GD(i.serializer,a)}(n,e)}function Q3(n,e,t){return n instanceof Fi?vx(n,e):n instanceof Li?_x(n,e):t}function yx(n,e){return n instanceof ss?function(r){return ow(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var os=class extends Ka{},Fi=class extends Ka{constructor(e){super(),this.elements=e}};function vx(n,e){let t=Ex(e);for(let r of n.elements)t.some(i=>ur(i,r))||t.push(r);return{arrayValue:{values:t}}}var Li=class extends Ka{constructor(e){super(),this.elements=e}};function _x(n,e){let t=Ex(e);for(let r of n.elements)t=t.filter(i=>!ur(i,r));return{arrayValue:{values:t}}}var ss=class extends Ka{constructor(e,t){super(),this.serializer=e,this.Re=t}};function zM(n){return Oe(n.integerValue||n.doubleValue)}function Ex(n){return Rl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var yw=class{constructor(e,t){this.field=e,this.transform=t}};function Y3(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Fi&&i instanceof Fi||r instanceof Li&&i instanceof Li?Oa(r.elements,i.elements,ur):r instanceof ss&&i instanceof ss?ur(r.Re,i.Re):r instanceof os&&i instanceof os}(n.transform,e.transform)}var vw=class{constructor(e,t){this.version=e,this.transformResults=t}},wn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Sp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Qa=class{};function Ix(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ya(n.key,wn.none()):new Vi(n.key,n.data,wn.none());{let t=n.data,r=an.empty(),i=new Se(it.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new lr(n.key,r,new Bn(i.toArray()),wn.none())}}function Z3(n,e,t){n instanceof Vi?function(i,o,s){let a=i.value.clone(),c=GM(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof lr?function(i,o,s){if(!Sp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=GM(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(wx(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function _l(n,e,t,r){return n instanceof Vi?function(o,s,a,c){if(!Sp(o.precondition,s))return a;let l=o.value.clone(),h=WM(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof lr?function(o,s,a,c){if(!Sp(o.precondition,s))return a;let l=WM(o.fieldTransforms,c,s),h=s.data;return h.setAll(wx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Sp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function J3(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=yx(r.transform,i||null);o!=null&&(t===null&&(t=an.empty()),t.set(r.field,o))}return t||null}function qM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Oa(r,i,(o,s)=>Y3(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Vi=class extends Qa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},lr=class extends Qa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function wx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function GM(n,e,t){let r=new Map;G(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Q3(s,a,t[i]))}return r}function WM(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,K3(o,s,e))}return r}var Ya=class extends Qa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Gp=class extends Qa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Nl=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Z3(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=_l(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=_l(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=gx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=Ix(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(W.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ae())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,(t,r)=>qM(t,r))&&Oa(this.baseMutations,e.baseMutations,(t,r)=>qM(t,r))}},_w=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){G(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return H3}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Ml=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ew=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ze,ve;function X3(n){switch(n){case x.OK:return $(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return $(15467,{code:n})}}function Dx(n){if(n===void 0)return Ft("GRPC error has no .code"),x.UNKNOWN;switch(n){case Ze.OK:return x.OK;case Ze.CANCELLED:return x.CANCELLED;case Ze.UNKNOWN:return x.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return x.INTERNAL;case Ze.UNAVAILABLE:return x.UNAVAILABLE;case Ze.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ze.NOT_FOUND:return x.NOT_FOUND;case Ze.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ze.ABORTED:return x.ABORTED;case Ze.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ze.DATA_LOSS:return x.DATA_LOSS;default:return $(39323,{code:n})}}(ve=Ze||(Ze={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var KM=null;var eq=new Vr([4294967295,4294967295],0);function QM(n){let e=FP().encode(n),t=new NI;return t.update(e),new Uint8Array(t.digest())}function YM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vr([t,r],0),new Vr([i,o],0)]}var Iw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Yo(`Invalid padding: ${t}`);if(r<0)throw new Yo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Yo(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Vr.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Vr.fromNumber(r)));return i.compare(eq)===1&&(i=new Vr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=QM(e),[r,i]=YM(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let t=QM(e),[r,i]=YM(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Yo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Wp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Pl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(W.min(),i,new Le(Q),cn(),ae())}},Pl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ae(),ae(),ae())}};var xa=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},Kp=class{constructor(e,t){this.targetId=e,this.Ce=t}},Qp=class{constructor(e,t,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Yp=class{constructor(){this.Fe=0,this.Me=ZM(),this.xe=ot.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ae(),t=ae(),r=ae();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:$(38017,{changeType:o})}}),new Pl(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=ZM()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,G(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},ww=class{constructor(e){this.ze=e,this.je=new Map,this.He=cn(),this.Je=yp(),this.Ye=yp(),this.Ze=new Le(Q)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:$(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let o=i.target;if(zp(o))if(r===0){let s=new V(o.path);this.tt(t,s,mt.newNoDocument(s,W.min()))}else G(r===1,20013,{expectedCount:r});else{let s=this.ut(t);if(s!==r){let a=this.ct(e),c=a?this.lt(a,e,s):1;if(c!==0){this.st(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,l)}KM?.ht(function(h,p,g,y,C){var M,N,F,z,U,oe;let _e={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Z=p.unchangedNames;return Z&&(_e.bloomFilter={applied:C===0,hashCount:(M=Z?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(z=(F=(N=Z?.bits)===null||N===void 0?void 0:N.bitmap)===null||F===void 0?void 0:F.length)!==null&&z!==void 0?z:0,padding:(oe=(U=Z?.bits)===null||U===void 0?void 0:U.padding)!==null&&oe!==void 0?oe:0,mightContain:w=>{var v;return(v=y?.mightContain(w))!==null&&v!==void 0&&v}}),_e}(s,e.Ce,this.ze.Pt(),a,c))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=$r(r).toUint8Array()}catch(c){if(c instanceof Up)return rs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Iw(s,i,o)}catch(c){return rs(c instanceof Yo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,o,null),i++)}),i}It(e){let t=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&zp(a.target)){let c=new V(a.target.path);this.Et(c).has(s)||this.dt(s,c)||this.tt(s,c,mt.newNoDocument(c,e))}o.Le&&(t.set(s,o.qe()),o.Qe())}});let r=ae();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this._t(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new Wp(e,t,this.Ze,this.He,r);return this.He=cn(),this.Je=yp(),this.Ye=yp(),this.Ze=new Le(Q),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Yp,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Se(Q),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Se(Q),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Yp),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function yp(){return new Le(V.comparator)}function ZM(){return new Le(V.comparator)}var tq={asc:"ASCENDING",desc:"DESCENDING"},nq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rq={and:"AND",or:"OR"},Dw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Cw(n,e){return n.useProto3Json||Mg(e)?e:{value:e}}function Za(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iq(n,e){return Za(n,e.toTimestamp())}function Lt(n){return G(!!n,49232),W.fromTimestamp(function(t){let r=Br(t);return new Fe(r.seconds,r.nanos)}(n))}function WD(n,e){return Tw(n,e).canonicalString()}function Tw(n,e){let t=function(i){return new Ne(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Tx(n){let e=Ne.fromString(n);return G(kx(e),10190,{key:e.toString()}),e}function Zp(n,e){return WD(n.databaseId,e.path)}function ts(n,e){let t=Tx(e);if(t.get(1)!==n.databaseId.projectId)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new V(Ax(t))}function bx(n,e){return WD(n.databaseId,e)}function Sx(n){let e=Tx(n);return e.length===4?Ne.emptyPath():Ax(e)}function bw(n){return new Ne(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ax(n){return G(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function JM(n,e,t){return{name:Zp(n,e),fields:t.value.mapValue.fields}}function oq(n,e,t){let r=ts(n,e.name),i=Lt(e.updateTime),o=e.createTime?Lt(e.createTime):W.min(),s=new an({mapValue:{fields:e.fields}}),a=mt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function sq(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(G(h===void 0||typeof h=="string",58123),ot.fromBase64String(h||"")):(G(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ot.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:Dx(l.code);return new B(h,l.message||"")}(s);t=new Qp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ts(n,r.document.name),o=Lt(r.document.updateTime),s=r.document.createTime?Lt(r.document.createTime):W.min(),a=new an({mapValue:{fields:r.document.fields}}),c=mt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new xa(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ts(n,r.document),o=r.readTime?Lt(r.readTime):W.min(),s=mt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new xa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ts(n,r.document),o=r.removedTargetIds||[];t=new xa([],o,i,null)}else{if(!("filter"in e))return $(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Ew(i,o),a=r.targetId;t=new Kp(a,s)}}return t}function Jp(n,e){let t;if(e instanceof Vi)t={update:JM(n,e.key,e.value)};else if(e instanceof Ya)t={delete:Zp(n,e.key)};else if(e instanceof lr)t={update:JM(n,e.key,e.data),updateMask:hq(e.fieldMask)};else{if(!(e instanceof Gp))return $(16599,{ft:e.type});t={verify:Zp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof os)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Fi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Li)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ss)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw $(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:iq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$(27497)}(n,e.precondition)),t}function Sw(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?wn.updateTime(Lt(o.updateTime)):o.exists!==void 0?wn.exists(o.exists):wn.none()}(e.currentDocument):wn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)G(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new os;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new Fi(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new Li(h)}else"increment"in a?c=new ss(s,a.increment):$(16584,{proto:a});let l=it.fromServerFormat(a.fieldPath);return new yw(l,c)}(n,i)):[];if(e.update){e.update.name;let i=ts(n,e.update.name),o=new an({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Bn(l.map(h=>it.fromServerFormat(h)))}(e.updateMask);return new lr(i,o,s,t,r)}return new Vi(i,o,t,r)}if(e.delete){let i=ts(n,e.delete);return new Ya(i,t)}if(e.verify){let i=ts(n,e.verify);return new Gp(i,t)}return $(1463,{proto:e})}function aq(n,e){return n&&n.length>0?(G(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Lt(i.updateTime):Lt(o);return s.isEqual(W.min())&&(s=Lt(o)),new vw(s,i.transformResults||[])}(t,e))):[]}function Rx(n,e){return{documents:[bx(n,e.path)]}}function Nx(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=bx(n,i);let o=function(l){if(l.length!==0)return xx(be.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Aa(g.field),direction:uq(g.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Cw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:t,parent:i}}function Mx(n){let e=Sx(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){G(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let g=Px(p);return g instanceof be&&qD(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(C){return new qa(Ra(C.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Mg(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){let g=!!p.before,y=p.values||[];return new Oi(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new Oi(y,g)}(t.endAt)),L3(e,i,s,o,a,"F",c,l)}function cq(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Px(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ra(t.unaryFilter.field);return me.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ra(t.unaryFilter.field);return me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ra(t.unaryFilter.field);return me.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ra(t.unaryFilter.field);return me.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}}(n):n.fieldFilter!==void 0?function(t){return me.create(Ra(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return be.create(t.compositeFilter.filters.map(r=>Px(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $(1026)}}(t.compositeFilter.op))}(n):$(30097,{filter:n})}function uq(n){return tq[n]}function lq(n){return nq[n]}function dq(n){return rq[n]}function Aa(n){return{fieldPath:n.canonicalString()}}function Ra(n){return it.fromServerFormat(n.fieldPath)}function xx(n){return n instanceof me?function(t){if(t.op==="=="){if(FM(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NAN"}};if(OM(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(FM(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NOT_NAN"}};if(OM(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Aa(t.field),op:lq(t.op),value:t.value}}}(n):n instanceof be?function(t){let r=t.getFilters().map(i=>xx(i));return r.length===1?r[0]:{compositeFilter:{op:dq(t.op),filters:r}}}(n):$(54877,{filter:n})}function hq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ja=class n{constructor(e,t,r,i,o=W.min(),s=W.min(),a=ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Xp=class{constructor(e){this.wt=e}};function fq(n,e){let t;if(e.document)t=oq(n.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=V.fromSegments(e.noDocument.path),i=cs(e.noDocument.readTime);t=mt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return $(56709);{let r=V.fromSegments(e.unknownDocument.path),i=cs(e.unknownDocument.version);t=mt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Fe(i[0],i[1]);return W.fromTimestamp(o)}(e.readTime)),t}function XM(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:eg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Zp(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Za(o,s.version.toTimestamp()),createTime:Za(o,s.createTime.toTimestamp())}}(n.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:as(e.version)};else{if(!e.isUnknownDocument())return $(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:as(e.version)}}return r}function eg(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function as(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cs(n){let e=new Fe(n.seconds,n.nanoseconds);return W.fromTimestamp(e)}function Go(n,e){let t=(e.baseMutations||[]).map(o=>Sw(n.wt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Sw(n.wt,o)),i=Fe.fromMillis(e.localWriteTimeMs);return new Nl(e.batchId,i,t,r)}function hl(n){let e=cs(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?cs(n.lastLimboFreeSnapshotVersion):W.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){let s=o.documents.length;return G(s===1,1966,{count:s}),Dn(Lg(Sx(o.documents[0])))}(n.query):function(o){return Dn(Mx(o))}(n.query),new Ja(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ot.fromBase64String(n.resumeToken))}function Ox(n,e){let t=as(e.snapshotVersion),r=as(e.lastLimboFreeSnapshotVersion),i;i=zp(e.target)?Rx(n.wt,e.target):Nx(n.wt,e.target).gt;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:is(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Fx(n){let e=Mx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?mw(e,e.limit,"L"):e}function FI(n,e){return new Ml(e.largestBatchId,Sw(n.wt,e.overlayMutation))}function eP(n,e){let t=e.path.lastSegment();return[n,Rt(e.path.popLast()),t]}function tP(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:as(r.readTime),documentKey:Rt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Aw=class{getBundleMetadata(e,t){return nP(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:cs(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return nP(e).put(function(i){return{bundleId:i.id,createTime:as(Lt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return rP(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Fx(o.bundledQuery),readTime:cs(o.readTime)}}(r)})}saveNamedQuery(e,t){return rP(e).put(function(i){return{name:i.name,readTime:as(Lt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function nP(n){return st(n,Pg)}function rP(n){return st(n,xg)}var tg=class n{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return al(e).get(eP(this.userId,t)).next(r=>r?FI(this.serializer,r):null)}getOverlays(e,t){let r=sr();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Ml(t,s);i.push(this.St(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Rt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(al(e).X(nw,a))}),A.waitFor(o)}getOverlaysForCollection(e,t,r){let i=sr(),o=Rt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return al(e).J(nw,s).next(a=>{for(let c of a){let l=FI(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=sr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return al(e).te({index:GP,range:a},(c,l,h)=>{let p=FI(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}St(e,t){return al(e).put(function(i,o,s){let[a,c,l]=eP(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Jp(i.wt,s.mutation)}}(this.serializer,this.userId,t))}};function al(n){return st(n,kg)}var Rw=class{Dt(e){return st(e,jD)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{let r=t?.value;return r?ot.fromUint8Array(r):ot.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Ur=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),wl(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=Br(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt($r(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?rx(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Fg(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):$(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let o=e.fields||{};this.Mt(t,53);let s=Ha,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(Oe(a)),this.Nt(s,t),this.Ct(o[s],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),V.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};Ur.Wt=new Ur;var wa=255;function pq(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function iP(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=pq(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Nw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{let i=t.codePointAt(0);this.zt(240|i>>>18),this.zt(128|63&i>>>12),this.zt(128|63&i>>>6),this.zt(128|63&i)}}this.jt()}Xt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{let i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Yt()}en(e){let t=this.tn(e),r=iP(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}rn(e){let t=this.tn(e),r=iP(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}sn(){this._n(wa),this._n(255)}an(){this.un(wa),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}zt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===wa?(this._n(wa),this._n(0)):this._n(t)}Jt(e){let t=255&e;t===0?(this.un(0),this.un(255)):t===wa?(this.un(wa),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Mw=class{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}},Pw=class{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}},Wo=class{constructor(){this.ln=new Nw,this.hn=new Mw(this.ln),this.Pn=new Pw(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}};var Ko=class n{constructor(e,t,r,i){this.In=e,this.En=t,this.dn=r,this.An=i}Rn(){let e=this.An.length,t=e===0||this.An[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.An,0),t!==e?r.set([0],this.An.length):++r[r.length-1],new n(this.In,this.En,this.dn,r)}Vn(e,t,r){return{indexId:this.In,uid:e,arrayValue:Ap(this.dn),directionalValue:Ap(this.An),orderedDocumentKey:Ap(t),documentKey:r.path.toArray()}}mn(e,t,r){let i=this.Vn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function Si(n,e){let t=n.In-e.In;return t!==0?t:(t=oP(n.dn,e.dn),t!==0?t:(t=oP(n.An,e.An),t!==0?t:V.comparator(n.En,e.En)))}function oP(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Ap(n){return SE()?function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}(n):n}function sP(n){return typeof n!="string"?n:function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(n)}var ng=class{constructor(e){this.fn=new Se((t,r)=>it.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(let t of e.filters){let r=t;r.isInequality()?this.fn=this.fn.add(r):this.pn.push(r)}}get yn(){return this.fn.size>1}wn(e){if(G(e.collectionGroup===this.collectionId,49279),this.yn)return!1;let t=QI(e);if(t!==void 0&&!this.bn(t))return!1;let r=Ho(e),i=new Set,o=0,s=0;for(;o<r.length&&this.bn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.fn.size>0){let a=this.fn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.Sn(a,c)||!this.Dn(this.gn[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.gn.length||!this.Dn(this.gn[s++],a))return!1}return!0}vn(){if(this.yn)return null;let e=new Se(it.comparator),t=[];for(let r of this.pn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Pa(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Pa(r.field,0))}for(let r of this.gn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Pa(r.field,r.dir==="asc"?0:1)));return new Fa(Fa.UNKNOWN_ID,this.collectionId,t,Il.empty())}bn(e){for(let t of this.pn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Dn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function Lx(n){var e,t;if(G(n instanceof me||n instanceof be,20012),n instanceof me){if(n instanceof Hp){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>me.create(n.field,"==",o)))||[];return be.create(i,"or")}return n}let r=n.filters.map(i=>Lx(i));return be.create(r,n.op)}function gq(n){if(n.getFilters().length===0)return[];let e=Ow(Lx(n));return G(Vx(e),7391),xw(e)||kw(e)?[e]:e.getFilters()}function xw(n){return n instanceof me}function kw(n){return n instanceof be&&qD(n)}function Vx(n){return xw(n)||kw(n)||function(t){if(t instanceof be&&sw(t)){for(let r of t.getFilters())if(!xw(r)&&!kw(r))return!1;return!0}return!1}(n)}function Ow(n){if(G(n instanceof me||n instanceof be,34018),n instanceof me)return n;if(n.filters.length===1)return Ow(n.filters[0]);let e=n.filters.map(r=>Ow(r)),t=be.create(e,n.op);return t=rg(t),Vx(t)?t:(G(t instanceof be,64498),G(Ga(t),40251),G(t.filters.length>1,57927),t.filters.reduce((r,i)=>KD(r,i)))}function KD(n,e){let t;return G(n instanceof me||n instanceof be,38388),G(e instanceof me||e instanceof be,25473),t=n instanceof me?e instanceof me?function(i,o){return be.create([i,o],"and")}(n,e):aP(n,e):e instanceof me?aP(e,n):function(i,o){if(G(i.filters.length>0&&o.filters.length>0,48005),Ga(i)&&Ga(o))return cx(i,o.getFilters());let s=sw(i)?i:o,a=sw(i)?o:i,c=s.filters.map(l=>KD(l,a));return be.create(c,"or")}(n,e),rg(t)}function aP(n,e){if(Ga(e))return cx(e,n.getFilters());{let t=e.filters.map(r=>KD(n,r));return be.create(t,"or")}}function rg(n){if(G(n instanceof me||n instanceof be,11850),n instanceof me)return n;let e=n.getFilters();if(e.length===1)return rg(e[0]);if(sx(n))return n;let t=e.map(i=>rg(i)),r=[];return t.forEach(i=>{i instanceof me?r.push(i):i instanceof be&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:be.create(r,n.op)}var Fw=class{constructor(){this.Cn=new xl}addToCollectionParentIndex(e,t){return this.Cn.add(t),A.resolve()}getCollectionParents(e,t){return A.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return A.resolve()}deleteFieldIndex(e,t){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,t){return A.resolve()}getDocumentsMatchingTarget(e,t){return A.resolve(null)}getIndexType(e,t){return A.resolve(0)}getFieldIndexes(e,t){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,t){return A.resolve(Cn.min())}getMinOffsetFromCollectionGroup(e,t){return A.resolve(Cn.min())}updateCollectionGroup(e,t,r){return A.resolve()}updateIndexEntries(e,t){return A.resolve()}},xl=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Se(Ne.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Se(Ne.comparator)).toArray()}};var cP="IndexedDbIndexManager",vp=new Uint8Array(0),Lw=class{constructor(e,t){this.databaseId=t,this.Fn=new xl,this.Mn=new Hn(r=>is(r),(r,i)=>Hl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Fn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Fn.add(t)});let o={collectionId:r,parent:Rt(i)};return uP(e).put(o)}return A.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[LP(t),""],!1,!0);return uP(e).J(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(or(s.parent))}return r})}addFieldIndex(e,t){let r=cl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Ca(e);return o.next(a=>{s.put(tP(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=cl(e),i=Ca(e),o=Da(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=cl(e),r=Da(e),i=Ca(e);return t.X().next(()=>r.X()).next(()=>i.X())}createTargetIndexes(e,t){return A.forEach(this.xn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new ng(r).vn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Da(e),i=!0,o=new Map;return A.forEach(this.xn(t),s=>this.On(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ae(),a=[];return A.forEach(o,(c,l)=>{k(cP,`Using index ${function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(oe=>`${oe.fieldPath}:${oe.kind}`).join(",")}`}(c)} to execute ${is(t)}`);let h=function(U,oe){let _e=QI(oe);if(_e===void 0)return null;for(let Z of qp(U,_e.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null}(l,c),p=function(U,oe){let _e=new Map;for(let Z of Ho(oe))for(let w of qp(U,Z.fieldPath))switch(w.op){case"==":case"in":_e.set(Z.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return _e.set(Z.fieldPath.canonicalString(),w.value),Array.from(_e.values())}return null}(l,c),g=function(U,oe){let _e=[],Z=!0;for(let w of Ho(oe)){let v=w.kind===0?BM(U,w.fieldPath,U.startAt):$M(U,w.fieldPath,U.startAt);_e.push(v.value),Z&&(Z=v.inclusive)}return new Oi(_e,Z)}(l,c),y=function(U,oe){let _e=[],Z=!0;for(let w of Ho(oe)){let v=w.kind===0?$M(U,w.fieldPath,U.endAt):BM(U,w.fieldPath,U.endAt);_e.push(v.value),Z&&(Z=v.inclusive)}return new Oi(_e,Z)}(l,c),C=this.Nn(c,l,g),M=this.Nn(c,l,y),N=this.Bn(c,l,p),F=this.Ln(c.indexId,h,C,g.inclusive,M,y.inclusive,N);return A.forEach(F,z=>r.Z(z,t.limit).next(U=>{U.forEach(oe=>{let _e=V.fromSegments(oe.documentKey);s.has(_e)||(s=s.add(_e),a.push(_e))})}))}).next(()=>a)}return A.resolve(null)})}xn(e){let t=this.Mn.get(e);return t||(e.filters.length===0?t=[e]:t=gq(be.create(e.filters,"and")).map(r=>gw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,t),t)}Ln(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let g=t?this.kn(t[p/l]):vp,y=this.qn(e,g,r[p%l],i),C=this.Qn(e,g,o[p%l],s),M=a.map(N=>this.qn(e,g,N,!0));h.push(...this.createRange(y,C,M))}return h}qn(e,t,r,i){let o=new Ko(e,V.empty(),t,r);return i?o:o.Rn()}Qn(e,t,r,i){let o=new Ko(e,V.empty(),t,r);return i?o.Rn():o}On(e,t){let r=new ng(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.wn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.xn(t);return A.forEach(i,o=>this.On(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Se(it.comparator),h=!1;for(let p of c.filters)for(let g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?h=!0:l=l.add(g.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}$n(e,t){let r=new Wo;for(let i of Ho(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Tn(i.kind);Ur.Wt.vt(o,s)}return r.cn()}kn(e){let t=new Wo;return Ur.Wt.vt(e,t.Tn(0)),t.cn()}Un(e,t){let r=new Wo;return Ur.Wt.vt(zD(this.databaseId,t),r.Tn(function(o){let s=Ho(o);return s.length===0?0:s[s.length-1].kind}(e))),r.cn()}Bn(e,t,r){if(r===null)return[];let i=[];i.push(new Wo);let o=0;for(let s of Ho(e)){let a=r[o++];for(let c of i)if(this.Kn(t,s.fieldPath)&&Rl(a))i=this.Wn(i,s,a);else{let l=c.Tn(s.kind);Ur.Wt.vt(a,l)}}return this.Gn(i)}Nn(e,t,r){return this.Bn(e,t,r.position)}Gn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}Wn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Wo;c.seed(a.cn()),Ur.Wt.vt(s,c.Tn(t.kind)),o.push(c)}return o}Kn(e,t){return!!e.filters.find(r=>r instanceof me&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=cl(e),i=Ca(e);return(t?r.J(tw,IDBKeyRange.bound(t,t)):r.J()).next(o=>{let s=[];return A.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let g=p?new Il(p.sequenceNumber,new Cn(cs(p.readTime),new V(or(p.documentKey)),p.largestBatchId)):Il.empty(),y=h.fields.map(([C,M])=>new Pa(it.fromServerFormat(C),M));return new Fa(h.indexId,h.collectionGroup,y,g)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Q(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=cl(e),o=Ca(e);return this.zn(e).next(s=>i.J(tw,IDBKeyRange.bound(t,t)).next(a=>A.forEach(a,c=>o.put(tP(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return A.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?A.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,c=>this.jn(e,i,c).next(l=>{let h=this.Hn(o,c);return l.isEqual(h)?A.resolve():this.Jn(e,o,c,l,h)}))))})}Yn(e,t,r,i){return Da(e).put(i.Vn(this.uid,this.Un(r,t.key),t.key))}Zn(e,t,r,i){return Da(e).delete(i.mn(this.uid,this.Un(r,t.key),t.key))}jn(e,t,r){let i=Da(e),o=new Se(Si);return i.te({index:qP,range:IDBKeyRange.only([r.indexId,this.uid,Ap(this.Un(r,t))])},(s,a)=>{o=o.add(new Ko(r.indexId,t,sP(a.arrayValue),sP(a.directionalValue)))}).next(()=>o)}Hn(e,t){let r=new Se(Si),i=this.$n(t,e);if(i==null)return r;let o=QI(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Rl(s))for(let a of s.arrayValue.values||[])r=r.add(new Ko(t.indexId,e.key,this.kn(a),i))}else r=r.add(new Ko(t.indexId,e.key,vp,i));return r}Jn(e,t,r,i,o){k(cP,"Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,g){let y=c.getIterator(),C=l.getIterator(),M=Ia(y),N=Ia(C);for(;M||N;){let F=!1,z=!1;if(M&&N){let U=h(M,N);U<0?z=!0:U>0&&(F=!0)}else M!=null?z=!0:F=!0;F?(p(N),N=Ia(C)):z?(g(M),M=Ia(y)):(M=Ia(y),N=Ia(C))}}(i,o,Si,a=>{s.push(this.Yn(e,t,r,a))},a=>{s.push(this.Zn(e,t,r,a))}),A.waitFor(s)}zn(e){let t=1;return Ca(e).te({index:zP,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Si(s,a)).filter((s,a,c)=>!a||Si(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Si(s,e),c=Si(s,t);if(a===0)i[0]=e.Rn();else if(a>0&&c<0)i.push(s),i.push(s.Rn());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Xn(i[s],i[s+1]))return[];let a=i[s].mn(this.uid,vp,V.empty()),c=i[s+1].mn(this.uid,vp,V.empty());o.push(IDBKeyRange.bound(a,c))}return o}Xn(e,t){return Si(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(lP)}getMinOffset(e,t){return A.mapArray(this.xn(t),r=>this.On(e,r).next(i=>i||$(44426))).next(lP)}};function uP(n){return st(n,Tl)}function Da(n){return st(n,gl)}function cl(n){return st(n,VD)}function Ca(n){return st(n,pl)}function lP(n){G(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;OD(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Cn(e.readTime,e.documentKey,t)}var dP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jx=41943040,Wt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function Ux(n,e,t){let r=n.store(jn),i=n.store(Va),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.te({range:s},(h,p,g)=>(a++,g.delete()));o.push(c.next(()=>{G(a===1,47070,{batchId:t.batchId})}));let l=[];for(let h of t.mutations){let p=BP(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return A.waitFor(o).next(()=>l)}function ig(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw $(14731);e=n.noDocument}return JSON.stringify(e).length}Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(jx,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);var og=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.er={}}static bt(e,t,r,i){G(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ai(e).te({index:Qo,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Na(e),s=Ai(e);return s.add({}).next(a=>{G(typeof a=="number",49019);let c=new Nl(a,t,r,i),l=function(y,C,M){let N=M.baseMutations.map(z=>Jp(y.wt,z)),F=M.mutations.map(z=>Jp(y.wt,z));return{userId:C,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:F}}(this.serializer,this.userId,c),h=[],p=new Se((g,y)=>Q(g.canonicalString(),y.canonicalString()));for(let g of i){let y=BP(this.userId,g.key.path,a);p=p.add(g.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,u3))}return p.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.er[a]=c.keys()}),A.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Ai(e).get(t).next(r=>r?(G(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Go(this.serializer,r)):null)}tr(e,t){return this.er[t]?A.resolve(this.er[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.er[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ai(e).te({index:Qo,range:i},(s,a,c)=>{a.userId===this.userId&&(G(a.batchId>=r,47524,{nr:r}),o=Go(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=Xo;return Ai(e).te({index:Qo,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,Xo],[this.userId,Number.POSITIVE_INFINITY]);return Ai(e).J(Qo,t).next(r=>r.map(i=>Go(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=wp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Na(e).te({range:i},(s,a,c)=>{let[l,h,p]=s,g=or(h);if(l===this.userId&&t.path.isEqual(g))return Ai(e).get(p).next(y=>{if(!y)throw $(61480,{rr:s,batchId:p});G(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:p}),o.push(Go(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Se(Q),i=[];return t.forEach(o=>{let s=wp(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Na(e).te({range:a},(l,h,p)=>{let[g,y,C]=l,M=or(y);g===this.userId&&o.path.isEqual(M)?r=r.add(C):p.done()});i.push(c)}),A.waitFor(i).next(()=>this.ir(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=wp(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Se(Q);return Na(e).te({range:s},(c,l,h)=>{let[p,g,y]=c,C=or(g);p===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(y)):h.done()}).next(()=>this.ir(e,a))}ir(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Ai(e).get(o).next(s=>{if(s===null)throw $(35274,{batchId:o});G(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(Go(this.serializer,s))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Ux(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.sr(t.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return A.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Na(e).te({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=or(o[1]);i.push(c)}else a.done()}).next(()=>{G(i.length===0,56720,{_r:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return Bx(e,this.userId,t)}ar(e){return $x(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Xo,lastStreamToken:""})}};function Bx(n,e,t){let r=wp(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Na(n).te({range:o,ee:!0},(a,c,l)=>{let[h,p,g]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Ai(n){return st(n,jn)}function Na(n){return st(n,Va)}function $x(n){return st(n,Dl)}var Xa=class n{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new n(0)}static lr(){return new n(-1)}};var Vw=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.hr(e).next(t=>{let r=new Xa(t.highestTargetId);return t.highestTargetId=r.next(),this.Pr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(t=>W.fromTimestamp(new Fe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.hr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pr(e,i)))}addTargetData(e,t){return this.Tr(e,t).next(()=>this.hr(e).next(r=>(r.targetCount+=1,this.Ir(t,r),this.Pr(e,r))))}updateTargetData(e,t){return this.Tr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ta(e).delete(t.targetId)).next(()=>this.hr(e)).next(r=>(G(r.targetCount>0,8065),r.targetCount-=1,this.Pr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Ta(e).te((s,a)=>{let c=hl(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>A.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ta(e).te((r,i)=>{let o=hl(i);t(o)})}hr(e){return hP(e).get(Vp).next(t=>(G(t!==null,2888),t))}Pr(e,t){return hP(e).put(Vp,t)}Tr(e,t){return Ta(e).put(Ox(this.serializer,t))}Ir(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.hr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=is(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ta(e).te({range:i,index:HP},(s,a,c)=>{let l=hl(a);Hl(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Ni(e);return t.forEach(s=>{let a=Rt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),A.waitFor(i)}removeMatchingKeys(e,t,r){let i=Ni(e);return A.forEach(t,o=>{let s=Rt(o.path);return A.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Ni(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ni(e),o=ae();return i.te({range:r,ee:!0},(s,a,c)=>{let l=or(s[1]),h=new V(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Rt(t.path),i=IDBKeyRange.bound([r],[LP(r)],!1,!0),o=0;return Ni(e).te({index:LD,ee:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}Rt(e,t){return Ta(e).get(t).next(r=>r?hl(r):null)}};function Ta(n){return st(n,ja)}function hP(n){return st(n,es)}function Ni(n){return st(n,Ua)}var fP="LruGarbageCollector",mq=1048576;function pP([n,e],[t,r]){let i=Q(n,t);return i===0?Q(e,r):i}var jw=class{constructor(e){this.Er=e,this.buffer=new Se(pP),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();pP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},sg=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){k(fP,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bi(t)?k(fP,"Ignoring IndexedDB error during garbage collection: ",t):yield ls(t)}yield this.mr(3e5)}))}},Uw=class{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return A.resolve(Un.le);let r=new jw(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(dP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dP):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ba()<=de.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Hx(n,e){return new Uw(n,e)}var Bw=class{constructor(e,t){this.db=e,this.garbageCollector=Hx(this,t)}pr(e){let t=this.br(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}yr(e,t){return this.Sr(e,(r,i)=>t(i))}addReference(e,t,r){return _p(e,r)}removeReference(e,t,r){return _p(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _p(e,t)}Dr(e,t){return function(i,o){let s=!1;return $x(i).ne(a=>Bx(i,a,o).next(c=>(c&&(s=!0),A.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Sr(e,(s,a)=>{if(a<=t){let c=this.Dr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,W.min()),Ni(e).delete(function(p){return[0,Rt(p.path)]}(s))))});i.push(c)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _p(e,t)}Sr(e,t){let r=Ni(e),i,o=Un.le;return r.te({index:LD},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Un.le&&t(new V(or(i)),o),o=l,i=c):o=Un.le}).next(()=>{o!==Un.le&&t(new V(or(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function _p(n,e){return Ni(n).put(function(r,i){return{targetId:0,path:Rt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var ag=class{constructor(){this.changes=new Hn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?A.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $w=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return $o(e).put(r)}removeEntry(e,t,r){return $o(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],eg(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.vr(e,r)))}getEntry(e,t){let r=mt.newInvalidDocument(t);return $o(e).te({index:Dp,range:IDBKeyRange.only(ul(t))},(i,o)=>{r=this.Cr(t,o)}).next(()=>r)}Fr(e,t){let r={size:0,document:mt.newInvalidDocument(t)};return $o(e).te({index:Dp,range:IDBKeyRange.only(ul(t))},(i,o)=>{r={document:this.Cr(t,o),size:ig(o)}}).next(()=>r)}getEntries(e,t){let r=cn();return this.Mr(e,t,(i,o)=>{let s=this.Cr(i,o);r=r.insert(i,s)}).next(()=>r)}Or(e,t){let r=cn(),i=new Le(V.comparator);return this.Mr(e,t,(o,s)=>{let a=this.Cr(o,s);r=r.insert(o,a),i=i.insert(o,ig(s))}).next(()=>({documents:r,Nr:i}))}Mr(e,t,r){if(t.isEmpty())return A.resolve();let i=new Se(yP);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(ul(i.first()),ul(i.last())),s=i.getIterator(),a=s.getNext();return $o(e).te({index:Dp,range:o},(c,l,h)=>{let p=V.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&yP(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.H(ul(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),eg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $o(e).J(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=cn();for(let p of l){let g=this.Cr(V.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(zl(t,g)||i.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=cn(),s=mP(t,r),a=mP(t,Cn.max());return $o(e).te({index:$P,range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.Cr(V.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Hw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gP(e).get(ew).next(t=>(G(!!t,20021),t))}vr(e,t){return gP(e).put(ew,t)}Cr(e,t){if(t){let r=fq(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(W.min())))return r}return mt.newInvalidDocument(e)}};function zx(n){return new $w(n)}var Hw=class extends ag{constructor(e,t){super(),this.Br=e,this.trackRemovals=t,this.Lr=new Hn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Se((o,s)=>Q(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Lr.get(o);if(t.push(this.Br.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=XM(this.Br.serializer,s);i=i.add(o.path.popLast());let l=ig(c);r+=l-a.size,t.push(this.Br.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=XM(this.Br.serializer,s.convertToNoDocument(W.min()));t.push(this.Br.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.Br.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Br.updateMetadata(e,r)),A.waitFor(t)}getFromCache(e,t){return this.Br.Fr(e,t).next(r=>(this.Lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Br.Or(e,t).next(({documents:r,Nr:i})=>(i.forEach((o,s)=>{this.Lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function gP(n){return st(n,Cl)}function $o(n){return st(n,Lp)}function ul(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mP(n,e){let t=e.documentKey.path.toArray();return[n,eg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function yP(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Q(t[o],r[o]),i)return i;return i=Q(t.length,r.length),i||(i=Q(t[t.length-2],r[r.length-2]),i||Q(t[t.length-1],r[r.length-1]))}var zw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var cg=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&_l(r.mutation,i,Bn.empty(),Fe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ae()){let i=sr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=dl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=sr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ae()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=cn(),s=vl(),a=function(){return vl()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof lr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),_l(h.mutation,l,h.mutation.getFieldMask(),Fe.now())):s.set(l.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new zw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=vl(),i=new Le((s,a)=>s-a),o=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Bn.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ae()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=gx();h.forEach(g=>{if(!o.has(g)){let y=Ix(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return A.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return V.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):V3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):A.resolve(sr()),a=El,c=o;return s.next(l=>A.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?A.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ae())).next(h=>({batchId:a,changes:px(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new V(t)).next(r=>{let i=dl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=dl();return this.indexManager.getCollectionParents(e,o).next(a=>A.forEach(a,c=>{let l=function(p,g){return new Wa(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,mt.newInvalidDocument(h)))});let a=dl();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&_l(h.mutation,l,Bn.empty(),Fe.now()),zl(t,l)&&(a=a.insert(c,l))}),a})}};var qw=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return A.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Lt(i.createTime)}}(t)),A.resolve()}getNamedQuery(e,t){return A.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:Fx(i.bundledQuery),readTime:Lt(i.readTime)}}(t)),A.resolve()}};var Gw=class{constructor(){this.overlays=new Le(V.comparator),this.Qr=new Map}getOverlay(e,t){return A.resolve(this.overlays.get(t))}getOverlays(e,t){let r=sr();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),A.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),A.resolve()}getOverlaysForCollection(e,t,r){let i=sr(),o=t.length+1,s=new V(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return A.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Le((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=sr(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=sr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return A.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ml(t,r));let o=this.Qr.get(t);o===void 0&&(o=ae(),this.Qr.set(t,o)),this.Qr.set(t,o.add(r.key))}};var Ww=class{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,A.resolve()}};var kl=class{constructor(){this.$r=new Se(Je.Ur),this.Kr=new Se(Je.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let r=new Je(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Je(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){let t=new V(new Ne([])),r=new Je(t,e),i=new Je(t,e+1),o=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new V(new Ne([])),r=new Je(t,e),i=new Je(t,e+1),o=ae();return this.Kr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Je(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Je=class{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return V.comparator(e.key,t.key)||Q(e.Zr,t.Zr)}static Wr(e,t){return Q(e.Zr,t.Zr)||V.comparator(e.key,t.key)}};var Kw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Se(Je.Ur)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Nl(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Xr=this.Xr.add(new Je(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(s)}lookupMutationBatch(e,t){return A.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ti(r),o=i<0?0:i;return A.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?Xo:this.nr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Je(t,0),i=new Je(t,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],s=>{let a=this.ei(s.Zr);o.push(a)}),A.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Se(Q);return t.forEach(i=>{let o=new Je(i,0),s=new Je(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],a=>{r=r.add(a.Zr)})}),A.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;V.isDocumentKey(o)||(o=o.child(""));let s=new Je(new V(o),0),a=new Se(Q);return this.Xr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Zr)),!0)},s),A.resolve(this.ni(a))}ni(e){let t=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){G(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return A.forEach(t.mutations,i=>{let o=new Je(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){let r=new Je(t,0),i=this.Xr.firstAfterOrEqual(r);return A.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Qw=class{constructor(e){this.ii=e,this.docs=function(){return new Le(V.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return A.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(t))}getEntries(e,t){let r=cn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():mt.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=cn(),s=t.path,a=new V(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||OD(VP(h),r)<=0||(i.has(h.key)||zl(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return A.resolve(o)}getAllFromCollectionGroup(e,t,r,i){$(9500)}si(e,t){return A.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Yw(this)}getSize(e){return A.resolve(this.size)}},Yw=class extends ag{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),A.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}};var Zw=class{constructor(e){this.persistence=e,this.oi=new Hn(t=>is(t),Hl),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this._i=0,this.ai=new kl,this.targetCount=0,this.ui=Xa.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),A.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new Xa(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,A.resolve()}updateTargetData(e,t){return this.Tr(t),A.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.oi.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(o).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,t){let r=this.oi.get(t)||null;return A.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),A.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),A.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),A.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ai.Yr(t);return A.resolve(r)}containsKey(e,t){return A.resolve(this.ai.containsKey(t))}};var Ol=class{constructor(e,t){this.ci={},this.overlays={},this.li=new Un(0),this.hi=!1,this.hi=!0,this.Pi=new Ww,this.referenceDelegate=e(this),this.Ti=new Zw(this),this.indexManager=new Fw,this.remoteDocumentCache=function(i){return new Qw(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Xp(t),this.Ei=new qw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new Kw(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new Jw(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,t){return A.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}},Jw=class extends kp{constructor(e){super(),this.currentSequenceNumber=e}},ug=class n{constructor(e){this.persistence=e,this.Vi=new kl,this.mi=null}static fi(e){return new n(e)}get gi(){if(this.mi)return this.mi;throw $(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),A.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),A.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.gi,r=>{let i=V.fromPath(r);return this.pi(e,i).next(o=>{o||t.removeEntry(i,W.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return A.or([()=>A.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}},lg=class n{constructor(e,t){this.persistence=e,this.yi=new Hn(r=>Rt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Hx(this,t)}static fi(e,t){return new n(e,t)}di(){}Ai(e){return A.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return A.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?A.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,W.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),A.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),A.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),A.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),A.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tp(e.data.value)),t}Dr(e,t,r){return A.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.yi.get(t);return A.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Xw=class{constructor(e){this.serializer=e}q(e,t,r,i){let o=new Op("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore($l)}(e),function(c){c.createObjectStore(Dl,{keyPath:c3}),c.createObjectStore(jn,{keyPath:NM,autoIncrement:!0}).createIndex(Qo,MM,{unique:!0}),c.createObjectStore(Va)}(e),vP(e),function(c){c.createObjectStore(zo)}(e));let s=A.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore(Ua),c.deleteObjectStore(ja),c.deleteObjectStore(es)}(e),vP(e)),s=s.next(()=>function(c){let l=c.store(es),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:W.min().toTimestamp(),targetCount:0};return l.put(Vp,h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store(jn).J().next(p=>{c.deleteObjectStore(jn),c.createObjectStore(jn,{keyPath:NM,autoIncrement:!0}).createIndex(Qo,MM,{unique:!0});let g=l.store(jn),y=p.map(C=>g.put(C));return A.waitFor(y)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore(Ba,{keyPath:y3})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.wi(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore(Cl)}(e),this.bi(o)))),r<7&&i>=7&&(s=s.next(()=>this.Si(o))),r<8&&i>=8&&(s=s.next(()=>this.Di(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.Ci(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(Pg,{keyPath:v3})})(e),function(c){c.createObjectStore(xg,{keyPath:_3})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore(kg,{keyPath:b3});l.createIndex(nw,S3,{unique:!1}),l.createIndex(GP,A3,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore(Lp,{keyPath:l3});l.createIndex(Dp,d3),l.createIndex($P,h3)}(e)).next(()=>this.Fi(e,o)).next(()=>e.deleteObjectStore(zo))),r<14&&i>=14&&(s=s.next(()=>this.Mi(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore(VD,{keyPath:E3,autoIncrement:!0}).createIndex(tw,I3,{unique:!1}),c.createObjectStore(pl,{keyPath:w3}).createIndex(zP,D3,{unique:!1}),c.createObjectStore(gl,{keyPath:C3}).createIndex(qP,T3,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(pl).clear()}).next(()=>{t.objectStore(gl).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore(jD,{keyPath:R3})})(e)})),r<18&&i>=18&&SE()&&(s=s.next(()=>{t.objectStore(pl).clear()}).next(()=>{t.objectStore(gl).clear()})),s}bi(e){let t=0;return e.store(zo).te((r,i)=>{t+=ig(i)}).next(()=>{let r={byteSize:t};return e.store(Cl).put(ew,r)})}wi(e){let t=e.store(Dl),r=e.store(jn);return t.J().next(i=>A.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,Xo],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Qo,s).next(a=>A.forEach(a,c=>{G(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});let l=Go(this.serializer,c);return Ux(e,o.userId,l).next(()=>{})}))}))}Si(e){let t=e.store(Ua),r=e.store(zo);return e.store(es).get(Vp).next(i=>{let o=[];return r.te((s,a)=>{let c=new Ne(s),l=function(p){return[0,Rt(p)]}(c);o.push(t.get(l).next(h=>h?A.resolve():(p=>t.put({targetId:0,path:Rt(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>A.waitFor(o))})}Di(e,t){e.createObjectStore(Tl,{keyPath:m3});let r=t.store(Tl),i=new xl,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Rt(c)})}};return t.store(zo).te({ee:!0},(s,a)=>{let c=new Ne(s);return o(c.popLast())}).next(()=>t.store(Va).te({ee:!0},([s,a,c],l)=>{let h=or(a);return o(h.popLast())}))}Ci(e){let t=e.store(ja);return t.te((r,i)=>{let o=hl(i),s=Ox(this.serializer,o);return t.put(s)})}Fi(e,t){let r=t.store(zo),i=[];return r.te((o,s)=>{let a=t.store(Lp),c=function(p){return p.document?new V(Ne.fromString(p.document.name).popFirst(5)):p.noDocument?V.fromSegments(p.noDocument.path):p.unknownDocument?V.fromSegments(p.unknownDocument.path):$(36783)}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>A.waitFor(i))}Mi(e,t){let r=t.store(jn),i=zx(this.serializer),o=new Ol(ug.fi,this.serializer.wt);return r.J().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ae();Go(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),A.forEach(a,(c,l)=>{let h=new rt(l),p=tg.bt(this.serializer,h),g=o.getIndexManager(h),y=og.bt(h,this.serializer,g,o.referenceDelegate);return new cg(i,y,p,g).recalculateAndSaveOverlaysForDocumentKeys(new bl(t,Un.le),c).next()})})}};function vP(n){n.createObjectStore(Ua,{keyPath:p3}).createIndex(LD,g3,{unique:!0}),n.createObjectStore(ja,{keyPath:"targetId"}).createIndex(HP,f3,{unique:!0}),n.createObjectStore(es)}var Ri="IndexedDbPersistence",LI=18e5,VI=5e3,jI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yq="main",eD=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.xi=o,this.window=s,this.document=a,this.Oi=l,this.Ni=h,this.Bi=p,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=g=>Promise.resolve(),!n.C())throw new B(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bw(this,i),this.Ui=t+yq,this.serializer=new Xp(c),this.Ki=new La(this.Ui,this.Bi,new Xw(this.serializer)),this.Pi=new Rw,this.Ti=new Vw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zx(this.serializer),this.Ei=new Aw,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,h===!1&&Ft(Ri,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(x.FAILED_PRECONDITION,jI);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new Un(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=t=>_(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(t=>_(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(()=>_(this,null,function*(){this.started&&(yield this.Gi())})))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ep(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(t=>{t||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(t=>this.isPrimary&&!t?this.Xi(e).next(()=>!1):!!t&&this.es(e).next(()=>!0))).catch(e=>{if(Bi(e))return k(Ri,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k(Ri,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return ll(e).get(Ea).next(t=>A.resolve(this.ts(t)))}ns(e){return Ep(e).delete(this.clientId)}rs(){return _(this,null,function*(){if(this.isPrimary&&!this.ss(this.Qi,LI)){this.Qi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=st(t,Ba);return r.J().next(i=>{let o=this._s(i,LI),s=i.filter(a=>o.indexOf(a)===-1);return A.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Wi)for(let t of e)this.Wi.removeItem(this.us(t.clientId))}})}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?A.resolve(!0):ll(e).get(Ea).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,VI)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new B(x.FAILED_PRECONDITION,jI);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ep(e).J().next(r=>this._s(r,VI).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k(Ri,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return _(this,null,function*(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),yield this.Ki.runTransaction("shutdown","readwrite",[$l,Ba],e=>{let t=new bl(e,Un.le);return this.Xi(t).next(()=>this.ns(t))}),this.Ki.close(),this.Ts()})}_s(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>Ep(e).J().next(t=>this._s(t,LI).map(r=>r.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,t){return og.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Lw(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return tg.bt(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,t,r){k(Ri,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===18?P3:c===17?YP:c===16?M3:c===15?UD:c===14?QP:c===13?KP:c===12?N3:c===11?WP:void $(60245)}(this.Bi),s;return this.Ki.runTransaction(e,i,o,a=>(s=new bl(a,this.li?this.li.next():Un.le),t==="readwrite-primary"?this.Yi(s).next(c=>!!c||this.Zi(s)).next(c=>{if(!c)throw Ft(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new B(x.FAILED_PRECONDITION,jP);return r(s)}).next(c=>this.es(s).next(()=>c)):this.Es(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Es(e){return ll(e).get(Ea).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,VI)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Ni||this.allowTabSynchronization&&t.allowTabSynchronization))throw new B(x.FAILED_PRECONDITION,jI)})}es(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ll(e).put(Ea,t)}static C(){return La.C()}Xi(e){let t=ll(e);return t.get(Ea).next(r=>this.ts(r)?(k(Ri,"Releasing primary lease."),t.delete(Ea)):A.resolve())}ss(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ft(`Detected an update time that is in the future: ${e} > ${r}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();let t=/(?:Version|Mobile)\/1[456]/;bE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var t;try{let r=((t=this.Wi)===null||t===void 0?void 0:t.getItem(this.us(e)))!==null;return k(Ri,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ft(Ri,"Failed to get zombied client id.",r),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){Ft("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ll(n){return st(n,$l)}function Ep(n){return st(n,Ba)}function vq(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var tD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=ae(),i=ae();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var nD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var dg=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return bE()?8:UP(We())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ws(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.bs(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new nD;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.fs)return this.Ds(e,t,s,a.size)})}).next(()=>o.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(ba()<=de.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Sa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),A.resolve()):(ba()<=de.DEBUG&&k("QueryEngine","Query:",Sa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(ba()<=de.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Sa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(t))):A.resolve())}ws(e,t){if(HM(t))return A.resolve(null);let r=Dn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=mw(t,null,"F"),r=Dn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ae(...o);return this.ys.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.vs(t,a);return this.Cs(t,l,s,c.readTime)?this.ws(e,mw(t,null,"F")):this.Fs(e,l,t,c)}))})))}bs(e,t,r,i){return HM(t)||i.isEqual(W.min())?A.resolve(null):this.ys.getDocuments(e,r).next(o=>{let s=this.vs(t,o);return this.Cs(t,s,r,i)?A.resolve(null):(ba()<=de.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sa(t)),this.Fs(e,s,t,o3(i,El)).next(a=>a))})}vs(e,t){let r=new Se(hx(e));return t.forEach((i,o)=>{zl(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return ba()<=de.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Sa(t)),this.ys.getDocumentsMatchingQuery(e,t,Cn.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var QD="LocalStore",_q=3e8,rD=class{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new Le(Q),this.Os=new Hn(o=>is(o),Hl),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cg(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}};function qx(n,e,t,r){return new rD(n,e,t,r)}function Gx(n,e){return _(this,null,function*(){let t=X(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ae();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({ks:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Eq(n,e){let t=X(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Bs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,g=p.keys(),y=A.resolve();return g.forEach(C=>{y=y.next(()=>h.getEntry(c,C)).next(M=>{let N=l.docVersions.get(C);G(N!==null,48541),M.version.compareTo(N)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ae();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Wx(n){let e=X(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function Iq(n,e){let t=X(n),r=e.snapshotVersion,i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.Ti.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ti.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ot.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(M,N,F){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=_q?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(g,y,h)&&a.push(t.Ti.updateTargetData(o,y))});let c=cn(),l=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(wq(o,s,e.documentUpdates).next(h=>{c=h.qs,l=h.Qs})),!r.isEqual(W.min())){let h=t.Ti.getLastRemoteSnapshotVersion(o).next(p=>t.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return A.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.xs=i,o))}function wq(n,e,t){let r=ae(),i=ae();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=cn();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(W.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):k(QD,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{qs:s,Qs:i}})}function Dq(n,e){let t=X(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Xo),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Cq(n,e){let t=X(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(o=>o?(i=o,A.resolve(i)):t.Ti.allocateTargetId(r).next(s=>(i=new Ja(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}function iD(n,e,t){return _(this,null,function*(){let r=X(n),i=r.xs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Bi(s))throw s;k(QD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function _P(n,e,t){let r=X(n),i=W.min(),o=ae();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=X(c),g=p.Os.get(h);return g!==void 0?A.resolve(p.xs.get(g)):p.Ti.getTargetData(l,h)}(r,s,Dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,t?i:W.min(),t?o:ae())).next(a=>(Tq(r,U3(e),a),{documents:a,$s:o})))}function Tq(n,e,t){let r=n.Ns.get(e)||W.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ns.set(e,r)}var hg=class{constructor(){this.activeTargetIds=G3()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var fg=class{constructor(){this.xo=new hg,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new hg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var oD=class{No(e){}shutdown(){}};var EP="ConnectivityMonitor",pg=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){k(EP,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){k(EP,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ip=null;function sD(){return Ip===null?Ip=function(){return 268435456+Math.round(2147483648*Math.random())}():Ip++,"0x"+Ip.toString(16)}var UI="RestConnection",bq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},aD=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Bp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,o){let s=sD(),a=this.jo(e,t.toUriEncodedString());k(UI,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,i,o);let{host:l}=new URL(a),h=mi(l);return this.Jo(e,a,c,r,h).then(p=>(k(UI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw rs(UI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Yo(e,t,r,i,o,s){return this.zo(e,t,r,i,o)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,t){let r=bq[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}};var cD=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var At="WebChannelConnection",uD=class extends aD{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=sD();return new Promise((a,c)=>{let l=new MI;l.setWithCredentials(!0),l.listenOnce(PI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case sl.NO_ERROR:let p=l.getResponseJson();k(At,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case sl.TIMEOUT:k(At,`RPC '${e}' ${s} timed out`),c(new B(x.DEADLINE_EXCEEDED,"Request time out"));break;case sl.HTTP_ERROR:let g=l.getStatus();if(k(At,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let M=function(F){let z=F.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(z)>=0?z:x.UNKNOWN}(C.status);c(new B(M,C.message))}else c(new B(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new B(x.UNAVAILABLE,"Connection failed."));break;default:$(9055,{h_:e,streamId:s,P_:l.getLastErrorCode(),T_:l.getLastError()})}}finally{k(At,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);k(At,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}I_(e,t,r){let i=sD(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=OI(),a=kI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");k(At,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c);this.E_(p);let g=!1,y=!1,C=new cD({Zo:N=>{y?k(At,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(k(At,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),k(At,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Xo:()=>p.close()}),M=(N,F,z)=>{N.listen(F,U=>{try{z(U)}catch(oe){setTimeout(()=>{throw oe},0)}})};return M(p,_a.EventType.OPEN,()=>{y||(k(At,`RPC '${e}' stream ${i} transport opened.`),C.__())}),M(p,_a.EventType.CLOSE,()=>{y||(y=!0,k(At,`RPC '${e}' stream ${i} transport closed`),C.u_(),this.d_(p))}),M(p,_a.EventType.ERROR,N=>{y||(y=!0,rs(At,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),C.u_(new B(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,_a.EventType.MESSAGE,N=>{var F;if(!y){let z=N.data[0];G(!!z,16349);let U=z,oe=U?.error||((F=U[0])===null||F===void 0?void 0:F.error);if(oe){k(At,`RPC '${e}' stream ${i} received error:`,oe);let _e=oe.status,Z=function(I){let D=Ze[I];if(D!==void 0)return Dx(D)}(_e),w=oe.message;Z===void 0&&(Z=x.INTERNAL,w="Unknown error status: "+_e+" with message "+oe.message),y=!0,C.u_(new B(Z,w)),p.close()}else k(At,`RPC '${e}' stream ${i} received:`,z),C.c_(z)}}),M(a,xI.STAT_EVENT,N=>{N.stat===mp.PROXY?k(At,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===mp.NOPROXY&&k(At,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}};function Sq(){return typeof window<"u"?window:null}function Rp(){return typeof document<"u"?document:null}function jg(n){return new Dw(n,!0)}var gg=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var IP="PersistentStream",mg=class{constructor(e,t,r,i,o,s,a,c){this.xi=e,this.S_=r,this.D_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new gg(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return _(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return _(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,t){return _(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(Ft(t.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(t)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{let i=new B(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){let r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>_(this,null,function*(){this.state=0,this.start()}))}j_(e){return k(IP,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(k(IP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},lD=class extends mg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let t=sq(this.serializer,e),r=function(o){if(!("targetChange"in o))return W.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?W.min():s.readTime?Lt(s.readTime):W.min()}(e);return this.listener.Y_(t,r)}Z_(e){let t={};t.database=bw(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=zp(c)?{documents:Rx(o,c)}:{query:Nx(o,c).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Cx(o,s.resumeToken);let l=Cw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(W.min())>0){a.readTime=Za(o,s.snapshotVersion.toTimestamp());let l=Cw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=cq(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){let t={};t.database=bw(this.serializer),t.removeTarget=e,this.Q_(t)}},dD=class extends mg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return G(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,G(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){G(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let t=aq(e.writeResults,e.commitTime),r=Lt(e.commitTime);return this.listener.ra(r,t)}ia(){let e={};e.database=bw(this.serializer),this.Q_(e)}ta(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Jp(this.serializer,r))};this.Q_(t)}};var hD=class{},fD=class extends hD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,Tw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(x.UNKNOWN,o.toString())})}Yo(e,t,r,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Yo(e,Tw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(x.UNKNOWN,s.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},pD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ft(t),this.ua=!1):k("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var us="RemoteStore",gD=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(s=>{r.enqueueAndForget(()=>_(this,null,function*(){hs(this)&&(k(us,"Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let l=X(c);l.da.add(4),yield ql(l),l.Va.set("Unknown"),l.da.delete(4),yield Ug(l)})}(this))}))}),this.Va=new pD(r,i)}};function Ug(n){return _(this,null,function*(){if(hs(n))for(let e of n.Aa)yield e(!0)})}function ql(n){return _(this,null,function*(){for(let e of n.Aa)yield e(!1)})}function Kx(n,e){let t=X(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),XD(t)?JD(t):rc(t).N_()&&ZD(t,e))}function YD(n,e){let t=X(n),r=rc(t);t.Ea.delete(e),r.N_()&&Qx(t,e),t.Ea.size===0&&(r.N_()?r.k_():hs(t)&&t.Va.set("Unknown"))}function ZD(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rc(n).Z_(e)}function Qx(n,e){n.ma.Ke(e),rc(n).X_(e)}function JD(n){n.ma=new ww({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),rc(n).start(),n.Va.ca()}function XD(n){return hs(n)&&!rc(n).O_()&&n.Ea.size>0}function hs(n){return X(n).da.size===0}function Yx(n){n.ma=void 0}function Aq(n){return _(this,null,function*(){n.Va.set("Online")})}function Rq(n){return _(this,null,function*(){n.Ea.forEach((e,t)=>{ZD(n,e)})})}function Nq(n,e){return _(this,null,function*(){Yx(n),XD(n)?(n.Va.Pa(e),JD(n)):n.Va.set("Unknown")})}function Mq(n,e,t){return _(this,null,function*(){if(n.Va.set("Online"),e instanceof Qp&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ea.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ea.delete(a),i.ma.removeTarget(a))})}(n,e)}catch(r){k(us,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield yg(n,r)}else if(e instanceof xa?n.ma.Xe(e):e instanceof Kp?n.ma.ot(e):n.ma.nt(e),!t.isEqual(W.min()))try{let r=yield Wx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.ma.It(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ea.get(l);h&&o.Ea.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.Ea.get(c);if(!h)return;o.Ea.set(c,h.withResumeToken(ot.EMPTY_BYTE_STRING,h.snapshotVersion)),Qx(o,c);let p=new Ja(h.target,c,l,h.sequenceNumber);ZD(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k(us,"Failed to raise snapshot:",r),yield yg(n,r)}})}function yg(n,e,t){return _(this,null,function*(){if(!Bi(e))throw e;n.da.add(1),yield ql(n),n.Va.set("Offline"),t||(t=()=>Wx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){k(us,"Retrying IndexedDB access"),yield t(),n.da.delete(1),yield Ug(n)}))})}function Zx(n,e){return e().catch(t=>yg(n,t,e))}function Gl(n){return _(this,null,function*(){let e=X(n),t=ji(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Xo;for(;Pq(e);)try{let i=yield Dq(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,xq(e,i)}catch(i){yield yg(e,i)}Jx(e)&&Xx(e)})}function Pq(n){return hs(n)&&n.Ia.length<10}function xq(n,e){n.Ia.push(e);let t=ji(n);t.N_()&&t.ea&&t.ta(e.mutations)}function Jx(n){return hs(n)&&!ji(n).O_()&&n.Ia.length>0}function Xx(n){ji(n).start()}function kq(n){return _(this,null,function*(){ji(n).ia()})}function Oq(n){return _(this,null,function*(){let e=ji(n);for(let t of n.Ia)e.ta(t.mutations)})}function Fq(n,e,t){return _(this,null,function*(){let r=n.Ia.shift(),i=_w.from(r,e,t);yield Zx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Gl(n)})}function Lq(n,e){return _(this,null,function*(){e&&ji(n).ea&&(yield function(r,i){return _(this,null,function*(){if(function(s){return X3(s)&&s!==x.ABORTED}(i.code)){let o=r.Ia.shift();ji(r).L_(),yield Zx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Gl(r)}})}(n,e)),Jx(n)&&Xx(n)})}function wP(n,e){return _(this,null,function*(){let t=X(n);t.asyncQueue.verifyOperationInProgress(),k(us,"RemoteStore received new credentials");let r=hs(t);t.da.add(3),yield ql(t),r&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),yield Ug(t)})}function Vq(n,e){return _(this,null,function*(){let t=X(n);e?(t.da.delete(2),yield Ug(t)):e||(t.da.add(2),yield ql(t),t.Va.set("Unknown"))})}function rc(n){return n.fa||(n.fa=function(t,r,i){let o=X(t);return o.oa(),new lD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:Aq.bind(null,n),n_:Rq.bind(null,n),i_:Nq.bind(null,n),Y_:Mq.bind(null,n)}),n.Aa.push(e=>_(null,null,function*(){e?(n.fa.L_(),XD(n)?JD(n):n.Va.set("Unknown")):(yield n.fa.stop(),Yx(n))}))),n.fa}function ji(n){return n.ga||(n.ga=function(t,r,i){let o=X(t);return o.oa(),new dD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:kq.bind(null,n),i_:Lq.bind(null,n),na:Oq.bind(null,n),ra:Fq.bind(null,n)}),n.Aa.push(e=>_(null,null,function*(){e?(n.ga.L_(),yield Gl(n)):(yield n.ga.stop(),n.Ia.length>0&&(k(us,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))}))),n.ga}var mD=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new $n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function eC(n,e){if(Ft("AsyncQueue",`${e}: ${n}`),Bi(n))return new B(x.UNAVAILABLE,`${e}: ${n}`);throw n}var vg=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||V.comparator(t.key,r.key):(t,r)=>V.comparator(t.key,r.key),this.keyedMap=dl(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var _g=class{constructor(){this.pa=new Le(V.comparator)}track(e){let t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):$(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){let e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}},ec=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,vg.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var yD=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},vD=class{constructor(){this.queries=DP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=X(t),o=i.queries;i.queries=DP(),o.forEach((s,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new B(x.ABORTED,"Firestore shutting down"))}};function DP(){return new Hn(n=>dx(n),Vg)}function ek(n,e){return _(this,null,function*(){let t=X(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Da()&&e.va()&&(r=2):(o=new yD,r=e.va()?0:1);try{switch(r){case 0:o.ba=yield t.onListen(i,!0);break;case 1:o.ba=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=eC(s,`Initialization of query '${Sa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.Fa(t.onlineState),o.ba&&e.Ma(o.ba)&&tC(t)})}function tk(n,e){return _(this,null,function*(){let t=X(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function jq(n,e){let t=X(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Ma(i)&&(r=!0);s.ba=i}}r&&tC(t)}function Uq(n,e,t){let r=X(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function tC(n){n.Ca.forEach(e=>{e.next()})}var _D,CP;(CP=_D||(_D={})).xa="default",CP.Cache="cache";var Eg=class{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ec(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;let r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;let t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==_D.Cache}};var Ig=class{constructor(e){this.key=e}},wg=class{constructor(e){this.key=e}},ED=class{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ae(),this.mutatedKeys=ae(),this.Za=hx(e),this.Xa=new vg(this.Za)}get eu(){return this.Ha}tu(e,t){let r=t?t.nu:new _g,i=t?t.Xa:this.Xa,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=zl(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),M=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;g&&y?g.data.isEqual(y.data)?C!==M&&(r.track({type:3,doc:y}),N=!0):this.ru(g,y)||(r.track({type:2,doc:y}),N=!0,(c&&this.Za(y,c)>0||l&&this.Za(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),N=!0):g&&!y&&(r.track({type:1,doc:g}),N=!0,(c||l)&&(a=!0)),N&&(y?(s=s.add(y),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Xa:s,nu:r,Cs:a,mutatedKeys:o}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let s=e.nu.wa();s.sort((h,p)=>function(y,C){let M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{Vt:N})}};return M(y)-M(C)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),i=i!=null&&i;let a=t&&!i?this.su():[],c=this.Ya.size===0&&this.current&&!i?1:0,l=c!==this.Ja;return this.Ja=c,s.length!==0||l?{snapshot:new ec(this.query,e.Xa,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new _g,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=ae(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new wg(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new Ig(r))}),t}au(e){this.Ha=e.$s,this.Ya=ae();let t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return ec.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},nC="SyncEngine",ID=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},wD=class{constructor(e){this.key=e,this.cu=!1}},DD=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new Hn(a=>dx(a),Vg),this.Pu=new Map,this.Tu=new Set,this.Iu=new Le(V.comparator),this.Eu=new Map,this.du=new kl,this.Au={},this.Ru=new Map,this.Vu=Xa.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function Bq(n,e,t=!0){return _(this,null,function*(){let r=ak(n),i,o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=yield nk(r,e,t,!0),i})}function $q(n,e){return _(this,null,function*(){let t=ak(n);yield nk(t,e,!0,!1)})}function nk(n,e,t,r){return _(this,null,function*(){let i=yield Cq(n.localStore,Dn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Hq(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Kx(n.remoteStore,i),a})}function Hq(n,e,t,r,i){return _(this,null,function*(){n.fu=(p,g,y)=>function(M,N,F,z){return _(this,null,function*(){let U=N.view.tu(F);U.Cs&&(U=yield _P(M.localStore,N.query,!1).then(({documents:w})=>N.view.tu(w,U)));let oe=z&&z.targetChanges.get(N.targetId),_e=z&&z.targetMismatches.get(N.targetId)!=null,Z=N.view.applyChanges(U,M.isPrimaryClient,oe,_e);return bP(M,N.targetId,Z.ou),Z.snapshot})}(n,p,g,y);let o=yield _P(n.localStore,e,!0),s=new ED(e,o.$s),a=s.tu(o.documents),c=Pl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);bP(n,t,l.ou);let h=new ID(e,t,s);return n.hu.set(e,h),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),l.snapshot})}function zq(n,e,t){return _(this,null,function*(){let r=X(n),i=r.hu.get(e),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(s=>!Vg(s,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield iD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&YD(r.remoteStore,i.targetId),CD(r,i.targetId)}).catch(ls))):(CD(r,i.targetId),yield iD(r.localStore,i.targetId,!0))})}function qq(n,e){return _(this,null,function*(){let t=X(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),YD(t.remoteStore,r.targetId))})}function Gq(n,e,t){return _(this,null,function*(){let r=ck(n);try{let i=yield function(s,a){let c=X(s),l=Fe.now(),h=a.reduce((y,C)=>y.add(C.key),ae()),p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=cn(),M=ae();return c.Bs.getEntries(y,h).next(N=>{C=N,C.forEach((F,z)=>{z.isValidDocument()||(M=M.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,C)).next(N=>{p=N;let F=[];for(let z of a){let U=J3(z,p.get(z.key).overlayedDocument);U!=null&&F.push(new lr(z.key,U,ox(U.value.mapValue),wn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,F,a)}).next(N=>{g=N;let F=N.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(y,N.batchId,F)})}).then(()=>({batchId:g.batchId,changes:px(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Au[s.currentUser.toKey()];l||(l=new Le(Q)),l=l.insert(a,c),s.Au[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Wl(r,i.changes),yield Gl(r.remoteStore)}catch(i){let o=eC(i,"Failed to persist write");t.reject(o)}})}function rk(n,e){return _(this,null,function*(){let t=X(n);try{let r=yield Iq(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(G(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.cu=!0:i.modifiedDocuments.size>0?G(s.cu,14607):i.removedDocuments.size>0&&(G(s.cu,42227),s.cu=!1))}),yield Wl(t,r,e)}catch(r){yield ls(r)}})}function TP(n,e,t){let r=X(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.hu.forEach((o,s)=>{let a=s.view.Fa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=X(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let g of p.Sa)g.Fa(a)&&(l=!0)}),l&&tC(c)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Wq(n,e,t){return _(this,null,function*(){let r=X(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Le(V.comparator);s=s.insert(o,mt.newNoDocument(o,W.min()));let a=ae().add(o),c=new Wp(W.min(),new Map,new Le(Q),s,a);yield rk(r,c),r.Iu=r.Iu.remove(o),r.Eu.delete(e),rC(r)}else yield iD(r.localStore,e,!1).then(()=>CD(r,e,t)).catch(ls)})}function Kq(n,e){return _(this,null,function*(){let t=X(n),r=e.batch.batchId;try{let i=yield Eq(t.localStore,e);ok(t,r,null),ik(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Wl(t,i)}catch(i){yield ls(i)}})}function Qq(n,e,t){return _(this,null,function*(){let r=X(n);try{let i=yield function(s,a){let c=X(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(G(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);ok(r,e,t),ik(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Wl(r,i)}catch(i){yield ls(i)}})}function ik(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function ok(n,e,t){let r=X(n),i=r.Au[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function CD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||sk(n,r)})}function sk(n,e){n.Tu.delete(e.path.canonicalString());let t=n.Iu.get(e);t!==null&&(YD(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),rC(n))}function bP(n,e,t){for(let r of t)r instanceof Ig?(n.du.addReference(r.key,e),Yq(n,r)):r instanceof wg?(k(nC,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||sk(n,r.key)):$(19791,{pu:r})}function Yq(n,e){let t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(k(nC,"New document in limbo: "+t),n.Tu.add(r),rC(n))}function rC(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){let e=n.Tu.values().next().value;n.Tu.delete(e);let t=new V(Ne.fromString(e)),r=n.Vu.next();n.Eu.set(r,new wD(t)),n.Iu=n.Iu.insert(t,r),Kx(n.remoteStore,new Ja(Dn(Lg(t.path)),r,"TargetPurposeLimboResolution",Un.le))}}function Wl(n,e,t){return _(this,null,function*(){let r=X(n),i=[],o=[],s=[];r.hu.isEmpty()||(r.hu.forEach((a,c)=>{s.push(r.fu(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=tD.Rs(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.lu.Y_(i),yield function(c,l){return _(this,null,function*(){let h=X(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>A.forEach(l,g=>A.forEach(g.ds,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>A.forEach(g.As,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Bi(p))throw p;k(QD,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.xs.get(g),C=y.snapshotVersion,M=y.withLastLimboFreeSnapshotVersion(C);h.xs=h.xs.insert(g,M)}}})}(r.localStore,o))})}function Zq(n,e){return _(this,null,function*(){let t=X(n);if(!t.currentUser.isEqual(e)){k(nC,"User change. New user:",e.toKey());let r=yield Gx(t.localStore,e);t.currentUser=e,function(o,s){o.Ru.forEach(a=>{a.forEach(c=>{c.reject(new B(x.CANCELLED,s))})}),o.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wl(t,r.ks)}})}function Jq(n,e){let t=X(n),r=t.Eu.get(e);if(r&&r.cu)return ae().add(r.key);{let i=ae(),o=t.Pu.get(e);if(!o)return i;for(let s of o){let a=t.hu.get(s);i=i.unionWith(a.view.eu)}return i}}function ak(n){let e=X(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wq.bind(null,e),e.lu.Y_=jq.bind(null,e.eventManager),e.lu.gu=Uq.bind(null,e.eventManager),e}function ck(n){let e=X(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Kq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qq.bind(null,e),e}var iC=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=jg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),yield this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)})}vu(t,r){return null}Cu(t,r){return null}Du(t){return qx(this.persistence,new dg,t.initialUser,this.serializer)}Su(t){return new Ol(ug.fi,this.serializer)}bu(t){return new fg}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),TD=class extends iC{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){G(this.persistence.referenceDelegate instanceof lg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new sg(r,e.asyncQueue,t)}Su(e){let t=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new Ol(r=>lg.fi(r,t),this.serializer)}},bD=class n extends iC{constructor(e,t,r){super(),this.Fu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){yield pr(n.prototype,this,"initialize").call(this,e),yield this.Fu.initialize(this,e),yield ck(this.Fu.syncEngine),yield Gl(this.Fu.remoteStore),yield this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}Du(e){return qx(this.persistence,new dg,e.initialUser,this.serializer)}vu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new sg(r,e.asyncQueue,t)}Cu(e,t){let r=new XI(t,this.persistence);return new JI(e.asyncQueue,r)}Su(e){let t=vq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new eD(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Sq(),Rp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new fg}};var uk=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>TP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zq.bind(null,this.syncEngine),yield Vq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new vD}()}createDatastore(t){let r=jg(t.databaseInfo.databaseId),i=function(s){return new uD(s)}(t.databaseInfo);return function(s,a,c,l){return new fD(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new gD(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>TP(this.syncEngine,r,0),function(){return pg.C()?new pg:new oD}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let g=new DD(o,s,a,c,l,h);return p&&(g.mu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield function(o){return _(this,null,function*(){let s=X(o);k(us,"RemoteStore shutting down."),s.da.add(5),yield ql(s),s.Ra.shutdown(),s.Va.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Dg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ft("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ui="FirestoreClient",SD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=rt.UNAUTHENTICATED,this.clientId=Pp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){k(Ui,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k(Ui,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=eC(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function BI(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k(Ui,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield Gx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function SP(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Xq(n);k(Ui,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>wP(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>wP(e.remoteStore,i)),n._onlineComponents=e})}function Xq(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k(Ui,"Using user provided OfflineComponentProvider");try{yield BI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;rs("Error using user provided cache. Falling back to memory cache: "+t),yield BI(n,new iC)}}else k(Ui,"Using default OfflineComponentProvider"),yield BI(n,new TD(void 0));return n._offlineComponents})}function lk(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k(Ui,"Using user provided OnlineComponentProvider"),yield SP(n,n._uninitializedComponentsProvider._online)):(k(Ui,"Using default OnlineComponentProvider"),yield SP(n,new uk))),n._onlineComponents})}function e6(n){return lk(n).then(e=>e.syncEngine)}function AD(n){return _(this,null,function*(){let e=yield lk(n),t=e.eventManager;return t.onListen=Bq.bind(null,e.syncEngine),t.onUnlisten=zq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$q.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qq.bind(null,e.syncEngine),t})}function t6(n,e,t={}){let r=new $n;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,a,c,l){let h=new Dg({next:g=>{h.xu(),s.enqueueAndForget(()=>tk(o,p)),g.fromCache&&c.source==="server"?l.reject(new B(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Eg(a,h,{includeMetadataChanges:!0,Qa:!0});return ek(o,p)}(yield AD(n),n.asyncQueue,e,t,r)})),r.promise}function dk(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var AP=new Map;function hk(n,e,t){if(!t)throw new B(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function n6(n,e,t,r){if(e===!0&&r===!0)throw new B(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function RP(n){if(!V.isDocumentKey(n))throw new B(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function NP(n){if(V.isDocumentKey(n))throw new B(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function oC(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$(12329,{type:typeof n})}function cr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new B(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=oC(n);throw new B(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var fk="firestore.googleapis.com",MP=!0,Cg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fk,this.ssl=MP}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:MP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mq)throw new B(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},tc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $I;switch(r.type){case"firstParty":return new GI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=AP.get(t);r&&(k("ComponentProvider","Removing Datastore"),AP.delete(t),r.terminate())}(this),Promise.resolve()}};function pk(n,e,t,r={}){var i;n=cr(n,tc);let o=mi(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&($f(`https://${c}`),Hf("Firestore",!0)),s.host!==fk&&s.host!==c&&rs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!tr(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=rt.MOCK_USER;else{h=$R(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new rt(g)}n._authCredentials=new HI(new Np(h,p))}}var Fl=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},un=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Pi=class n extends Fl{constructor(e,t,r){super(e,t,Lg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new V(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function gk(n,e,...t){if(n=bt(n),hk("collection","path",e),n instanceof tc){let r=Ne.fromString(e,...t);return NP(r),new Pi(n,null,r)}{if(!(n instanceof un||n instanceof Pi))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ne.fromString(e,...t));return NP(r),new Pi(n.firestore,null,r)}}function mk(n,e,...t){if(n=bt(n),arguments.length===1&&(e=Pp.newId()),hk("doc","path",e),n instanceof tc){let r=Ne.fromString(e,...t);return RP(r),new un(n,null,new V(r))}{if(!(n instanceof un||n instanceof Pi))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ne.fromString(e,...t));return RP(r),new un(n.firestore,n instanceof Pi?n.converter:null,new V(r))}}var PP="AsyncQueue",Tg=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new gg(this,"async_queue_retry"),this.rc=()=>{let r=Rp();r&&k(PP,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let t=Rp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let t=Rp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let t=new $n;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return _(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Bi(e))throw e;k(PP,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Ft("INTERNAL UNHANDLED ERROR: ",xP(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);let i=mD.createAndSchedule(this,e,t,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&$(47125,{cc:xP(this.Xu)})}verifyOperationInProgress(){}lc(){return _(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let t=this.Zu.indexOf(e);this.Zu.splice(t,1)}};function xP(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function kP(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Hr=class extends tc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Tg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Tg(e),this._firestoreClient=void 0,yield e}})}};function yk(n,e){let t=typeof n=="object"?n:Oo(),r=typeof n=="string"?n:e||Bp,i=pa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=BR("firestore");o&&pk(i,...o)}return i}function sC(n){if(n._terminated)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||vk(n),n._firestoreClient}function vk(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new rw(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,dk(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new SD(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function _k(n,e){rs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return r6(n,uk.provider,{build:r=>new bD(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function r6(n,e,t){if((n=cr(n,Hr))._firestoreClient||n._terminated)throw new B(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new B(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},vk(n)}var Ll=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ot.fromBase64String(e))}catch(t){throw new B(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Vl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var bg=class{constructor(e){this._methodName=e}};var jl=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}};var Ul=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var i6=/^__.*__$/,RD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vi(e,this.data,t,this.fieldTransforms)}};function Ek(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{Ic:n})}}var ND=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Sg(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(Ek(this.Ic)&&i6.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},MD=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||jg(e)}bc(e,t,r,i=!1){return new ND({Ic:e,methodName:t,wc:r,path:it.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function o6(n){let e=n._freezeSettings(),t=jg(n._databaseId);return new MD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function s6(n,e,t,r,i,o={}){let s=n.bc(o.merge||o.mergeFields?2:0,e,t,i);Ck("Data must be an object, but it was:",s,r);let a=wk(r,s),c,l;if(o.merge)c=new Bn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=a6(e,p,t);if(!s.contains(g))throw new B(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);u6(h,g)||h.push(g)}c=new Bn(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new RD(new an(a),c,l)}function Ik(n,e){if(Dk(n=bt(n)))return Ck("Unsupported field value:",e,n),wk(n,e);if(n instanceof bg)return function(r,i){if(!Ek(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Ik(a,i.fc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return W3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Fe.fromDate(r);return{timestampValue:Za(i.serializer,o)}}if(r instanceof Fe){let o=new Fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Za(i.serializer,o)}}if(r instanceof jl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ll)return{bytesValue:Cx(i.serializer,r._byteString)};if(r instanceof un){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.gc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:WD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ul)return function(s,a){return{mapValue:{fields:{[$D]:{stringValue:HD},[Ha]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.gc("VectorValues must only contain numeric values.");return GD(a.serializer,l)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${oC(r)}`)}(n,e)}function wk(n,e){let t={};return ZP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(n,(r,i)=>{let o=Ik(i,e.Ac(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Dk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Fe||n instanceof jl||n instanceof Ll||n instanceof un||n instanceof bg||n instanceof Ul)}function Ck(n,e,t){if(!Dk(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=oC(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function a6(n,e,t){if((e=bt(e))instanceof Vl)return e._internalPath;if(typeof e=="string")return Tk(n,e);throw Sg("Field path arguments must be of type string or ",n,!1,void 0,t)}var c6=new RegExp("[~\\*/\\[\\]]");function Tk(n,e,t){if(e.search(c6)>=0)throw Sg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vl(...e.split("."))._internalPath}catch{throw Sg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new B(x.INVALID_ARGUMENT,a+n+c)}function u6(n,e){return n.some(t=>t.isEqual(e))}var Ag=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new PD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(bk("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},PD=class extends Ag{data(){return super.data()}};function bk(n,e){return typeof e=="string"?Tk(n,e):e instanceof Vl?e._internalPath:e._delegate._internalPath}function Sk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xD=class{convertValue(e,t="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ds(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ha].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Oe(s.doubleValue));return new Ul(o)}convertGeoPoint(e){return new jl(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Og(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sl(e));default:return null}}convertTimestamp(e){let t=Br(e);return new Fe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ne.fromString(e);G(kx(r),9688,{name:e});let i=new $a(r.get(1),r.get(3)),o=new V(r.popFirst(5));return i.isEqual(t)||Ft(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function l6(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Zo=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Rg=class extends Ag{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ka(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(bk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ka=class extends Rg{data(e={}){return super.data(e)}},Ng=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Zo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ka(this._firestore,this._userDataWriter,r.key,r,new Zo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new ka(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ka(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:d6(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function d6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:n})}}var Bl=class extends xD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ll(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,t)}};function Ak(n){n=cr(n,Fl);let e=cr(n.firestore,Hr),t=sC(e),r=new Bl(e);return Sk(n._query),t6(t,n._query).then(i=>new Ng(e,r,n,i))}function Rk(n,e,t){n=cr(n,un);let r=cr(n.firestore,Hr),i=l6(n.converter,e,t);return Pk(r,[s6(o6(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,wn.none())])}function Nk(n){return Pk(cr(n.firestore,Hr),[new Ya(n._key,wn.none())])}function Mk(n,...e){var t,r,i;n=bt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||kP(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(kP(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof un)l=cr(n.firestore,Hr),h=Lg(n._key.path),c={next:p=>{e[s]&&e[s](h6(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=cr(n,Fl);l=cr(p.firestore,Hr),h=p._query;let g=new Bl(l);c={next:y=>{e[s]&&e[s](new Ng(l,g,p,y))},error:e[s+1],complete:e[s+2]},Sk(n._query)}return function(g,y,C,M){let N=new Dg(M),F=new Eg(y,N,C);return g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return ek(yield AD(g),F)})),()=>{N.xu(),g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return tk(yield AD(g),F)}))}}(sC(l),h,a,c)}function Pk(n,e){return function(r,i){let o=new $n;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return Gq(yield e6(r),i,o)})),o.promise}(sC(n),e)}function h6(n,e,t){let r=t.docs.get(e._key),i=new Bl(n);return new Rg(n,i,e._key,r,new Zo(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){nc=i})(vi),Fn(new Ot("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Hr(new zI(r.getProvider("auth-internal")),new WI(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $a(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Be(wM,DM,e),Be(wM,DM,"esm2017")})();var zr=class{constructor(e){return e}},xk="firestore",aC=class{constructor(){return ma(xk)}};var cC=new H("angularfire2.firestore-instances");function f6(n,e){let t=Yu(xk,n,e);return t&&new zr(t)}function p6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zr(r)}}var g6={provide:aC,deps:[[new zt,cC]]},m6={provide:zr,useFactory:f6,deps:[[new zt,cC],Or]};function kk(n,...e){return Be("angularfire",_i.full,"fst"),Zt([m6,g6,{provide:cC,useFactory:p6(n),multi:!0,deps:[De,$e,Ei,Lo,[new zt,ol],[new zt,ya],...e]}])}var Bg=St(gk,!0,2);var Ok=St(Nk,!0,2);var uC=St(mk,!0,2);var Fk=St(_k,!0);var Lk=St(Ak,!0);var Vk=St(yk,!0);var $g=St(Mk,!0);var jk=St(Rk,!0,2);var Uk={production:!1,firebaseConfig:{apiKey:"AIzaSyDmjbCIEhznuL9kGWoE48GP2yyacYgqVYE",authDomain:"farmconnect-7a50e.firebaseapp.com",projectId:"farmconnect-7a50e",storageBucket:"farmconnect-7a50e.firebasestorage.app",messagingSenderId:"318034306308",appId:"1:318034306308:web:567e7d1648118387a99c51",measurementId:"G-66HRVYYEE6"}};var Bk={providers:[Yy(),h_({eventCoalescing:!0}),_E(FR),gN(()=>mN(Uk.firebaseConfig)),mM(()=>yM()),kk(()=>{let n=Vk();return Fk(n),n})]};var Yk=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(le(cu),le(Ks))};static \u0275dir=pt({type:n})}return n})(),y6=(()=>{class n extends Yk{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Co(n)))(i||n)}})();static \u0275dir=pt({type:n,features:[Jn]})}return n})(),Zk=new H("");var v6={provide:Zk,useExisting:Er(()=>Yg),multi:!0};function _6(){let n=vn()?vn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var E6=new H(""),Yg=(()=>{class n extends Yk{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!_6())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(le(cu),le(Ks),le(E6,8))};static \u0275dir=pt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ge("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Zs([v6]),Jn]})}return n})();function I6(n){return n==null||w6(n)===0}function w6(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var fC=new H(""),Jk=new H("");function D6(n){return I6(n.value)?{required:!0}:null}function $k(n){return null}function Xk(n){return n!=null}function eO(n){return hi(n)?Ue(n):n}function tO(n){let e={};return n.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function nO(n,e){return e.map(t=>t(n))}function C6(n){return!n.validate}function rO(n){return n.map(e=>C6(e)?e:t=>e.validate(t))}function T6(n){if(!n)return null;let e=n.filter(Xk);return e.length==0?null:function(t){return tO(nO(t,e))}}function pC(n){return n!=null?T6(rO(n)):null}function b6(n){if(!n)return null;let e=n.filter(Xk);return e.length==0?null:function(t){let r=nO(t,e).map(eO);return Zm(r).pipe(fe(tO))}}function gC(n){return n!=null?b6(rO(n)):null}function Hk(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function S6(n){return n._rawValidators}function A6(n){return n._rawAsyncValidators}function lC(n){return n?Array.isArray(n)?n:[n]:[]}function zg(n,e){return Array.isArray(n)?n.includes(e):n===e}function zk(n,e){let t=lC(e);return lC(n).forEach(i=>{zg(t,i)||t.push(i)}),t}function qk(n,e){return lC(e).filter(t=>!zg(n,t))}var qg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},sc=class extends qg{name;get formDirective(){return null}get path(){return null}},Xl=class extends qg{_parent=null;name=null;valueAccessor=null},Gg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},R6={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Tue=K(O({},R6),{"[class.ng-submitted]":"isSubmitted"}),iO=(()=>{class n extends Gg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(le(Xl,2))};static \u0275dir=pt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&So("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Jn]})}return n})(),oO=(()=>{class n extends Gg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(le(sc,10))};static \u0275dir=pt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&So("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Jn]})}return n})();var Kl="VALID",Hg="INVALID",ic="PENDING",Ql="DISABLED",$i=class{},Wg=class extends $i{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Zl=class extends $i{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Jl=class extends $i{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},oc=class extends $i{status;source;constructor(e,t){super(),this.status=e,this.source=t}},dC=class extends $i{source;constructor(e){super(),this.source=e}},hC=class extends $i{source;constructor(e){super(),this.source=e}};function sO(n){return(Zg(n)?n.validators:n)||null}function N6(n){return Array.isArray(n)?pC(n):n||null}function aO(n,e){return(Zg(e)?e.asyncValidators:n)||null}function M6(n){return Array.isArray(n)?gC(n):n||null}function Zg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function P6(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[t])throw new j(1001,"")}function x6(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new j(1002,"")})}var Kg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Pn(this.statusReactive)}set status(e){Pn(()=>this.statusReactive.set(e))}_status=Xn(()=>this.statusReactive());statusReactive=Qe(void 0);get valid(){return this.status===Kl}get invalid(){return this.status===Hg}get pending(){return this.status==ic}get disabled(){return this.status===Ql}get enabled(){return this.status!==Ql}errors;get pristine(){return Pn(this.pristineReactive)}set pristine(e){Pn(()=>this.pristineReactive.set(e))}_pristine=Xn(()=>this.pristineReactive());pristineReactive=Qe(!0);get dirty(){return!this.pristine}get touched(){return Pn(this.touchedReactive)}set touched(e){Pn(()=>this.touchedReactive.set(e))}_touched=Xn(()=>this.touchedReactive());touchedReactive=Qe(!1);get untouched(){return!this.touched}_events=new et;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(zk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(zk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(qk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(qk(e,this._rawAsyncValidators))}hasValidator(e){return zg(this._rawValidators,e)}hasAsyncValidator(e){return zg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(K(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Jl(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Jl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(K(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Zl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Zl(!0,r))}markAsPending(e={}){this.status=ic;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new oc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(K(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ql,this.errors=null,this._forEachChild(i=>{i.disable(K(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wg(this.value,r)),this._events.next(new oc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(K(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Kl,this._forEachChild(r=>{r.enable(K(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(K(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kl||this.status===ic)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wg(this.value,t)),this._events.next(new oc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(K(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ql:Kl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ic,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=eO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new oc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new we,this.statusChanges=new we}_calculateStatus(){return this._allControlsDisabled()?Ql:this.errors?Hg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ic)?ic:this._anyControlsHaveStatus(Hg)?Hg:Kl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Zl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Jl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Zg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=N6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=M6(this._rawAsyncValidators)}},Qg=class extends Kg{constructor(e,t,r){super(sO(t),aO(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){x6(this,!0,e),Object.keys(e).forEach(r=>{P6(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var mC=new H("",{providedIn:"root",factory:()=>yC}),yC="always";function k6(n,e){return[...e.path,n]}function cO(n,e,t=yC){uO(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),F6(n,e),V6(n,e),L6(n,e),O6(n,e)}function Gk(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function O6(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function uO(n,e){let t=S6(n);e.validator!==null?n.setValidators(Hk(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=A6(n);e.asyncValidator!==null?n.setAsyncValidators(Hk(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Gk(e._rawValidators,i),Gk(e._rawAsyncValidators,i)}function F6(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&lO(n,e)})}function L6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&lO(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function lO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function V6(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function j6(n,e){n==null,uO(n,e)}function U6(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function B6(n){return Object.getPrototypeOf(n.constructor)===y6}function $6(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function H6(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Yg?t=o:B6(o)?r=o:i=o}),i||r||t||null}var z6={provide:sc,useExisting:Er(()=>vC)},Yl=Promise.resolve(),vC=(()=>{class n extends sc{callSetDisabledState;get submitted(){return Pn(this.submittedReactive)}_submitted=Xn(()=>this.submittedReactive());submittedReactive=Qe(!1);_directives=new Set;form;ngSubmit=new we;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Qg({},pC(t),gC(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Yl.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),cO(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Yl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Yl.then(()=>{let r=this._findContainer(t.path),i=new Qg({});j6(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Yl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Yl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),$6(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new dC(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new hC(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(le(fC,10),le(Jk,10),le(mC,8))};static \u0275dir=pt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ge("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Zs([z6]),Jn]})}return n})();function Wk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Kk(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var q6=class extends Kg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(sO(t),aO(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Kk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Wk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Wk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Kk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var G6={provide:Xl,useExisting:Er(()=>_C)},Qk=Promise.resolve(),_C=(()=>{class n extends Xl{_changeDetectorRef;callSetDisabledState;control=new q6;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new we;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=H6(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),U6(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){cO(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Qk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&rf(r);Qk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?k6(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(le(sc,9),le(fC,10),le(Jk,10),le(Zk,10),le(yu,8),le(mC,8))};static \u0275dir=pt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Zs([G6]),Jn,Do]})}return n})();var dO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=pt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var W6=(()=>{class n{_validator=$k;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):$k,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=pt({type:n,features:[Do]})}return n})();var K6={provide:fC,useExisting:Er(()=>EC),multi:!0};var EC=(()=>{class n extends W6{required;inputName="required";normalizeInput=rf;createValidator=t=>D6;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Co(n)))(i||n)}})();static \u0275dir=pt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Xh("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Zs([K6]),Jn]})}return n})();var Q6=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=di({type:n});static \u0275inj=Ir({})}return n})();var hO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:mC,useValue:t.callSetDisabledState??yC}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=di({type:n});static \u0275inj=Ir({imports:[Q6]})}return n})();var Jg=class n{note={id:"",title:"",content:"",updatedAt:new Date,version:0};save=new we;cancel=new we;saveNote(){this.note.updatedAt=new Date,this.note.version+=1,this.save.emit(this.note)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Xt({type:n,selectors:[["app-note-editor"]],inputs:{note:"note"},outputs:{save:"save",cancel:"cancel"},decls:16,vars:2,consts:[[1,"note-form",3,"ngSubmit"],[1,"form-group"],["for","title"],["id","title","name","title","placeholder","Enter title","required","",3,"ngModelChange","ngModel"],["for","content"],["id","content","name","content","placeholder","Enter content","required","",3,"ngModelChange","ngModel"],[1,"button-group"],["type","submit",1,"btn","save"],["type","button",1,"btn","cancel",3,"click"]],template:function(t,r){t&1&&(pe(0,"form",0),Ge("ngSubmit",function(){return r.saveNote()}),pe(1,"h2"),Me(2,"Add a New Note"),ge(),pe(3,"div",1)(4,"label",2),Me(5,"Title"),ge(),pe(6,"input",3),fu("ngModelChange",function(o){return ef(r.note.title,o)||(r.note.title=o),o}),ge()(),pe(7,"div",1)(8,"label",4),Me(9,"Content"),ge(),pe(10,"textarea",5),fu("ngModelChange",function(o){return ef(r.note.content,o)||(r.note.content=o),o}),ge()(),pe(11,"div",6)(12,"button",7),Me(13,"Save"),ge(),pe(14,"button",8),Ge("click",function(){return r.cancel.emit()}),Me(15,"Cancel"),ge()()()),t&2&&(ze(6),hu("ngModel",r.note.title),ze(4),hu("ngModel",r.note.content))},dependencies:[En,hO,dO,Yg,iO,oO,EC,_C,vC],styles:[".note-form[_ngcontent-%COMP%]{max-width:400px;margin:auto;padding:1.5rem;border-radius:12px;background-color:#f9f9f9;box-shadow:0 6px 16px #0000001a}.note-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:1rem;color:#333}.note-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem}.note-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:600;color:#444}.note-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .note-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.75rem;border-radius:8px;border:1px solid #ccc;font-size:1rem;background-color:#fff;transition:border-color .3s}.note-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .note-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}.note-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:120px}.note-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem}.note-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;padding:.75rem;font-size:1rem;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s,transform .2s}.note-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.note-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.save[_ngcontent-%COMP%]:hover{background-color:#218838}.note-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.cancel[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.note-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.cancel[_ngcontent-%COMP%]:hover{background-color:#c82333}.note-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})};var ac=class n{auth=P(Vn);user=Qe(null);constructor(){vM(this.auth,e=>this.user.set(e)),this.login()}login(){return _(this,null,function*(){this.auth.currentUser||(yield _M(this.auth)),console.log("user",this.auth.currentUser)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hi=class n{auth=P(Vn);firestore=P(zr);authService=P(ac);notes=Qe([]);syncing=Qe(!1);conflicts=Qe({});history=Qe([]);future=Qe([]);allNotes=Xn(()=>this.notes());isSyncing=Xn(()=>this.syncing());conflictNotes=Xn(()=>Object.values(this.conflicts()));constructor(){g_(()=>{let e=this.authService.user();e&&(console.log("\u2705 User logged in:",e.uid),this.setupOnlineOfflineListener(),this.listenToRemoteNotes())})}get userId(){let e=this.authService.user();if(!e)throw new Error("User not signed in!");return e.uid}get notesRef(){return Bg(this.firestore,"users",this.userId,"notes")}addNote(e){this.commit(),this.notes.update(t=>[...t,e])}updateNote(e){this.commit(),this.notes.update(t=>t.map(r=>r.id===e.id?e:r))}deleteNote(e){this.commit(),this.notes.update(t=>t.filter(r=>r.id!==e))}setNotes(e){this.notes.set(e)}setSyncing(e){this.syncing.set(e)}setConflict(e){this.conflicts.update(t=>K(O({},t),{[e.id]:e}))}clearConflict(e){this.conflicts.update(t=>{let o=t,{[e]:r}=o;return NT(o,[RT(e)])})}commit(){this.history.update(e=>[...e,this.notes()]),this.future.set([])}undo(){let e=this.history();if(e.length===0)return;let t=e[e.length-1];this.future.update(r=>[this.notes(),...r]),this.notes.set(t),this.history.update(r=>r.slice(0,-1))}redo(){let e=this.future();if(e.length===0)return;let t=e[0];this.history.update(r=>[...r,this.notes()]),this.notes.set(t),this.future.update(r=>r.slice(1))}listenToRemoteNotes(){$g(this.notesRef,e=>{let t=e.docs.map(r=>r.data());this.reconcileNotes(t)})}manualSync(){return _(this,null,function*(){let t=(yield Lk(this.notesRef)).docs.map(r=>r.data());this.reconcileNotes(t)})}reconcileNotes(e){let t=this.notes();console.log("\u{1F9E0} Reconciling notes..."),console.log("Local Notes:",t),console.log("Server Notes:",e);let r=t.map(o=>{let s=e.find(c=>c.id===o.id);return s?s.version>o.version?s:(s.version<o.version||(s.title!==o.title||s.content!==o.content)&&(console.warn("\u26A0\uFE0F Conflict detected for note:",s),this.setConflict(s)),o):o}),i=e.filter(o=>!t.find(s=>s.id===o.id));this.setNotes([...r,...i])}setupOnlineOfflineListener(){window.addEventListener("online",()=>{console.log("\u{1F50C} Online \u2013 syncing..."),this.setSyncing(!0),this.manualSync(),setTimeout(()=>this.setSyncing(!1),2e3)}),window.addEventListener("offline",()=>{console.log("\u{1F4F4} Offline"),this.setSyncing(!1)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xg=class n{constructor(e){this.noteStore=e}note;edit=new we;delete=new we;get updatedDate(){return this.note.updatedAt instanceof Date?this.note.updatedAt:this.note.updatedAt.toDate()}static \u0275fac=function(t){return new(t||n)(le(Hi))};static \u0275cmp=Xt({type:n,selectors:[["app-note-item"]],inputs:{note:"note"},outputs:{edit:"edit",delete:"delete"},decls:14,vars:6,consts:[[1,"note-card"],[1,"note-header"],[1,"note-content"],[1,"note-actions"],[1,"btn","edit",3,"click"],[1,"btn","delete",3,"click"]],template:function(t,r){t&1&&(pe(0,"div",0)(1,"div",1)(2,"h3"),Me(3),ge(),pe(4,"small"),Me(5),a_(6,"date"),ge()(),pe(7,"p",2),Me(8),ge(),pe(9,"div",3)(10,"button",4),Ge("click",function(){return r.edit.emit(r.note)}),Me(11,"Edit"),ge(),pe(12,"button",5),Ge("click",function(){return r.delete.emit(r.note.id)}),Me(13,"Delete"),ge()()()),t&2&&(ze(3),Ao(r.note.title),ze(2),Ro("Updated at : ",c_(6,3,r.updatedDate,"short")),ze(3),Ao(r.note.content))},dependencies:[En,A_],styles:[".note-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 4px 12px #0000000f;padding:1rem;display:flex;flex-direction:column;gap:.75rem;transition:box-shadow .3s}.note-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #0000001a}.note-card[_ngcontent-%COMP%]   .note-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.note-card[_ngcontent-%COMP%]   .note-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:#333}.note-card[_ngcontent-%COMP%]   .note-header[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#888;font-size:.8rem}.note-card[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]{color:#555;font-size:1rem;white-space:pre-wrap}.note-card[_ngcontent-%COMP%]   .note-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem}.note-card[_ngcontent-%COMP%]   .note-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.4rem .8rem;border:none;border-radius:8px;font-size:.9rem;cursor:pointer;transition:background-color .2s,transform .1s}.note-card[_ngcontent-%COMP%]   .note-actions[_ngcontent-%COMP%]   .btn.edit[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.note-card[_ngcontent-%COMP%]   .note-actions[_ngcontent-%COMP%]   .btn.edit[_ngcontent-%COMP%]:hover{background-color:#0056b3}.note-card[_ngcontent-%COMP%]   .note-actions[_ngcontent-%COMP%]   .btn.delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.note-card[_ngcontent-%COMP%]   .note-actions[_ngcontent-%COMP%]   .btn.delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.note-card[_ngcontent-%COMP%]   .note-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active{transform:scale(.97)}"]})};function J6(n,e){if(n&1){let t=Ys();pe(0,"app-note-item",4),Ge("edit",function(i){Wn(t);let o=yn(2);return Kn(o.edit.emit(i))})("delete",function(i){Wn(t);let o=yn(2);return Kn(o.delete.emit(i))}),ge()}if(n&2){let t=e.$implicit;en("note",t)}}function X6(n,e){if(n&1&&(pe(0,"div",2),Ar(1,J6,1,1,"app-note-item",3),ge()),n&2){let t=yn();ze(),en("ngForOf",t.notes)}}function eG(n,e){n&1&&(pe(0,"div",5)(1,"p"),Me(2,"\u{1F4DD} No notes yet. Start by adding one!"),ge()())}var em=class n{notes=[];edit=new we;delete=new we;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Xt({type:n,selectors:[["app-note-list"]],inputs:{notes:"notes"},outputs:{edit:"edit",delete:"delete"},decls:3,vars:2,consts:[["empty",""],["class","notes-container",4,"ngIf","ngIfElse"],[1,"notes-container"],[3,"note","edit","delete",4,"ngFor","ngForOf"],[3,"edit","delete","note"],[1,"empty-state"]],template:function(t,r){if(t&1&&Ar(0,X6,2,1,"div",1)(1,eG,3,0,"ng-template",null,0,u_),t&2){let i=s_(2);en("ngIf",r.notes.length>0)("ngIfElse",i)}},dependencies:[En,ea,Du,Xg],styles:[".notes-container[_ngcontent-%COMP%]{display:grid;gap:1rem;padding:1rem}.empty-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px;font-size:1.2rem;color:#666;background-color:#f3f3f3;border-radius:12px;padding:2rem;margin:2rem auto;text-align:center}"]})};var tm=class n{syncing=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Xt({type:n,selectors:[["app-sync-status"]],inputs:{syncing:"syncing"},decls:3,vars:3,consts:[[1,"sync-status"]],template:function(t,r){t&1&&(pe(0,"div",0)(1,"span"),Me(2),ge()()),t&2&&(ze(),So("syncing",r.syncing),ze(),Ro(" ",r.syncing?"Syncing...":"All changes saved"," "))},dependencies:[En],styles:[".sync-status[_ngcontent-%COMP%]{text-align:right;font-size:.95rem}.sync-status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:.5rem 1rem;border-radius:8px;font-weight:500;background-color:#e6f4ea;color:#2e7d32;transition:background-color .3s,color .3s}.sync-status[_ngcontent-%COMP%]   span.syncing[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;animation:_ngcontent-%COMP%_fadeBlink 1.2s infinite}@keyframes _ngcontent-%COMP%_fadeBlink{0%,to{opacity:1}50%{opacity:.5}}"]})};var yt=[];for(let n=0;n<256;++n)yt.push((n+256).toString(16).slice(1));function pO(n,e=0){return(yt[n[e+0]]+yt[n[e+1]]+yt[n[e+2]]+yt[n[e+3]]+"-"+yt[n[e+4]]+yt[n[e+5]]+"-"+yt[n[e+6]]+yt[n[e+7]]+"-"+yt[n[e+8]]+yt[n[e+9]]+"-"+yt[n[e+10]]+yt[n[e+11]]+yt[n[e+12]]+yt[n[e+13]]+yt[n[e+14]]+yt[n[e+15]]).toLowerCase()}var IC,tG=new Uint8Array(16);function wC(){if(!IC){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");IC=crypto.getRandomValues.bind(crypto)}return IC(tG)}var nG=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),DC={randomUUID:nG};function rG(n,e,t){if(DC.randomUUID&&!e&&!n)return DC.randomUUID();n=n||{};let r=n.random??n.rng?.()??wC();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[t+i]=r[i];return e}return pO(r)}var CC=rG;var nm=class n{firestore=P(zr);auth=P(Vn);store=P(Hi);constructor(){il(this.auth,e=>{e&&this.listenToRemoteNotes(e.uid)})}listenToRemoteNotes(e){let t=Bg(this.firestore,`users/${e}/notes`);$g(t,r=>{let i=[];r.forEach(o=>{let s=o.data();i.push(K(O({},s),{id:o.id}))}),this.mergeRemoteNotes(i)})}mergeRemoteNotes(e){let t=this.store.allNotes(),r=[];for(let i of e){let o=t.find(s=>s.id===i.id);!o||i.version>o.version?r.push(i):i.version<o.version?this.pushNoteToFirestore(o):r.push(o)}this.store.setNotes(r)}pushNoteToFirestore(e){return _(this,null,function*(){let t=this.auth.currentUser;if(!t)return;let r=uC(this.firestore,`users/${t.uid}/notes/${e.id}`);yield jk(r,K(O({},e),{updatedAt:Fe.now()}))})}deleteNoteFromFirestore(e){return _(this,null,function*(){let t=this.auth.currentUser;if(!t)return;let r=uC(this.firestore,`users/${t.uid}/notes/${e}`);yield Ok(r)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};function oG(n,e){if(n&1){let t=Ys();pe(0,"div",10)(1,"p")(2,"strong"),Me(3),ge(),Me(4," has a newer version on server."),ge(),pe(5,"button",5),Ge("click",function(){let i=Wn(t).$implicit,o=yn(2);return Kn(o.acceptRemote(i))}),Me(6,"Use Server Version"),ge(),pe(7,"button",5),Ge("click",function(){let i=Wn(t).$implicit,o=yn(2);return Kn(o.keepLocal(i.id))}),Me(8,"Keep Local Version"),ge()()}if(n&2){let t=e.$implicit;ze(3),Ao(t.title)}}function sG(n,e){if(n&1&&(pe(0,"div",8)(1,"h3"),Me(2,"\u{1F6D1} Conflicts Detected"),ge(),Ar(3,oG,9,1,"div",9),ge()),n&2){let t=yn();ze(3),en("ngForOf",t.store.conflictNotes())}}function aG(n,e){if(n&1){let t=Ys();pe(0,"div",11)(1,"div",12)(2,"app-note-editor",13),Ge("save",function(i){Wn(t);let o=yn();return Kn(o.saveNote(i))})("cancel",function(){Wn(t);let i=yn();return Kn(i.cancelEdit())}),ge()()()}if(n&2){let t=yn();ze(2),en("note",t.editingNote())}}var rm=class n{constructor(e,t,r){this.authS=e;this.store=t;this.syncService=r}editingNote=Qe(null);startNewNote(){this.editingNote.set({id:CC(),title:"",content:"",updatedAt:new Date,version:0})}editNote(e){this.editingNote.set(O({},e))}saveNote(e){this.store.allNotes().find(r=>r.id===e.id)?this.store.updateNote(e):this.store.addNote(e),this.syncService.pushNoteToFirestore(e),this.editingNote.set(null)}deleteNote(e){confirm("Are you sure you want to delete this note?")&&(this.store.deleteNote(e),this.syncService.deleteNoteFromFirestore(e))}cancelEdit(){this.editingNote.set(null)}undo(){this.store.undo()}redo(){this.store.redo()}acceptRemote(e){this.store.updateNote(e),this.store.clearConflict(e.id)}keepLocal(e){this.store.clearConflict(e)}static \u0275fac=function(t){return new(t||n)(le(ac),le(Hi),le(nm))};static \u0275cmp=Xt({type:n,selectors:[["app-root"]],decls:12,vars:4,consts:[[1,"container"],[3,"syncing"],["class","conflicts",4,"ngIf"],[1,"new-note-btn",3,"click"],[1,"actions"],[3,"click"],["class","modal-backdrop",4,"ngIf"],[3,"edit","delete","notes"],[1,"conflicts"],["class","conflict-item",4,"ngFor","ngForOf"],[1,"conflict-item"],[1,"modal-backdrop"],[1,"modal"],[3,"save","cancel","note"]],template:function(t,r){t&1&&(pe(0,"div",0),Qs(1,"app-sync-status",1),Ar(2,sG,4,1,"div",2),pe(3,"button",3),Ge("click",function(){return r.startNewNote()}),Me(4,"+ New Note"),ge(),pe(5,"div",4)(6,"button",5),Ge("click",function(){return r.undo()}),Me(7,"Undo"),ge(),pe(8,"button",5),Ge("click",function(){return r.redo()}),Me(9,"Redo"),ge()(),Ar(10,aG,3,1,"div",6),pe(11,"app-note-list",7),Ge("edit",function(o){return r.editNote(o)})("delete",function(o){return r.deleteNote(o)}),ge()()),t&2&&(ze(),en("syncing",r.store.isSyncing()),ze(),en("ngIf",r.store.conflictNotes().length),ze(8),en("ngIf",r.editingNote()),ze(),en("notes",r.store.allNotes()))},dependencies:[En,ea,Du,em,Jg,tm],styles:[".container[_ngcontent-%COMP%]{max-width:700px;margin:1rem auto;padding:1rem;font-family:Segoe UI,sans-serif;background:#f9f9f9;border-radius:8px;box-shadow:0 4px 12px #0000001a;display:flex;flex-direction:column;height:85vh;overflow:hidden}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#333}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;max-width:200px;padding:.6rem 1.2rem;border-radius:4px;cursor:pointer;margin-right:.5rem;transition:background-color .3s ease}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:1rem}.container[_ngcontent-%COMP%]   app-note-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;margin-top:1rem;padding-right:.5rem}.container[_ngcontent-%COMP%]   app-note-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.container[_ngcontent-%COMP%]   app-note-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#ccc;border-radius:4px}.container[_ngcontent-%COMP%]   app-note-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0006;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-backdrop[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:12px;box-shadow:0 10px 30px #00000040;max-width:500px;width:90%;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.conflicts[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffeeba;padding:12px;margin:12px 0;border-radius:4px}.conflict-item[_ngcontent-%COMP%]{margin-bottom:10px}"]})};V_(rm,Bk).catch(n=>console.error(n));
